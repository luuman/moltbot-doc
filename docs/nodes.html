<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-nodes/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Nodes | Moltbot Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://luuman.github.io/moltbot-doc/docs/nodes"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Nodes | Moltbot Docs"><meta data-rh="true" name="description" content="A node is a companion device (macOS/iOS/Android/headless) that connects to the Gateway WebSocket (same port as operators) with role Gateway protocol."><meta data-rh="true" property="og:description" content="A node is a companion device (macOS/iOS/Android/headless) that connects to the Gateway WebSocket (same port as operators) with role Gateway protocol."><link data-rh="true" rel="icon" href="/moltbot-doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luuman.github.io/moltbot-doc/docs/nodes"><link data-rh="true" rel="alternate" href="https://luuman.github.io/moltbot-doc/docs/nodes" hreflang="zh"><link data-rh="true" rel="alternate" href="https://luuman.github.io/moltbot-doc/docs/nodes" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/moltbot-doc/blog/rss.xml" title="Moltbot Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/moltbot-doc/blog/atom.xml" title="Moltbot Docs Atom Feed"><link rel="stylesheet" href="/moltbot-doc/assets/css/styles.484b4c98.css">
<script src="/moltbot-doc/assets/js/runtime~main.6cf495cf.js" defer="defer"></script>
<script src="/moltbot-doc/assets/js/main.f9205183.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"dark"),document.documentElement.setAttribute("data-theme-choice",t||"dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbar_MONK" role="navigation" aria-label="Main"><div class="navbarInner_ASTH"><div class="navbarLeft_pUmY"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="brand_SXL9" href="/moltbot-doc/"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="24" height="24" rx="6" fill="var(--ifm-color-primary)"></rect><path d="M7 8.5h10M7 12h7M7 15.5h10" stroke="white" stroke-width="1.8" stroke-linecap="round"></path></svg><span class="brandTitle_XbyU">Moltbot</span></a><div class="dropdown_GrgZ"><button class="dropdownToggle_Nf_z">全部站点<svg class="dropdownArrow_Eka8" viewBox="0 0 12 12" fill="none"><path d="M2 4l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg></button><ul class="dropdownMenu_zsxH"><li><a href="https://luuman.github.io/docs-workspace/docs" class="dropdownMenuItem_VBaP">Workspace</a></li><li><a href="https://luuman.github.io/claude-doc/docs" class="dropdownMenuItem_VBaP">Claude</a></li><li><a href="https://luuman.github.io/electron-doc/docs" class="dropdownMenuItem_VBaP">Electron</a></li><li><a href="https://luuman.github.io/tauri-doc/docs" class="dropdownMenuItem_VBaP">Tauri</a></li><li><a href="https://luuman.github.io/matrx-doc/docs" class="dropdownMenuItem_VBaP">Matrx</a></li><li><a href="https://luuman.github.io/brainboard-doc/docs" class="dropdownMenuItem_VBaP">Brainboard</a></li><li><a href="https://luuman.github.io/synology-doc/docs" class="dropdownMenuItem_VBaP">Synology</a></li><li><a href="https://luuman.github.io/codex-doc/docs" class="dropdownMenuItem_VBaP">Codex</a></li><li><a href="https://luuman.github.io/ai-doc/docs" class="dropdownMenuItem_VBaP">AI</a></li></ul></div></div><div class="navbarCenter_Zdr3"><div class="root_OF3s"><span class="icon_UcOK" aria-hidden="true"><svg viewBox="0 0 24 24" fill="currentColor" width="15" height="15"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></span><div class="slot__FGx"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="搜索" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div class="navbarRight_q16u"><a class="navLink_RnnM" href="/moltbot-doc/docs">Docs</a><a class="navLink_RnnM" href="/moltbot-doc/blog">Blog</a><button class="themeToggle_zD_x" aria-label="Switch to light theme" title="Light"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></button></div></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Nodes</h1></header>
<p>A <strong>node</strong> is a companion device (macOS/iOS/Android/headless) that connects to the Gateway <strong>WebSocket</strong> (same port as operators) with <code>role: &quot;node&quot;</code> and exposes a command surface (e.g. <code>canvas.*</code>, <code>camera.*</code>, <code>system.*</code>) via <code>node.invoke</code>. Protocol details: <a class="" href="/moltbot-doc/gateway/protocol">Gateway protocol</a>.</p>
<p>Legacy transport: <a class="" href="/moltbot-doc/gateway/bridge-protocol">Bridge protocol</a> (TCP JSONL; deprecated/removed for current nodes).</p>
<p>macOS can also run in <strong>node mode</strong>: the menubar app connects to the Gateway’s WS server and exposes its local canvas/camera commands as a node (so <code>moltbot nodes …</code> works against this Mac).</p>
<p>Notes:</p>
<ul>
<li class="">Nodes are <strong>peripherals</strong>, not gateways. They don’t run the gateway service.</li>
<li class="">Telegram/WhatsApp/etc. messages land on the <strong>gateway</strong>, not on nodes.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="pairing--status">Pairing + status<a href="#pairing--status" class="hash-link" aria-label="Pairing + status的直接链接" title="Pairing + status的直接链接" translate="no">​</a></h2>
<p><strong>WS nodes use device pairing.</strong> Nodes present a device identity during <code>connect</code>; the Gateway
creates a device pairing request for <code>role: node</code>. Approve via the devices CLI (or UI).</p>
<p>Quick CLI:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot devices list</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot devices approve &lt;requestId&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot devices reject &lt;requestId&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes status</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes describe --node &lt;idOrNameOrIp&gt;</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class=""><code>nodes status</code> marks a node as <strong>paired</strong> when its device pairing role includes <code>node</code>.</li>
<li class=""><code>node.pair.*</code> (CLI: <code>moltbot nodes pending/approve/reject</code>) is a separate gateway-owned
node pairing store; it does <strong>not</strong> gate the WS <code>connect</code> handshake.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="remote-node-host-systemrun">Remote node host (system.run)<a href="#remote-node-host-systemrun" class="hash-link" aria-label="Remote node host (system.run)的直接链接" title="Remote node host (system.run)的直接链接" translate="no">​</a></h2>
<p>Use a <strong>node host</strong> when your Gateway runs on one machine and you want commands
to execute on another. The model still talks to the <strong>gateway</strong>; the gateway
forwards <code>exec</code> calls to the <strong>node host</strong> when <code>host=node</code> is selected.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-runs-where">What runs where<a href="#what-runs-where" class="hash-link" aria-label="What runs where的直接链接" title="What runs where的直接链接" translate="no">​</a></h3>
<ul>
<li class=""><strong>Gateway host</strong>: receives messages, runs the model, routes tool calls.</li>
<li class=""><strong>Node host</strong>: executes <code>system.run</code>/<code>system.which</code> on the node machine.</li>
<li class=""><strong>Approvals</strong>: enforced on the node host via <code>~/.clawdbot/exec-approvals.json</code>.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="start-a-node-host-foreground">Start a node host (foreground)<a href="#start-a-node-host-foreground" class="hash-link" aria-label="Start a node host (foreground)的直接链接" title="Start a node host (foreground)的直接链接" translate="no">​</a></h3>
<p>On the node machine:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot node run --host &lt;gateway-host&gt; --port 18789 --display-name &quot;Build Node&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="start-a-node-host-service">Start a node host (service)<a href="#start-a-node-host-service" class="hash-link" aria-label="Start a node host (service)的直接链接" title="Start a node host (service)的直接链接" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot node install --host &lt;gateway-host&gt; --port 18789 --display-name &quot;Build Node&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot node restart</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pair--name">Pair + name<a href="#pair--name" class="hash-link" aria-label="Pair + name的直接链接" title="Pair + name的直接链接" translate="no">​</a></h3>
<p>On the gateway host:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes pending</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes approve &lt;requestId&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes list</span><br></span></code></pre></div></div>
<p>Naming options:</p>
<ul>
<li class=""><code>--display-name</code> on <code>moltbot node run</code> / <code>moltbot node install</code> (persists in <code>~/.clawdbot/node.json</code> on the node).</li>
<li class=""><code>moltbot nodes rename --node &lt;id|name|ip&gt; --name &quot;Build Node&quot;</code> (gateway override).</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="allowlist-the-commands">Allowlist the commands<a href="#allowlist-the-commands" class="hash-link" aria-label="Allowlist the commands的直接链接" title="Allowlist the commands的直接链接" translate="no">​</a></h3>
<p>Exec approvals are <strong>per node host</strong>. Add allowlist entries from the gateway:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot approvals allowlist add --node &lt;id|name|ip&gt; &quot;/usr/bin/uname&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot approvals allowlist add --node &lt;id|name|ip&gt; &quot;/usr/bin/sw_vers&quot;</span><br></span></code></pre></div></div>
<p>Approvals live on the node host at <code>~/.clawdbot/exec-approvals.json</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="point-exec-at-the-node">Point exec at the node<a href="#point-exec-at-the-node" class="hash-link" aria-label="Point exec at the node的直接链接" title="Point exec at the node的直接链接" translate="no">​</a></h3>
<p>Configure defaults (gateway config):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config set tools.exec.host node</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config set tools.exec.security allowlist</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config set tools.exec.node &quot;&lt;id-or-name&gt;&quot;</span><br></span></code></pre></div></div>
<p>Or per session:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">/exec host=node security=allowlist node=&lt;id-or-name&gt;</span><br></span></code></pre></div></div>
<p>Once set, any <code>exec</code> call with <code>host=node</code> runs on the node host (subject to the
node allowlist/approvals).</p>
<p>Related:</p>
<ul>
<li class=""><a class="" href="/moltbot-doc/cli/node">Node host CLI</a></li>
<li class=""><a class="" href="/moltbot-doc/tools/exec">Exec tool</a></li>
<li class=""><a class="" href="/moltbot-doc/tools/exec-approvals">Exec approvals</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="invoking-commands">Invoking commands<a href="#invoking-commands" class="hash-link" aria-label="Invoking commands的直接链接" title="Invoking commands的直接链接" translate="no">​</a></h2>
<p>Low-level (raw RPC):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes invoke --node &lt;idOrNameOrIp&gt; --command canvas.eval --params &#x27;{&quot;javaScript&quot;:&quot;location.href&quot;}&#x27;</span><br></span></code></pre></div></div>
<p>Higher-level helpers exist for the common “give the agent a MEDIA attachment” workflows.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="screenshots-canvas-snapshots">Screenshots (canvas snapshots)<a href="#screenshots-canvas-snapshots" class="hash-link" aria-label="Screenshots (canvas snapshots)的直接链接" title="Screenshots (canvas snapshots)的直接链接" translate="no">​</a></h2>
<p>If the node is showing the Canvas (WebView), <code>canvas.snapshot</code> returns <code>{ format, base64 }</code>.</p>
<p>CLI helper (writes to a temp file and prints <code>MEDIA:&lt;path&gt;</code>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas snapshot --node &lt;idOrNameOrIp&gt; --format png</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas snapshot --node &lt;idOrNameOrIp&gt; --format jpg --max-width 1200 --quality 0.9</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="canvas-controls">Canvas controls<a href="#canvas-controls" class="hash-link" aria-label="Canvas controls的直接链接" title="Canvas controls的直接链接" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas present --node &lt;idOrNameOrIp&gt; --target https://example.com</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas hide --node &lt;idOrNameOrIp&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas navigate https://example.com --node &lt;idOrNameOrIp&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas eval --node &lt;idOrNameOrIp&gt; --js &quot;document.title&quot;</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class=""><code>canvas present</code> accepts URLs or local file paths (<code>--target</code>), plus optional <code>--x/--y/--width/--height</code> for positioning.</li>
<li class=""><code>canvas eval</code> accepts inline JS (<code>--js</code>) or a positional arg.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a2ui-canvas">A2UI (Canvas)<a href="#a2ui-canvas" class="hash-link" aria-label="A2UI (Canvas)的直接链接" title="A2UI (Canvas)的直接链接" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas a2ui push --node &lt;idOrNameOrIp&gt; --text &quot;Hello&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas a2ui push --node &lt;idOrNameOrIp&gt; --jsonl ./payload.jsonl</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes canvas a2ui reset --node &lt;idOrNameOrIp&gt;</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class="">Only A2UI v0.8 JSONL is supported (v0.9/createSurface is rejected).</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="photos--videos-node-camera">Photos + videos (node camera)<a href="#photos--videos-node-camera" class="hash-link" aria-label="Photos + videos (node camera)的直接链接" title="Photos + videos (node camera)的直接链接" translate="no">​</a></h2>
<p>Photos (<code>jpg</code>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes camera list --node &lt;idOrNameOrIp&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes camera snap --node &lt;idOrNameOrIp&gt;            # default: both facings (2 MEDIA lines)</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes camera snap --node &lt;idOrNameOrIp&gt; --facing front</span><br></span></code></pre></div></div>
<p>Video clips (<code>mp4</code>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes camera clip --node &lt;idOrNameOrIp&gt; --duration 10s</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes camera clip --node &lt;idOrNameOrIp&gt; --duration 3000 --no-audio</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class="">The node must be <strong>foregrounded</strong> for <code>canvas.*</code> and <code>camera.*</code> (background calls return <code>NODE_BACKGROUND_UNAVAILABLE</code>).</li>
<li class="">Clip duration is clamped (currently <code>&lt;= 60s</code>) to avoid oversized base64 payloads.</li>
<li class="">Android will prompt for <code>CAMERA</code>/<code>RECORD_AUDIO</code> permissions when possible; denied permissions fail with <code>*_PERMISSION_REQUIRED</code>.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="screen-recordings-nodes">Screen recordings (nodes)<a href="#screen-recordings-nodes" class="hash-link" aria-label="Screen recordings (nodes)的直接链接" title="Screen recordings (nodes)的直接链接" translate="no">​</a></h2>
<p>Nodes expose <code>screen.record</code> (mp4). Example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes screen record --node &lt;idOrNameOrIp&gt; --duration 10s --fps 10</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes screen record --node &lt;idOrNameOrIp&gt; --duration 10s --fps 10 --no-audio</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class=""><code>screen.record</code> requires the node app to be foregrounded.</li>
<li class="">Android will show the system screen-capture prompt before recording.</li>
<li class="">Screen recordings are clamped to <code>&lt;= 60s</code>.</li>
<li class=""><code>--no-audio</code> disables microphone capture (supported on iOS/Android; macOS uses system capture audio).</li>
<li class="">Use <code>--screen &lt;index&gt;</code> to select a display when multiple screens are available.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="location-nodes">Location (nodes)<a href="#location-nodes" class="hash-link" aria-label="Location (nodes)的直接链接" title="Location (nodes)的直接链接" translate="no">​</a></h2>
<p>Nodes expose <code>location.get</code> when Location is enabled in settings.</p>
<p>CLI helper:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes location get --node &lt;idOrNameOrIp&gt;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes location get --node &lt;idOrNameOrIp&gt; --accuracy precise --max-age 15000 --location-timeout 10000</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class="">Location is <strong>off by default</strong>.</li>
<li class="">“Always” requires system permission; background fetch is best-effort.</li>
<li class="">The response includes lat/lon, accuracy (meters), and timestamp.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sms-android-nodes">SMS (Android nodes)<a href="#sms-android-nodes" class="hash-link" aria-label="SMS (Android nodes)的直接链接" title="SMS (Android nodes)的直接链接" translate="no">​</a></h2>
<p>Android nodes can expose <code>sms.send</code> when the user grants <strong>SMS</strong> permission and the device supports telephony.</p>
<p>Low-level invoke:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes invoke --node &lt;idOrNameOrIp&gt; --command sms.send --params &#x27;{&quot;to&quot;:&quot;+15555550123&quot;,&quot;message&quot;:&quot;Hello from Moltbot&quot;}&#x27;</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class="">The permission prompt must be accepted on the Android device before the capability is advertised.</li>
<li class="">Wi-Fi-only devices without telephony will not advertise <code>sms.send</code>.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="system-commands-node-host--mac-node">System commands (node host / mac node)<a href="#system-commands-node-host--mac-node" class="hash-link" aria-label="System commands (node host / mac node)的直接链接" title="System commands (node host / mac node)的直接链接" translate="no">​</a></h2>
<p>The macOS node exposes <code>system.run</code>, <code>system.notify</code>, and <code>system.execApprovals.get/set</code>.
The headless node host exposes <code>system.run</code>, <code>system.which</code>, and <code>system.execApprovals.get/set</code>.</p>
<p>Examples:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes run --node &lt;idOrNameOrIp&gt; -- echo &quot;Hello from mac node&quot;</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot nodes notify --node &lt;idOrNameOrIp&gt; --title &quot;Ping&quot; --body &quot;Gateway ready&quot;</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class=""><code>system.run</code> returns stdout/stderr/exit code in the payload.</li>
<li class=""><code>system.notify</code> respects notification permission state on the macOS app.</li>
<li class=""><code>system.run</code> supports <code>--cwd</code>, <code>--env KEY=VAL</code>, <code>--command-timeout</code>, and <code>--needs-screen-recording</code>.</li>
<li class=""><code>system.notify</code> supports <code>--priority &lt;passive|active|timeSensitive&gt;</code> and <code>--delivery &lt;system|overlay|auto&gt;</code>.</li>
<li class="">macOS nodes drop <code>PATH</code> overrides; headless node hosts only accept <code>PATH</code> when it prepends the node host PATH.</li>
<li class="">On macOS node mode, <code>system.run</code> is gated by exec approvals in the macOS app (Settings → Exec approvals).
Ask/allowlist/full behave the same as the headless node host; denied prompts return <code>SYSTEM_RUN_DENIED</code>.</li>
<li class="">On headless node host, <code>system.run</code> is gated by exec approvals (<code>~/.clawdbot/exec-approvals.json</code>).</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="exec-node-binding">Exec node binding<a href="#exec-node-binding" class="hash-link" aria-label="Exec node binding的直接链接" title="Exec node binding的直接链接" translate="no">​</a></h2>
<p>When multiple nodes are available, you can bind exec to a specific node.
This sets the default node for <code>exec host=node</code> (and can be overridden per agent).</p>
<p>Global default:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config set tools.exec.node &quot;node-id-or-name&quot;</span><br></span></code></pre></div></div>
<p>Per-agent override:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config get agents.list</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config set agents.list[0].tools.exec.node &quot;node-id-or-name&quot;</span><br></span></code></pre></div></div>
<p>Unset to allow any node:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config unset tools.exec.node</span><br></span><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot config unset agents.list[0].tools.exec.node</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="permissions-map">Permissions map<a href="#permissions-map" class="hash-link" aria-label="Permissions map的直接链接" title="Permissions map的直接链接" translate="no">​</a></h2>
<p>Nodes may include a <code>permissions</code> map in <code>node.list</code> / <code>node.describe</code>, keyed by permission name (e.g. <code>screenRecording</code>, <code>accessibility</code>) with boolean values (<code>true</code> = granted).</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="headless-node-host-cross-platform">Headless node host (cross-platform)<a href="#headless-node-host-cross-platform" class="hash-link" aria-label="Headless node host (cross-platform)的直接链接" title="Headless node host (cross-platform)的直接链接" translate="no">​</a></h2>
<p>Moltbot can run a <strong>headless node host</strong> (no UI) that connects to the Gateway
WebSocket and exposes <code>system.run</code> / <code>system.which</code>. This is useful on Linux/Windows
or for running a minimal node alongside a server.</p>
<p>Start it:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#D6DEEB;--prism-background-color:#001122"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#D6DEEB;background-color:#001122"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#D6DEEB"><span class="token plain">moltbot node run --host &lt;gateway-host&gt; --port 18789</span><br></span></code></pre></div></div>
<p>Notes:</p>
<ul>
<li class="">Pairing is still required (the Gateway will show a node approval prompt).</li>
<li class="">The node host stores its node id, token, display name, and gateway connection info in <code>~/.clawdbot/node.json</code>.</li>
<li class="">Exec approvals are enforced locally via <code>~/.clawdbot/exec-approvals.json</code>
(see <a class="" href="/moltbot-doc/tools/exec-approvals">Exec approvals</a>).</li>
<li class="">On macOS, the headless node host prefers the companion app exec host when reachable and falls
back to local execution if the app is unavailable. Set <code>CLAWDBOT_NODE_EXEC_HOST=app</code> to require
the app, or <code>CLAWDBOT_NODE_EXEC_FALLBACK=0</code> to disable fallback.</li>
<li class="">Add <code>--tls</code> / <code>--tls-fingerprint</code> when the Gateway WS uses TLS.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mac-node-mode">Mac node mode<a href="#mac-node-mode" class="hash-link" aria-label="Mac node mode的直接链接" title="Mac node mode的直接链接" translate="no">​</a></h2>
<ul>
<li class="">The macOS menubar app connects to the Gateway WS server as a node (so <code>moltbot nodes …</code> works against this Mac).</li>
<li class="">In remote mode, the app opens an SSH tunnel for the Gateway port and connects to <code>localhost</code>.</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"></nav></div></div><div class="col col--3"><div class="tocWrapper_xKoj"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pairing--status" class="table-of-contents__link toc-highlight">Pairing + status</a></li><li><a href="#remote-node-host-systemrun" class="table-of-contents__link toc-highlight">Remote node host (system.run)</a><ul><li><a href="#what-runs-where" class="table-of-contents__link toc-highlight">What runs where</a></li><li><a href="#start-a-node-host-foreground" class="table-of-contents__link toc-highlight">Start a node host (foreground)</a></li><li><a href="#start-a-node-host-service" class="table-of-contents__link toc-highlight">Start a node host (service)</a></li><li><a href="#pair--name" class="table-of-contents__link toc-highlight">Pair + name</a></li><li><a href="#allowlist-the-commands" class="table-of-contents__link toc-highlight">Allowlist the commands</a></li><li><a href="#point-exec-at-the-node" class="table-of-contents__link toc-highlight">Point exec at the node</a></li></ul></li><li><a href="#invoking-commands" class="table-of-contents__link toc-highlight">Invoking commands</a></li><li><a href="#screenshots-canvas-snapshots" class="table-of-contents__link toc-highlight">Screenshots (canvas snapshots)</a><ul><li><a href="#canvas-controls" class="table-of-contents__link toc-highlight">Canvas controls</a></li><li><a href="#a2ui-canvas" class="table-of-contents__link toc-highlight">A2UI (Canvas)</a></li></ul></li><li><a href="#photos--videos-node-camera" class="table-of-contents__link toc-highlight">Photos + videos (node camera)</a></li><li><a href="#screen-recordings-nodes" class="table-of-contents__link toc-highlight">Screen recordings (nodes)</a></li><li><a href="#location-nodes" class="table-of-contents__link toc-highlight">Location (nodes)</a></li><li><a href="#sms-android-nodes" class="table-of-contents__link toc-highlight">SMS (Android nodes)</a></li><li><a href="#system-commands-node-host--mac-node" class="table-of-contents__link toc-highlight">System commands (node host / mac node)</a></li><li><a href="#exec-node-binding" class="table-of-contents__link toc-highlight">Exec node binding</a></li><li><a href="#permissions-map" class="table-of-contents__link toc-highlight">Permissions map</a></li><li><a href="#headless-node-host-cross-platform" class="table-of-contents__link toc-highlight">Headless node host (cross-platform)</a></li><li><a href="#mac-node-mode" class="table-of-contents__link toc-highlight">Mac node mode</a></li></ul></div><div class="tocFooter_Fu2z"><div class="themeGroup_RzWV" role="group" aria-label="Theme"><button class="themeBtn_tGr6" aria-label="Light theme" title="Light"><svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor" aria-hidden="true"><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"></path></svg></button><button class="themeBtn_tGr6 themeBtnActive_A6tm" aria-label="Dark theme" title="Dark"><svg viewBox="0 0 24 24" width="15" height="15" fill="currentColor" aria-hidden="true"><path d="M11.38 2.019a7.5 7.5 0 1 0 10.6 10.6C21.83 17.963 17.315 22 12.002 22 6.477 22 2 17.523 2 12c0-5.314 4.038-9.827 9.38-10.28z"></path></svg></button></div></div></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Moltbot Docs.</div></div></div></footer></div>
</body>
</html>