"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[1675],{1602(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"nodes/camera","title":"Camera capture (agent)","description":"Moltbot supports camera capture for agent workflows:","source":"@site/content/moltbot/docs/nodes/camera.md","sourceDirName":"nodes","slug":"/nodes/camera","permalink":"/moltbot-doc/docs/nodes/camera","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Camera capture (iOS node + macOS app) for agent use: photos (jpg) and short video clips (mp4)","read_when":["Adding or modifying camera capture on iOS nodes or macOS","Extending agent-accessible MEDIA temp-file workflows"]}}');var i=s(74848),r=s(28453);const l={summary:"Camera capture (iOS node + macOS app) for agent use: photos (jpg) and short video clips (mp4)",read_when:["Adding or modifying camera capture on iOS nodes or macOS","Extending agent-accessible MEDIA temp-file workflows"]},o="Camera capture (agent)",c={},a=[{value:"iOS node",id:"ios-node",level:2},{value:"User setting (default on)",id:"user-setting-default-on",level:3},{value:"Commands (via Gateway <code>node.invoke</code>)",id:"commands-via-gateway-nodeinvoke",level:3},{value:"Foreground requirement",id:"foreground-requirement",level:3},{value:"CLI helper (temp files + MEDIA)",id:"cli-helper-temp-files--media",level:3},{value:"Android node",id:"android-node",level:2},{value:"User setting (default on)",id:"user-setting-default-on-1",level:3},{value:"Permissions",id:"permissions",level:3},{value:"Foreground requirement",id:"foreground-requirement-1",level:3},{value:"Payload guard",id:"payload-guard",level:3},{value:"macOS app",id:"macos-app",level:2},{value:"User setting (default off)",id:"user-setting-default-off",level:3},{value:"CLI helper (node invoke)",id:"cli-helper-node-invoke",level:3},{value:"Safety + practical limits",id:"safety--practical-limits",level:2},{value:"macOS screen video (OS-level)",id:"macos-screen-video-os-level",level:2}];function t(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"camera-capture-agent",children:"Camera capture (agent)"})}),"\n",(0,i.jsxs)(n.p,{children:["Moltbot supports ",(0,i.jsx)(n.strong,{children:"camera capture"})," for agent workflows:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"iOS node"})," (paired via Gateway): capture a ",(0,i.jsx)(n.strong,{children:"photo"})," (",(0,i.jsx)(n.code,{children:"jpg"}),") or ",(0,i.jsx)(n.strong,{children:"short video clip"})," (",(0,i.jsx)(n.code,{children:"mp4"}),", with optional audio) via ",(0,i.jsx)(n.code,{children:"node.invoke"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Android node"})," (paired via Gateway): capture a ",(0,i.jsx)(n.strong,{children:"photo"})," (",(0,i.jsx)(n.code,{children:"jpg"}),") or ",(0,i.jsx)(n.strong,{children:"short video clip"})," (",(0,i.jsx)(n.code,{children:"mp4"}),", with optional audio) via ",(0,i.jsx)(n.code,{children:"node.invoke"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"macOS app"})," (node via Gateway): capture a ",(0,i.jsx)(n.strong,{children:"photo"})," (",(0,i.jsx)(n.code,{children:"jpg"}),") or ",(0,i.jsx)(n.strong,{children:"short video clip"})," (",(0,i.jsx)(n.code,{children:"mp4"}),", with optional audio) via ",(0,i.jsx)(n.code,{children:"node.invoke"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["All camera access is gated behind ",(0,i.jsx)(n.strong,{children:"user-controlled settings"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"ios-node",children:"iOS node"}),"\n",(0,i.jsx)(n.h3,{id:"user-setting-default-on",children:"User setting (default on)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["iOS Settings tab \u2192 ",(0,i.jsx)(n.strong,{children:"Camera"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Allow Camera"})," (",(0,i.jsx)(n.code,{children:"camera.enabled"}),")\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Default: ",(0,i.jsx)(n.strong,{children:"on"})," (missing key is treated as enabled)."]}),"\n",(0,i.jsxs)(n.li,{children:["When off: ",(0,i.jsx)(n.code,{children:"camera.*"})," commands return ",(0,i.jsx)(n.code,{children:"CAMERA_DISABLED"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"commands-via-gateway-nodeinvoke",children:["Commands (via Gateway ",(0,i.jsx)(n.code,{children:"node.invoke"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"camera.list"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Response payload:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"devices"}),": array of ",(0,i.jsx)(n.code,{children:"{ id, name, position, deviceType }"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"camera.snap"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Params:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"facing"}),": ",(0,i.jsx)(n.code,{children:"front|back"})," (default: ",(0,i.jsx)(n.code,{children:"front"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"maxWidth"}),": number (optional; default ",(0,i.jsx)(n.code,{children:"1600"})," on the iOS node)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"quality"}),": ",(0,i.jsx)(n.code,{children:"0..1"})," (optional; default ",(0,i.jsx)(n.code,{children:"0.9"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"format"}),": currently ",(0,i.jsx)(n.code,{children:"jpg"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"delayMs"}),": number (optional; default ",(0,i.jsx)(n.code,{children:"0"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"deviceId"}),": string (optional; from ",(0,i.jsx)(n.code,{children:"camera.list"}),")"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Response payload:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'format: "jpg"'})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'base64: "<...>"'})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"width"}),", ",(0,i.jsx)(n.code,{children:"height"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Payload guard: photos are recompressed to keep the base64 payload under 5 MB."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"camera.clip"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Params:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"facing"}),": ",(0,i.jsx)(n.code,{children:"front|back"})," (default: ",(0,i.jsx)(n.code,{children:"front"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"durationMs"}),": number (default ",(0,i.jsx)(n.code,{children:"3000"}),", clamped to a max of ",(0,i.jsx)(n.code,{children:"60000"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"includeAudio"}),": boolean (default ",(0,i.jsx)(n.code,{children:"true"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"format"}),": currently ",(0,i.jsx)(n.code,{children:"mp4"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"deviceId"}),": string (optional; from ",(0,i.jsx)(n.code,{children:"camera.list"}),")"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Response payload:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'format: "mp4"'})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:'base64: "<...>"'})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"durationMs"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"hasAudio"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"foreground-requirement",children:"Foreground requirement"}),"\n",(0,i.jsxs)(n.p,{children:["Like ",(0,i.jsx)(n.code,{children:"canvas.*"}),", the iOS node only allows ",(0,i.jsx)(n.code,{children:"camera.*"})," commands in the ",(0,i.jsx)(n.strong,{children:"foreground"}),". Background invocations return ",(0,i.jsx)(n.code,{children:"NODE_BACKGROUND_UNAVAILABLE"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"cli-helper-temp-files--media",children:"CLI helper (temp files + MEDIA)"}),"\n",(0,i.jsxs)(n.p,{children:["The easiest way to get attachments is via the CLI helper, which writes decoded media to a temp file and prints ",(0,i.jsx)(n.code,{children:"MEDIA:<path>"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Examples:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"moltbot nodes camera snap --node <id>               # default: both front + back (2 MEDIA lines)\nmoltbot nodes camera snap --node <id> --facing front\nmoltbot nodes camera clip --node <id> --duration 3000\nmoltbot nodes camera clip --node <id> --no-audio\n"})}),"\n",(0,i.jsx)(n.p,{children:"Notes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"nodes camera snap"})," defaults to ",(0,i.jsx)(n.strong,{children:"both"})," facings to give the agent both views."]}),"\n",(0,i.jsx)(n.li,{children:"Output files are temporary (in the OS temp directory) unless you build your own wrapper."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"android-node",children:"Android node"}),"\n",(0,i.jsx)(n.h3,{id:"user-setting-default-on-1",children:"User setting (default on)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Android Settings sheet \u2192 ",(0,i.jsx)(n.strong,{children:"Camera"})," \u2192 ",(0,i.jsx)(n.strong,{children:"Allow Camera"})," (",(0,i.jsx)(n.code,{children:"camera.enabled"}),")\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Default: ",(0,i.jsx)(n.strong,{children:"on"})," (missing key is treated as enabled)."]}),"\n",(0,i.jsxs)(n.li,{children:["When off: ",(0,i.jsx)(n.code,{children:"camera.*"})," commands return ",(0,i.jsx)(n.code,{children:"CAMERA_DISABLED"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"permissions",children:"Permissions"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Android requires runtime permissions:\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CAMERA"})," for both ",(0,i.jsx)(n.code,{children:"camera.snap"})," and ",(0,i.jsx)(n.code,{children:"camera.clip"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RECORD_AUDIO"})," for ",(0,i.jsx)(n.code,{children:"camera.clip"})," when ",(0,i.jsx)(n.code,{children:"includeAudio=true"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If permissions are missing, the app will prompt when possible; if denied, ",(0,i.jsx)(n.code,{children:"camera.*"})," requests fail with a\n",(0,i.jsx)(n.code,{children:"*_PERMISSION_REQUIRED"})," error."]}),"\n",(0,i.jsx)(n.h3,{id:"foreground-requirement-1",children:"Foreground requirement"}),"\n",(0,i.jsxs)(n.p,{children:["Like ",(0,i.jsx)(n.code,{children:"canvas.*"}),", the Android node only allows ",(0,i.jsx)(n.code,{children:"camera.*"})," commands in the ",(0,i.jsx)(n.strong,{children:"foreground"}),". Background invocations return ",(0,i.jsx)(n.code,{children:"NODE_BACKGROUND_UNAVAILABLE"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"payload-guard",children:"Payload guard"}),"\n",(0,i.jsx)(n.p,{children:"Photos are recompressed to keep the base64 payload under 5 MB."}),"\n",(0,i.jsx)(n.h2,{id:"macos-app",children:"macOS app"}),"\n",(0,i.jsx)(n.h3,{id:"user-setting-default-off",children:"User setting (default off)"}),"\n",(0,i.jsx)(n.p,{children:"The macOS companion app exposes a checkbox:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Settings \u2192 General \u2192 Allow Camera"})," (",(0,i.jsx)(n.code,{children:"moltbot.cameraEnabled"}),")\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Default: ",(0,i.jsx)(n.strong,{children:"off"})]}),"\n",(0,i.jsx)(n.li,{children:"When off: camera requests return \u201cCamera disabled by user\u201d."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"cli-helper-node-invoke",children:"CLI helper (node invoke)"}),"\n",(0,i.jsxs)(n.p,{children:["Use the main ",(0,i.jsx)(n.code,{children:"moltbot"})," CLI to invoke camera commands on the macOS node."]}),"\n",(0,i.jsx)(n.p,{children:"Examples:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"moltbot nodes camera list --node <id>            # list camera ids\nmoltbot nodes camera snap --node <id>            # prints MEDIA:<path>\nmoltbot nodes camera snap --node <id> --max-width 1280\nmoltbot nodes camera snap --node <id> --delay-ms 2000\nmoltbot nodes camera snap --node <id> --device-id <id>\nmoltbot nodes camera clip --node <id> --duration 10s          # prints MEDIA:<path>\nmoltbot nodes camera clip --node <id> --duration-ms 3000      # prints MEDIA:<path> (legacy flag)\nmoltbot nodes camera clip --node <id> --device-id <id>\nmoltbot nodes camera clip --node <id> --no-audio\n"})}),"\n",(0,i.jsx)(n.p,{children:"Notes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"moltbot nodes camera snap"})," defaults to ",(0,i.jsx)(n.code,{children:"maxWidth=1600"})," unless overridden."]}),"\n",(0,i.jsxs)(n.li,{children:["On macOS, ",(0,i.jsx)(n.code,{children:"camera.snap"})," waits ",(0,i.jsx)(n.code,{children:"delayMs"})," (default 2000ms) after warm-up/exposure settle before capturing."]}),"\n",(0,i.jsx)(n.li,{children:"Photo payloads are recompressed to keep base64 under 5 MB."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"safety--practical-limits",children:"Safety + practical limits"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Camera and microphone access trigger the usual OS permission prompts (and require usage strings in Info.plist)."}),"\n",(0,i.jsxs)(n.li,{children:["Video clips are capped (currently ",(0,i.jsx)(n.code,{children:"<= 60s"}),") to avoid oversized node payloads (base64 overhead + message limits)."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"macos-screen-video-os-level",children:"macOS screen video (OS-level)"}),"\n",(0,i.jsxs)(n.p,{children:["For ",(0,i.jsx)(n.em,{children:"screen"})," video (not camera), use the macOS companion:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"moltbot nodes screen record --node <id> --duration 10s --fps 15   # prints MEDIA:<path>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Notes:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Requires macOS ",(0,i.jsx)(n.strong,{children:"Screen Recording"})," permission (TCC)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(t,{...e})}):t(e)}},28453(e,n,s){s.d(n,{R:()=>l,x:()=>o});var d=s(96540);const i={},r=d.createContext(i);function l(e){const n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);