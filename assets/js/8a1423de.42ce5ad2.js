"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[925],{94418(e,s,n){n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"reference/api-usage-costs","title":"API usage & costs","description":"This doc lists features that can invoke API keys and where their costs show up. It focuses on","source":"@site/content/moltbot/docs/reference/api-usage-costs.md","sourceDirName":"reference","slug":"/reference/api-usage-costs","permalink":"/moltbot-doc/docs/reference/api-usage-costs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Audit what can spend money, which keys are used, and how to view usage","read_when":["You want to understand which features may call paid APIs","You need to audit keys, costs, and usage visibility","You\u2019re explaining /status or /usage cost reporting"]}}');var i=n(74848),o=n(28453);const l={summary:"Audit what can spend money, which keys are used, and how to view usage",read_when:["You want to understand which features may call paid APIs","You need to audit keys, costs, and usage visibility","You\u2019re explaining /status or /usage cost reporting"]},d="API usage & costs",c={},t=[{value:"Where costs show up (chat + CLI)",id:"where-costs-show-up-chat--cli",level:2},{value:"How keys are discovered",id:"how-keys-are-discovered",level:2},{value:"Features that can spend keys",id:"features-that-can-spend-keys",level:2},{value:"1) Core model responses (chat + tools)",id:"1-core-model-responses-chat--tools",level:3},{value:"2) Media understanding (audio/image/video)",id:"2-media-understanding-audioimagevideo",level:3},{value:"3) Memory embeddings + semantic search",id:"3-memory-embeddings--semantic-search",level:3},{value:"4) Web search tool (Brave / Perplexity via OpenRouter)",id:"4-web-search-tool-brave--perplexity-via-openrouter",level:3},{value:"5) Web fetch tool (Firecrawl)",id:"5-web-fetch-tool-firecrawl",level:3},{value:"6) Provider usage snapshots (status/health)",id:"6-provider-usage-snapshots-statushealth",level:3},{value:"7) Compaction safeguard summarization",id:"7-compaction-safeguard-summarization",level:3},{value:"8) Model scan / probe",id:"8-model-scan--probe",level:3},{value:"9) Talk (speech)",id:"9-talk-speech",level:3},{value:"10) Skills (third-party APIs)",id:"10-skills-third-party-apis",level:3}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"api-usage--costs",children:"API usage & costs"})}),"\n",(0,i.jsxs)(s.p,{children:["This doc lists ",(0,i.jsx)(s.strong,{children:"features that can invoke API keys"})," and where their costs show up. It focuses on\nMoltbot features that can generate provider usage or paid API calls."]}),"\n",(0,i.jsx)(s.h2,{id:"where-costs-show-up-chat--cli",children:"Where costs show up (chat + CLI)"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Per-session cost snapshot"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"/status"})," shows the current session model, context usage, and last response tokens."]}),"\n",(0,i.jsxs)(s.li,{children:["If the model uses ",(0,i.jsx)(s.strong,{children:"API-key auth"}),", ",(0,i.jsx)(s.code,{children:"/status"})," also shows ",(0,i.jsx)(s.strong,{children:"estimated cost"})," for the last reply."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Per-message cost footer"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"/usage full"})," appends a usage footer to every reply, including ",(0,i.jsx)(s.strong,{children:"estimated cost"})," (API-key only)."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"/usage tokens"})," shows tokens only; OAuth flows hide dollar cost."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"CLI usage windows (provider quotas)"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"moltbot status --usage"})," and ",(0,i.jsx)(s.code,{children:"moltbot channels list"})," show provider ",(0,i.jsx)(s.strong,{children:"usage windows"}),"\n(quota snapshots, not per-message costs)."]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/token-use",children:"Token use & costs"})," for details and examples."]}),"\n",(0,i.jsx)(s.h2,{id:"how-keys-are-discovered",children:"How keys are discovered"}),"\n",(0,i.jsx)(s.p,{children:"Moltbot can pick up credentials from:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Auth profiles"})," (per-agent, stored in ",(0,i.jsx)(s.code,{children:"auth-profiles.json"}),")."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Environment variables"})," (e.g. ",(0,i.jsx)(s.code,{children:"OPENAI_API_KEY"}),", ",(0,i.jsx)(s.code,{children:"BRAVE_API_KEY"}),", ",(0,i.jsx)(s.code,{children:"FIRECRAWL_API_KEY"}),")."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Config"})," (",(0,i.jsx)(s.code,{children:"models.providers.*.apiKey"}),", ",(0,i.jsx)(s.code,{children:"tools.web.search.*"}),", ",(0,i.jsx)(s.code,{children:"tools.web.fetch.firecrawl.*"}),",\n",(0,i.jsx)(s.code,{children:"memorySearch.*"}),", ",(0,i.jsx)(s.code,{children:"talk.apiKey"}),")."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Skills"})," (",(0,i.jsx)(s.code,{children:"skills.entries.<name>.apiKey"}),") which may export keys to the skill process env."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"features-that-can-spend-keys",children:"Features that can spend keys"}),"\n",(0,i.jsx)(s.h3,{id:"1-core-model-responses-chat--tools",children:"1) Core model responses (chat + tools)"}),"\n",(0,i.jsxs)(s.p,{children:["Every reply or tool call uses the ",(0,i.jsx)(s.strong,{children:"current model provider"})," (OpenAI, Anthropic, etc). This is the\nprimary source of usage and cost."]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/providers/models",children:"Models"})," for pricing config and ",(0,i.jsx)(s.a,{href:"/token-use",children:"Token use & costs"})," for display."]}),"\n",(0,i.jsx)(s.h3,{id:"2-media-understanding-audioimagevideo",children:"2) Media understanding (audio/image/video)"}),"\n",(0,i.jsx)(s.p,{children:"Inbound media can be summarized/transcribed before the reply runs. This uses model/provider APIs."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Audio: OpenAI / Groq / Deepgram (now ",(0,i.jsx)(s.strong,{children:"auto-enabled"})," when keys exist)."]}),"\n",(0,i.jsx)(s.li,{children:"Image: OpenAI / Anthropic / Google."}),"\n",(0,i.jsx)(s.li,{children:"Video: Google."}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/nodes/media-understanding",children:"Media understanding"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"3-memory-embeddings--semantic-search",children:"3) Memory embeddings + semantic search"}),"\n",(0,i.jsxs)(s.p,{children:["Semantic memory search uses ",(0,i.jsx)(s.strong,{children:"embedding APIs"})," when configured for remote providers:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'memorySearch.provider = "openai"'})," \u2192 OpenAI embeddings"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'memorySearch.provider = "gemini"'})," \u2192 Gemini embeddings"]}),"\n",(0,i.jsx)(s.li,{children:"Optional fallback to OpenAI if local embeddings fail"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["You can keep it local with ",(0,i.jsx)(s.code,{children:'memorySearch.provider = "local"'})," (no API usage)."]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/concepts/memory",children:"Memory"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"4-web-search-tool-brave--perplexity-via-openrouter",children:"4) Web search tool (Brave / Perplexity via OpenRouter)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"web_search"})," uses API keys and may incur usage charges:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Brave Search API"}),": ",(0,i.jsx)(s.code,{children:"BRAVE_API_KEY"})," or ",(0,i.jsx)(s.code,{children:"tools.web.search.apiKey"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Perplexity"})," (via OpenRouter): ",(0,i.jsx)(s.code,{children:"PERPLEXITY_API_KEY"})," or ",(0,i.jsx)(s.code,{children:"OPENROUTER_API_KEY"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Brave free tier (generous):"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"2,000 requests/month"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.strong,{children:"1 request/second"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Credit card required"})," for verification (no charge unless you upgrade)"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/tools/web",children:"Web tools"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"5-web-fetch-tool-firecrawl",children:"5) Web fetch tool (Firecrawl)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"web_fetch"})," can call ",(0,i.jsx)(s.strong,{children:"Firecrawl"})," when an API key is present:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"FIRECRAWL_API_KEY"})," or ",(0,i.jsx)(s.code,{children:"tools.web.fetch.firecrawl.apiKey"})]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"If Firecrawl isn\u2019t configured, the tool falls back to direct fetch + readability (no paid API)."}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/tools/web",children:"Web tools"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"6-provider-usage-snapshots-statushealth",children:"6) Provider usage snapshots (status/health)"}),"\n",(0,i.jsxs)(s.p,{children:["Some status commands call ",(0,i.jsx)(s.strong,{children:"provider usage endpoints"})," to display quota windows or auth health.\nThese are typically low-volume calls but still hit provider APIs:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"moltbot status --usage"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"moltbot models status --json"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/cli/models",children:"Models CLI"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"7-compaction-safeguard-summarization",children:"7) Compaction safeguard summarization"}),"\n",(0,i.jsxs)(s.p,{children:["The compaction safeguard can summarize session history using the ",(0,i.jsx)(s.strong,{children:"current model"}),", which\ninvokes provider APIs when it runs."]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/reference/session-management-compaction",children:"Session management + compaction"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"8-model-scan--probe",children:"8) Model scan / probe"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"moltbot models scan"})," can probe OpenRouter models and uses ",(0,i.jsx)(s.code,{children:"OPENROUTER_API_KEY"})," when\nprobing is enabled."]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/cli/models",children:"Models CLI"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"9-talk-speech",children:"9) Talk (speech)"}),"\n",(0,i.jsxs)(s.p,{children:["Talk mode can invoke ",(0,i.jsx)(s.strong,{children:"ElevenLabs"})," when configured:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"ELEVENLABS_API_KEY"})," or ",(0,i.jsx)(s.code,{children:"talk.apiKey"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/nodes/talk",children:"Talk mode"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"10-skills-third-party-apis",children:"10) Skills (third-party APIs)"}),"\n",(0,i.jsxs)(s.p,{children:["Skills can store ",(0,i.jsx)(s.code,{children:"apiKey"})," in ",(0,i.jsx)(s.code,{children:"skills.entries.<name>.apiKey"}),". If a skill uses that key for external\nAPIs, it can incur costs according to the skill\u2019s provider."]}),"\n",(0,i.jsxs)(s.p,{children:["See ",(0,i.jsx)(s.a,{href:"/tools/skills",children:"Skills"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},28453(e,s,n){n.d(s,{R:()=>l,x:()=>d});var r=n(96540);const i={},o=r.createContext(i);function l(e){const s=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(o.Provider,{value:s},e.children)}}}]);