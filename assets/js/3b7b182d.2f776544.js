"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[8318],{69466(e,n,l){l.r(n),l.d(n,{assets:()=>r,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"channels/nextcloud-talk","title":"Nextcloud Talk (plugin)","description":"Status: supported via plugin (webhook bot). Direct messages, rooms, reactions, and markdown messages are supported.","source":"@site/content/moltbot/docs/channels/nextcloud-talk.md","sourceDirName":"channels","slug":"/channels/nextcloud-talk","permalink":"/moltbot-doc/docs/channels/nextcloud-talk","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Nextcloud Talk support status, capabilities, and configuration","read_when":["Working on Nextcloud Talk channel features"]}}');var o=l(74848),i=l(28453);const c={summary:"Nextcloud Talk support status, capabilities, and configuration",read_when:["Working on Nextcloud Talk channel features"]},t="Nextcloud Talk (plugin)",r={},d=[{value:"Plugin required",id:"plugin-required",level:2},{value:"Quick setup (beginner)",id:"quick-setup-beginner",level:2},{value:"Notes",id:"notes",level:2},{value:"Access control (DMs)",id:"access-control-dms",level:2},{value:"Rooms (groups)",id:"rooms-groups",level:2},{value:"Capabilities",id:"capabilities",level:2},{value:"Configuration reference (Nextcloud Talk)",id:"configuration-reference-nextcloud-talk",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"nextcloud-talk-plugin",children:"Nextcloud Talk (plugin)"})}),"\n",(0,o.jsx)(n.p,{children:"Status: supported via plugin (webhook bot). Direct messages, rooms, reactions, and markdown messages are supported."}),"\n",(0,o.jsx)(n.h2,{id:"plugin-required",children:"Plugin required"}),"\n",(0,o.jsx)(n.p,{children:"Nextcloud Talk ships as a plugin and is not bundled with the core install."}),"\n",(0,o.jsx)(n.p,{children:"Install via CLI (npm registry):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"moltbot plugins install @moltbot/nextcloud-talk\n"})}),"\n",(0,o.jsx)(n.p,{children:"Local checkout (when running from a git repo):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"moltbot plugins install ./extensions/nextcloud-talk\n"})}),"\n",(0,o.jsx)(n.p,{children:"If you choose Nextcloud Talk during configure/onboarding and a git checkout is detected,\nMoltbot will offer the local install path automatically."}),"\n",(0,o.jsxs)(n.p,{children:["Details: ",(0,o.jsx)(n.a,{href:"/plugin",children:"Plugins"})]}),"\n",(0,o.jsx)(n.h2,{id:"quick-setup-beginner",children:"Quick setup (beginner)"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Install the Nextcloud Talk plugin."}),"\n",(0,o.jsxs)(n.li,{children:["On your Nextcloud server, create a bot:\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'./occ talk:bot:install "Moltbot" "<shared-secret>" "<webhook-url>" --feature reaction\n'})}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"Enable the bot in the target room settings."}),"\n",(0,o.jsxs)(n.li,{children:["Configure Moltbot:\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Config: ",(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.baseUrl"})," + ",(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.botSecret"})]}),"\n",(0,o.jsxs)(n.li,{children:["Or env: ",(0,o.jsx)(n.code,{children:"NEXTCLOUD_TALK_BOT_SECRET"})," (default account only)"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"Restart the gateway (or finish onboarding)."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Minimal config:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    "nextcloud-talk": {\n      enabled: true,\n      baseUrl: "https://cloud.example.com",\n      botSecret: "shared-secret",\n      dmPolicy: "pairing"\n    }\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Bots cannot initiate DMs. The user must message the bot first."}),"\n",(0,o.jsxs)(n.li,{children:["Webhook URL must be reachable by the Gateway; set ",(0,o.jsx)(n.code,{children:"webhookPublicUrl"})," if behind a proxy."]}),"\n",(0,o.jsx)(n.li,{children:"Media uploads are not supported by the bot API; media is sent as URLs."}),"\n",(0,o.jsxs)(n.li,{children:["The webhook payload does not distinguish DMs vs rooms; set ",(0,o.jsx)(n.code,{children:"apiUser"})," + ",(0,o.jsx)(n.code,{children:"apiPassword"})," to enable room-type lookups (otherwise DMs are treated as rooms)."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"access-control-dms",children:"Access control (DMs)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Default: ",(0,o.jsx)(n.code,{children:'channels.nextcloud-talk.dmPolicy = "pairing"'}),". Unknown senders get a pairing code."]}),"\n",(0,o.jsxs)(n.li,{children:["Approve via:\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"moltbot pairing list nextcloud-talk"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"moltbot pairing approve nextcloud-talk <CODE>"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Public DMs: ",(0,o.jsx)(n.code,{children:'channels.nextcloud-talk.dmPolicy="open"'})," plus ",(0,o.jsx)(n.code,{children:'channels.nextcloud-talk.allowFrom=["*"]'}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"rooms-groups",children:"Rooms (groups)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Default: ",(0,o.jsx)(n.code,{children:'channels.nextcloud-talk.groupPolicy = "allowlist"'})," (mention-gated)."]}),"\n",(0,o.jsxs)(n.li,{children:["Allowlist rooms with ",(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.rooms"}),":"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    "nextcloud-talk": {\n      rooms: {\n        "room-token": { requireMention: true }\n      }\n    }\n  }\n}\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["To allow no rooms, keep the allowlist empty or set ",(0,o.jsx)(n.code,{children:'channels.nextcloud-talk.groupPolicy="disabled"'}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"capabilities",children:"Capabilities"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Feature"}),(0,o.jsx)(n.th,{children:"Status"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Direct messages"}),(0,o.jsx)(n.td,{children:"Supported"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Rooms"}),(0,o.jsx)(n.td,{children:"Supported"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Threads"}),(0,o.jsx)(n.td,{children:"Not supported"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Media"}),(0,o.jsx)(n.td,{children:"URL-only"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Reactions"}),(0,o.jsx)(n.td,{children:"Supported"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Native commands"}),(0,o.jsx)(n.td,{children:"Not supported"})]})]})]}),"\n",(0,o.jsx)(n.h2,{id:"configuration-reference-nextcloud-talk",children:"Configuration reference (Nextcloud Talk)"}),"\n",(0,o.jsxs)(n.p,{children:["Full configuration: ",(0,o.jsx)(n.a,{href:"/gateway/configuration",children:"Configuration"})]}),"\n",(0,o.jsx)(n.p,{children:"Provider options:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.enabled"}),": enable/disable channel startup."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.baseUrl"}),": Nextcloud instance URL."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.botSecret"}),": bot shared secret."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.botSecretFile"}),": secret file path."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.apiUser"}),": API user for room lookups (DM detection)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.apiPassword"}),": API/app password for room lookups."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.apiPasswordFile"}),": API password file path."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.webhookPort"}),": webhook listener port (default: 8788)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.webhookHost"}),": webhook host (default: 0.0.0.0)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.webhookPath"}),": webhook path (default: /nextcloud-talk-webhook)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.webhookPublicUrl"}),": externally reachable webhook URL."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.dmPolicy"}),": ",(0,o.jsx)(n.code,{children:"pairing | allowlist | open | disabled"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.allowFrom"}),": DM allowlist (user IDs). ",(0,o.jsx)(n.code,{children:"open"})," requires ",(0,o.jsx)(n.code,{children:'"*"'}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.groupPolicy"}),": ",(0,o.jsx)(n.code,{children:"allowlist | open | disabled"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.groupAllowFrom"}),": group allowlist (user IDs)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.rooms"}),": per-room settings and allowlist."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.historyLimit"}),": group history limit (0 disables)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.dmHistoryLimit"}),": DM history limit (0 disables)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.dms"}),": per-DM overrides (historyLimit)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.textChunkLimit"}),": outbound text chunk size (chars)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.chunkMode"}),": ",(0,o.jsx)(n.code,{children:"length"})," (default) or ",(0,o.jsx)(n.code,{children:"newline"})," to split on blank lines (paragraph boundaries) before length chunking."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.blockStreaming"}),": disable block streaming for this channel."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.blockStreamingCoalesce"}),": block streaming coalesce tuning."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"channels.nextcloud-talk.mediaMaxMb"}),": inbound media cap (MB)."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453(e,n,l){l.d(n,{R:()=>c,x:()=>t});var s=l(96540);const o={},i=s.createContext(o);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);