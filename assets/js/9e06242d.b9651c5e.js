"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[6615],{77508(e,n,l){l.r(n),l.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"gateway/multiple-gateways","title":"\u591a\u7f51\u5173\uff08\u540c\u4e00\u4e3b\u673a\uff09","description":"\u5927\u591a\u6570\u8bbe\u7f6e\u5e94\u4f7f\u7528\u4e00\u4e2a\u7f51\u5173\uff0c\u56e0\u4e3a\u5355\u4e2a\u7f51\u5173\u53ef\u4ee5\u5904\u7406\u591a\u4e2a\u6d88\u606f\u8fde\u63a5\u548c\u4ee3\u7406\u3002\u5982\u679c\u60a8\u9700\u8981\u66f4\u5f3a\u7684\u9694\u79bb\u6216\u5197\u4f59\uff08\u4f8b\u5982\uff0c\u6551\u63f4\u673a\u5668\u4eba\uff09\uff0c\u8bf7\u8fd0\u884c\u5177\u6709\u9694\u79bb\u914d\u7f6e\u6587\u4ef6/\u7aef\u53e3\u7684\u5355\u72ec\u7f51\u5173\u3002","source":"@site/content/moltbot/docs/gateway/multiple-gateways.md","sourceDirName":"gateway","slug":"/gateway/multiple-gateways","permalink":"/moltbot-doc/docs/gateway/multiple-gateways","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"\u5728\u540c\u4e00\u4e3b\u673a\u4e0a\u8fd0\u884c\u591a\u4e2a Moltbot \u7f51\u5173\uff08\u9694\u79bb\u3001\u7aef\u53e3\u548c\u914d\u7f6e\u6587\u4ef6\uff09","read_when":["\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\u591a\u4e2a\u7f51\u5173","\u60a8\u9700\u8981\u6bcf\u4e2a\u7f51\u5173\u7684\u9694\u79bb\u914d\u7f6e/\u72b6\u6001/\u7aef\u53e3"]}}');var r=l(74848),o=l(28453);const c={summary:"\u5728\u540c\u4e00\u4e3b\u673a\u4e0a\u8fd0\u884c\u591a\u4e2a Moltbot \u7f51\u5173\uff08\u9694\u79bb\u3001\u7aef\u53e3\u548c\u914d\u7f6e\u6587\u4ef6\uff09",read_when:["\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\u8fd0\u884c\u591a\u4e2a\u7f51\u5173","\u60a8\u9700\u8981\u6bcf\u4e2a\u7f51\u5173\u7684\u9694\u79bb\u914d\u7f6e/\u72b6\u6001/\u7aef\u53e3"]},i="\u591a\u7f51\u5173\uff08\u540c\u4e00\u4e3b\u673a\uff09",t={},d=[{value:"\u9694\u79bb\u6e05\u5355\uff08\u5fc5\u9700\uff09",id:"\u9694\u79bb\u6e05\u5355\u5fc5\u9700",level:2},{value:"\u63a8\u8350\uff1a\u914d\u7f6e\u6587\u4ef6\uff08<code>--profile</code>\uff09",id:"\u63a8\u8350\u914d\u7f6e\u6587\u4ef6--profile",level:2},{value:"\u6551\u63f4\u673a\u5668\u4eba\u6307\u5357",id:"\u6551\u63f4\u673a\u5668\u4eba\u6307\u5357",level:2},{value:"\u5982\u4f55\u5b89\u88c5\uff08\u6551\u63f4\u673a\u5668\u4eba\uff09",id:"\u5982\u4f55\u5b89\u88c5\u6551\u63f4\u673a\u5668\u4eba",level:3},{value:"\u7aef\u53e3\u6620\u5c04\uff08\u6d3e\u751f\uff09",id:"\u7aef\u53e3\u6620\u5c04\u6d3e\u751f",level:2},{value:"\u6d4f\u89c8\u5668/CDP \u6ce8\u610f\u4e8b\u9879\uff08\u5e38\u89c1\u9677\u9631\uff09",id:"\u6d4f\u89c8\u5668cdp-\u6ce8\u610f\u4e8b\u9879\u5e38\u89c1\u9677\u9631",level:2},{value:"\u624b\u52a8\u73af\u5883\u793a\u4f8b",id:"\u624b\u52a8\u73af\u5883\u793a\u4f8b",level:2},{value:"\u5feb\u901f\u68c0\u67e5",id:"\u5feb\u901f\u68c0\u67e5",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u591a\u7f51\u5173\u540c\u4e00\u4e3b\u673a",children:"\u591a\u7f51\u5173\uff08\u540c\u4e00\u4e3b\u673a\uff09"})}),"\n",(0,r.jsx)(n.p,{children:"\u5927\u591a\u6570\u8bbe\u7f6e\u5e94\u4f7f\u7528\u4e00\u4e2a\u7f51\u5173\uff0c\u56e0\u4e3a\u5355\u4e2a\u7f51\u5173\u53ef\u4ee5\u5904\u7406\u591a\u4e2a\u6d88\u606f\u8fde\u63a5\u548c\u4ee3\u7406\u3002\u5982\u679c\u60a8\u9700\u8981\u66f4\u5f3a\u7684\u9694\u79bb\u6216\u5197\u4f59\uff08\u4f8b\u5982\uff0c\u6551\u63f4\u673a\u5668\u4eba\uff09\uff0c\u8bf7\u8fd0\u884c\u5177\u6709\u9694\u79bb\u914d\u7f6e\u6587\u4ef6/\u7aef\u53e3\u7684\u5355\u72ec\u7f51\u5173\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u9694\u79bb\u6e05\u5355\u5fc5\u9700",children:"\u9694\u79bb\u6e05\u5355\uff08\u5fc5\u9700\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CLAWDBOT_CONFIG_PATH"})," \u2014 \u6bcf\u5b9e\u4f8b\u914d\u7f6e\u6587\u4ef6"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CLAWDBOT_STATE_DIR"})," \u2014 \u6bcf\u5b9e\u4f8b\u4f1a\u8bdd\u3001\u51ed\u636e\u3001\u7f13\u5b58"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agents.defaults.workspace"})," \u2014 \u6bcf\u5b9e\u4f8b\u5de5\u4f5c\u533a\u6839\u76ee\u5f55"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gateway.port"}),"\uff08\u6216 ",(0,r.jsx)(n.code,{children:"--port"}),"\uff09\u2014 \u6bcf\u5b9e\u4f8b\u552f\u4e00"]}),"\n",(0,r.jsx)(n.li,{children:"\u6d3e\u751f\u7aef\u53e3\uff08\u6d4f\u89c8\u5668/\u753b\u5e03\uff09\u4e0d\u5f97\u91cd\u53e0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u8fd9\u4e9b\u662f\u5171\u4eab\u7684\uff0c\u60a8\u5c06\u9047\u5230\u914d\u7f6e\u7ade\u4e89\u548c\u7aef\u53e3\u51b2\u7a81\u3002"}),"\n",(0,r.jsxs)(n.h2,{id:"\u63a8\u8350\u914d\u7f6e\u6587\u4ef6--profile",children:["\u63a8\u8350\uff1a\u914d\u7f6e\u6587\u4ef6\uff08",(0,r.jsx)(n.code,{children:"--profile"}),"\uff09"]}),"\n",(0,r.jsxs)(n.p,{children:["\u914d\u7f6e\u6587\u4ef6\u81ea\u52a8\u9650\u5b9a ",(0,r.jsx)(n.code,{children:"CLAWDBOT_STATE_DIR"})," + ",(0,r.jsx)(n.code,{children:"CLAWDBOT_CONFIG_PATH"})," \u5e76\u4e3a\u670d\u52a1\u540d\u79f0\u6dfb\u52a0\u540e\u7f00\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# main\nmoltbot --profile main setup\nmoltbot --profile main gateway --port 18789\n\n# rescue\nmoltbot --profile rescue setup\nmoltbot --profile rescue gateway --port 19001\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6bcf\u914d\u7f6e\u6587\u4ef6\u670d\u52a1\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"moltbot --profile main gateway install\nmoltbot --profile rescue gateway install\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6551\u63f4\u673a\u5668\u4eba\u6307\u5357",children:"\u6551\u63f4\u673a\u5668\u4eba\u6307\u5357"}),"\n",(0,r.jsx)(n.p,{children:"\u5728\u540c\u4e00\u4e3b\u673a\u4e0a\u8fd0\u884c\u7b2c\u4e8c\u4e2a\u5177\u6709\u81ea\u5df1\u7684\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u914d\u7f6e\u6587\u4ef6/\u914d\u7f6e"}),"\n",(0,r.jsx)(n.li,{children:"\u72b6\u6001\u76ee\u5f55"}),"\n",(0,r.jsx)(n.li,{children:"\u5de5\u4f5c\u533a"}),"\n",(0,r.jsx)(n.li,{children:"\u57fa\u7840\u7aef\u53e3\uff08\u52a0\u4e0a\u6d3e\u751f\u7aef\u53e3\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd9\u4f7f\u6551\u63f4\u673a\u5668\u4eba\u4e0e\u4e3b\u673a\u5668\u4eba\u9694\u79bb\uff0c\u56e0\u6b64\u5982\u679c\u4e3b\u673a\u5668\u4eba\u5b95\u673a\uff0c\u5b83\u53ef\u4ee5\u8c03\u8bd5\u6216\u5e94\u7528\u914d\u7f6e\u66f4\u6539\u3002"}),"\n",(0,r.jsx)(n.p,{children:"\u7aef\u53e3\u95f4\u8ddd\uff1a\u5728\u57fa\u7840\u7aef\u53e3\u4e4b\u95f4\u81f3\u5c11\u7559\u51fa 20 \u4e2a\u7aef\u53e3\uff0c\u4ee5\u4fbf\u6d3e\u751f\u7684\u6d4f\u89c8\u5668/\u753b\u5e03/CDP \u7aef\u53e3\u6c38\u8fdc\u4e0d\u4f1a\u51b2\u7a81\u3002"}),"\n",(0,r.jsx)(n.h3,{id:"\u5982\u4f55\u5b89\u88c5\u6551\u63f4\u673a\u5668\u4eba",children:"\u5982\u4f55\u5b89\u88c5\uff08\u6551\u63f4\u673a\u5668\u4eba\uff09"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u4e3b\u673a\u5668\u4eba\uff08\u73b0\u6709\u6216\u5168\u65b0\uff0c\u4e0d\u5e26 --profile \u53c2\u6570\uff09\n# \u5728\u7aef\u53e3 18789 + Chrome CDC/Canvas/... \u7aef\u53e3\u4e0a\u8fd0\u884c\nmoltbot onboard\nmoltbot gateway install\n\n# \u6551\u63f4\u673a\u5668\u4eba\uff08\u9694\u79bb\u914d\u7f6e\u6587\u4ef6 + \u7aef\u53e3\uff09\nmoltbot --profile rescue onboard\n# \u6ce8\u610f\uff1a\n# - \u5de5\u4f5c\u533a\u540d\u79f0\u9ed8\u8ba4\u5c06\u4ee5 -rescue \u4e3a\u540e\u7f00\n# - \u7aef\u53e3\u5e94\u81f3\u5c11\u4e3a 18789 + 20 \u7aef\u53e3\uff0c\n#   \u6700\u597d\u9009\u62e9\u5b8c\u5168\u4e0d\u540c\u7684\u57fa\u7840\u7aef\u53e3\uff0c\u5982 19789\uff0c\n# - \u5176\u4f59\u5165\u95e8\u8fc7\u7a0b\u4e0e\u6b63\u5e38\u60c5\u51b5\u76f8\u540c\n\n# \u5b89\u88c5\u670d\u52a1\uff08\u5982\u679c\u5728\u5165\u95e8\u671f\u95f4\u672a\u81ea\u52a8\u5b8c\u6210\uff09\nmoltbot --profile rescue gateway install\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u7aef\u53e3\u6620\u5c04\u6d3e\u751f",children:"\u7aef\u53e3\u6620\u5c04\uff08\u6d3e\u751f\uff09"}),"\n",(0,r.jsxs)(n.p,{children:["\u57fa\u7840\u7aef\u53e3 = ",(0,r.jsx)(n.code,{children:"gateway.port"}),"\uff08\u6216 ",(0,r.jsx)(n.code,{children:"CLAWDBOT_GATEWAY_PORT"})," / ",(0,r.jsx)(n.code,{children:"--port"}),"\uff09\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u6d4f\u89c8\u5668\u63a7\u5236\u670d\u52a1\u7aef\u53e3 = \u57fa\u7840 + 2\uff08\u4ec5\u73af\u56de\uff09"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"canvasHost.port = base + 4"})}),"\n",(0,r.jsxs)(n.li,{children:["\u6d4f\u89c8\u5668\u914d\u7f6e\u6587\u4ef6 CDP \u7aef\u53e3\u4ece ",(0,r.jsx)(n.code,{children:"browser.controlPort + 9 .. + 108"})," \u81ea\u52a8\u5206\u914d"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u60a8\u5728\u914d\u7f6e\u6216\u73af\u5883\u4e2d\u8986\u76d6\u5176\u4e2d\u4efb\u4f55\u4e00\u4e2a\uff0c\u60a8\u5fc5\u987b\u4fdd\u6301\u6bcf\u4e2a\u5b9e\u4f8b\u7684\u552f\u4e00\u6027\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u6d4f\u89c8\u5668cdp-\u6ce8\u610f\u4e8b\u9879\u5e38\u89c1\u9677\u9631",children:"\u6d4f\u89c8\u5668/CDP \u6ce8\u610f\u4e8b\u9879\uff08\u5e38\u89c1\u9677\u9631\uff09"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4e0d\u8981"})," \u5c06 ",(0,r.jsx)(n.code,{children:"browser.cdpUrl"})," \u56fa\u5b9a\u5230\u591a\u4e2a\u5b9e\u4f8b\u4e0a\u7684\u76f8\u540c\u503c\u3002"]}),"\n",(0,r.jsx)(n.li,{children:"\u6bcf\u4e2a\u5b9e\u4f8b\u9700\u8981\u81ea\u5df1\u7684\u6d4f\u89c8\u5668\u63a7\u5236\u7aef\u53e3\u548c CDP \u8303\u56f4\uff08\u4ece\u5176\u7f51\u5173\u7aef\u53e3\u6d3e\u751f\uff09\u3002"}),"\n",(0,r.jsxs)(n.li,{children:["\u5982\u679c\u60a8\u9700\u8981\u663e\u5f0f CDP \u7aef\u53e3\uff0c\u8bf7\u4e3a\u6bcf\u4e2a\u5b9e\u4f8b\u8bbe\u7f6e ",(0,r.jsx)(n.code,{children:"browser.profiles.<name>.cdpPort"}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u8fdc\u7a0b Chrome\uff1a\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"browser.profiles.<name>.cdpUrl"}),"\uff08\u6bcf\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\uff09\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u624b\u52a8\u73af\u5883\u793a\u4f8b",children:"\u624b\u52a8\u73af\u5883\u793a\u4f8b"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"CLAWDBOT_CONFIG_PATH=~/.clawdbot/main.json \\\nCLAWDBOT_STATE_DIR=~/.clawdbot-main \\\nmoltbot gateway --port 18789\n\nCLAWDBOT_CONFIG_PATH=~/.clawdbot/rescue.json \\\nCLAWDBOT_STATE_DIR=~/.clawdbot-rescue \\\nmoltbot gateway --port 19001\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5feb\u901f\u68c0\u67e5",children:"\u5feb\u901f\u68c0\u67e5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"moltbot --profile main status\nmoltbot --profile rescue status\nmoltbot --profile rescue browser status\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453(e,n,l){l.d(n,{R:()=>c,x:()=>i});var s=l(96540);const r={},o=s.createContext(r);function c(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);