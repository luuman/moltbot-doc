"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[3422],{68587(e,s,n){n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>a,default:()=>g,frontMatter:()=>i,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"diagnostics/flags","title":"Diagnostics Flags","description":"Diagnostics flags let you enable targeted debug logs without turning on verbose logging everywhere. Flags are opt-in and have no effect unless a subsystem checks them.","source":"@site/content/moltbot/docs/diagnostics/flags.md","sourceDirName":"diagnostics","slug":"/diagnostics/flags","permalink":"/moltbot-doc/docs/diagnostics/flags","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Diagnostics flags for targeted debug logs","read_when":["You need targeted debug logs without raising global logging levels","You need to capture subsystem-specific logs for support"]}}');var o=n(74848),t=n(28453);const i={summary:"Diagnostics flags for targeted debug logs",read_when:["You need targeted debug logs without raising global logging levels","You need to capture subsystem-specific logs for support"]},a="Diagnostics Flags",r={},c=[{value:"How it works",id:"how-it-works",level:2},{value:"Enable via config",id:"enable-via-config",level:2},{value:"Env override (one-off)",id:"env-override-one-off",level:2},{value:"Where logs go",id:"where-logs-go",level:2},{value:"Extract logs",id:"extract-logs",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.header,{children:(0,o.jsx)(s.h1,{id:"diagnostics-flags",children:"Diagnostics Flags"})}),"\n",(0,o.jsx)(s.p,{children:"Diagnostics flags let you enable targeted debug logs without turning on verbose logging everywhere. Flags are opt-in and have no effect unless a subsystem checks them."}),"\n",(0,o.jsx)(s.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"Flags are strings (case-insensitive)."}),"\n",(0,o.jsx)(s.li,{children:"You can enable flags in config or via an env override."}),"\n",(0,o.jsxs)(s.li,{children:["Wildcards are supported:\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"telegram.*"})," matches ",(0,o.jsx)(s.code,{children:"telegram.http"})]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"*"})," enables all flags"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"enable-via-config",children:"Enable via config"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-json",children:'{\n  "diagnostics": {\n    "flags": ["telegram.http"]\n  }\n}\n'})}),"\n",(0,o.jsx)(s.p,{children:"Multiple flags:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-json",children:'{\n  "diagnostics": {\n    "flags": ["telegram.http", "gateway.*"]\n  }\n}\n'})}),"\n",(0,o.jsx)(s.p,{children:"Restart the gateway after changing flags."}),"\n",(0,o.jsx)(s.h2,{id:"env-override-one-off",children:"Env override (one-off)"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"CLAWDBOT_DIAGNOSTICS=telegram.http,telegram.payload\n"})}),"\n",(0,o.jsx)(s.p,{children:"Disable all flags:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"CLAWDBOT_DIAGNOSTICS=0\n"})}),"\n",(0,o.jsx)(s.h2,{id:"where-logs-go",children:"Where logs go"}),"\n",(0,o.jsx)(s.p,{children:"Flags emit logs into the standard diagnostics log file. By default:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"/tmp/moltbot/moltbot-YYYY-MM-DD.log\n"})}),"\n",(0,o.jsxs)(s.p,{children:["If you set ",(0,o.jsx)(s.code,{children:"logging.file"}),", use that path instead. Logs are JSONL (one JSON object per line). Redaction still applies based on ",(0,o.jsx)(s.code,{children:"logging.redactSensitive"}),"."]}),"\n",(0,o.jsx)(s.h2,{id:"extract-logs",children:"Extract logs"}),"\n",(0,o.jsx)(s.p,{children:"Pick the latest log file:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:"ls -t /tmp/moltbot/moltbot-*.log | head -n 1\n"})}),"\n",(0,o.jsx)(s.p,{children:"Filter for Telegram HTTP diagnostics:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:'rg "telegram http error" /tmp/moltbot/moltbot-*.log\n'})}),"\n",(0,o.jsx)(s.p,{children:"Or tail while reproducing:"}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-bash",children:'tail -f /tmp/moltbot/moltbot-$(date +%F).log | rg "telegram http error"\n'})}),"\n",(0,o.jsxs)(s.p,{children:["For remote gateways, you can also use ",(0,o.jsx)(s.code,{children:"moltbot logs --follow"})," (see ",(0,o.jsx)(s.a,{href:"/cli/logs",children:"/cli/logs"}),")."]}),"\n",(0,o.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:["If ",(0,o.jsx)(s.code,{children:"logging.level"})," is set higher than ",(0,o.jsx)(s.code,{children:"warn"}),", these logs may be suppressed. Default ",(0,o.jsx)(s.code,{children:"info"})," is fine."]}),"\n",(0,o.jsx)(s.li,{children:"Flags are safe to leave enabled; they only affect log volume for the specific subsystem."}),"\n",(0,o.jsxs)(s.li,{children:["Use ",(0,o.jsx)(s.a,{href:"/logging",children:"/logging"})," to change log destinations, levels, and redaction."]}),"\n"]})]})}function g(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453(e,s,n){n.d(s,{R:()=>i,x:()=>a});var l=n(96540);const o={},t=l.createContext(o);function i(e){const s=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),l.createElement(t.Provider,{value:s},e.children)}}}]);