"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[2647],{38209(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"nodes/index","title":"Nodes","description":"A node is a companion device (macOS/iOS/Android/headless) that connects to the Gateway WebSocket (same port as operators) with role Gateway protocol.","source":"@site/content/moltbot/docs/nodes/index.md","sourceDirName":"nodes","slug":"/nodes/","permalink":"/moltbot-doc/docs/nodes/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Nodes: pairing, capabilities, permissions, and CLI helpers for canvas/camera/screen/system","read_when":["Pairing iOS/Android nodes to a gateway","Using node canvas/camera for agent context","Adding new node commands or CLI helpers"]}}');var d=s(74848),r=s(28453);const a={summary:"Nodes: pairing, capabilities, permissions, and CLI helpers for canvas/camera/screen/system",read_when:["Pairing iOS/Android nodes to a gateway","Using node canvas/camera for agent context","Adding new node commands or CLI helpers"]},i="Nodes",c={},l=[{value:"Pairing + status",id:"pairing--status",level:2},{value:"Remote node host (system.run)",id:"remote-node-host-systemrun",level:2},{value:"What runs where",id:"what-runs-where",level:3},{value:"Start a node host (foreground)",id:"start-a-node-host-foreground",level:3},{value:"Start a node host (service)",id:"start-a-node-host-service",level:3},{value:"Pair + name",id:"pair--name",level:3},{value:"Allowlist the commands",id:"allowlist-the-commands",level:3},{value:"Point exec at the node",id:"point-exec-at-the-node",level:3},{value:"Invoking commands",id:"invoking-commands",level:2},{value:"Screenshots (canvas snapshots)",id:"screenshots-canvas-snapshots",level:2},{value:"Canvas controls",id:"canvas-controls",level:3},{value:"A2UI (Canvas)",id:"a2ui-canvas",level:3},{value:"Photos + videos (node camera)",id:"photos--videos-node-camera",level:2},{value:"Screen recordings (nodes)",id:"screen-recordings-nodes",level:2},{value:"Location (nodes)",id:"location-nodes",level:2},{value:"SMS (Android nodes)",id:"sms-android-nodes",level:2},{value:"System commands (node host / mac node)",id:"system-commands-node-host--mac-node",level:2},{value:"Exec node binding",id:"exec-node-binding",level:2},{value:"Permissions map",id:"permissions-map",level:2},{value:"Headless node host (cross-platform)",id:"headless-node-host-cross-platform",level:2},{value:"Mac node mode",id:"mac-node-mode",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"nodes",children:"Nodes"})}),"\n",(0,d.jsxs)(n.p,{children:["A ",(0,d.jsx)(n.strong,{children:"node"})," is a companion device (macOS/iOS/Android/headless) that connects to the Gateway ",(0,d.jsx)(n.strong,{children:"WebSocket"})," (same port as operators) with ",(0,d.jsx)(n.code,{children:'role: "node"'})," and exposes a command surface (e.g. ",(0,d.jsx)(n.code,{children:"canvas.*"}),", ",(0,d.jsx)(n.code,{children:"camera.*"}),", ",(0,d.jsx)(n.code,{children:"system.*"}),") via ",(0,d.jsx)(n.code,{children:"node.invoke"}),". Protocol details: ",(0,d.jsx)(n.a,{href:"/gateway/protocol",children:"Gateway protocol"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["Legacy transport: ",(0,d.jsx)(n.a,{href:"/gateway/bridge-protocol",children:"Bridge protocol"})," (TCP JSONL; deprecated/removed for current nodes)."]}),"\n",(0,d.jsxs)(n.p,{children:["macOS can also run in ",(0,d.jsx)(n.strong,{children:"node mode"}),": the menubar app connects to the Gateway\u2019s WS server and exposes its local canvas/camera commands as a node (so ",(0,d.jsx)(n.code,{children:"moltbot nodes \u2026"})," works against this Mac)."]}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Nodes are ",(0,d.jsx)(n.strong,{children:"peripherals"}),", not gateways. They don\u2019t run the gateway service."]}),"\n",(0,d.jsxs)(n.li,{children:["Telegram/WhatsApp/etc. messages land on the ",(0,d.jsx)(n.strong,{children:"gateway"}),", not on nodes."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"pairing--status",children:"Pairing + status"}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.strong,{children:"WS nodes use device pairing."})," Nodes present a device identity during ",(0,d.jsx)(n.code,{children:"connect"}),"; the Gateway\ncreates a device pairing request for ",(0,d.jsx)(n.code,{children:"role: node"}),". Approve via the devices CLI (or UI)."]}),"\n",(0,d.jsx)(n.p,{children:"Quick CLI:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot devices list\nmoltbot devices approve <requestId>\nmoltbot devices reject <requestId>\nmoltbot nodes status\nmoltbot nodes describe --node <idOrNameOrIp>\n"})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"nodes status"})," marks a node as ",(0,d.jsx)(n.strong,{children:"paired"})," when its device pairing role includes ",(0,d.jsx)(n.code,{children:"node"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"node.pair.*"})," (CLI: ",(0,d.jsx)(n.code,{children:"moltbot nodes pending/approve/reject"}),") is a separate gateway-owned\nnode pairing store; it does ",(0,d.jsx)(n.strong,{children:"not"})," gate the WS ",(0,d.jsx)(n.code,{children:"connect"})," handshake."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"remote-node-host-systemrun",children:"Remote node host (system.run)"}),"\n",(0,d.jsxs)(n.p,{children:["Use a ",(0,d.jsx)(n.strong,{children:"node host"})," when your Gateway runs on one machine and you want commands\nto execute on another. The model still talks to the ",(0,d.jsx)(n.strong,{children:"gateway"}),"; the gateway\nforwards ",(0,d.jsx)(n.code,{children:"exec"})," calls to the ",(0,d.jsx)(n.strong,{children:"node host"})," when ",(0,d.jsx)(n.code,{children:"host=node"})," is selected."]}),"\n",(0,d.jsx)(n.h3,{id:"what-runs-where",children:"What runs where"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Gateway host"}),": receives messages, runs the model, routes tool calls."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Node host"}),": executes ",(0,d.jsx)(n.code,{children:"system.run"}),"/",(0,d.jsx)(n.code,{children:"system.which"})," on the node machine."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.strong,{children:"Approvals"}),": enforced on the node host via ",(0,d.jsx)(n.code,{children:"~/.clawdbot/exec-approvals.json"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"start-a-node-host-foreground",children:"Start a node host (foreground)"}),"\n",(0,d.jsx)(n.p,{children:"On the node machine:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot node run --host <gateway-host> --port 18789 --display-name "Build Node"\n'})}),"\n",(0,d.jsx)(n.h3,{id:"start-a-node-host-service",children:"Start a node host (service)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot node install --host <gateway-host> --port 18789 --display-name "Build Node"\nmoltbot node restart\n'})}),"\n",(0,d.jsx)(n.h3,{id:"pair--name",children:"Pair + name"}),"\n",(0,d.jsx)(n.p,{children:"On the gateway host:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot nodes pending\nmoltbot nodes approve <requestId>\nmoltbot nodes list\n"})}),"\n",(0,d.jsx)(n.p,{children:"Naming options:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"--display-name"})," on ",(0,d.jsx)(n.code,{children:"moltbot node run"})," / ",(0,d.jsx)(n.code,{children:"moltbot node install"})," (persists in ",(0,d.jsx)(n.code,{children:"~/.clawdbot/node.json"})," on the node)."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:'moltbot nodes rename --node <id|name|ip> --name "Build Node"'})," (gateway override)."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"allowlist-the-commands",children:"Allowlist the commands"}),"\n",(0,d.jsxs)(n.p,{children:["Exec approvals are ",(0,d.jsx)(n.strong,{children:"per node host"}),". Add allowlist entries from the gateway:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot approvals allowlist add --node <id|name|ip> "/usr/bin/uname"\nmoltbot approvals allowlist add --node <id|name|ip> "/usr/bin/sw_vers"\n'})}),"\n",(0,d.jsxs)(n.p,{children:["Approvals live on the node host at ",(0,d.jsx)(n.code,{children:"~/.clawdbot/exec-approvals.json"}),"."]}),"\n",(0,d.jsx)(n.h3,{id:"point-exec-at-the-node",children:"Point exec at the node"}),"\n",(0,d.jsx)(n.p,{children:"Configure defaults (gateway config):"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot config set tools.exec.host node\nmoltbot config set tools.exec.security allowlist\nmoltbot config set tools.exec.node "<id-or-name>"\n'})}),"\n",(0,d.jsx)(n.p,{children:"Or per session:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"/exec host=node security=allowlist node=<id-or-name>\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Once set, any ",(0,d.jsx)(n.code,{children:"exec"})," call with ",(0,d.jsx)(n.code,{children:"host=node"})," runs on the node host (subject to the\nnode allowlist/approvals)."]}),"\n",(0,d.jsx)(n.p,{children:"Related:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"/cli/node",children:"Node host CLI"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"/tools/exec",children:"Exec tool"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"/tools/exec-approvals",children:"Exec approvals"})}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"invoking-commands",children:"Invoking commands"}),"\n",(0,d.jsx)(n.p,{children:"Low-level (raw RPC):"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot nodes invoke --node <idOrNameOrIp> --command canvas.eval --params \'{"javaScript":"location.href"}\'\n'})}),"\n",(0,d.jsx)(n.p,{children:"Higher-level helpers exist for the common \u201cgive the agent a MEDIA attachment\u201d workflows."}),"\n",(0,d.jsx)(n.h2,{id:"screenshots-canvas-snapshots",children:"Screenshots (canvas snapshots)"}),"\n",(0,d.jsxs)(n.p,{children:["If the node is showing the Canvas (WebView), ",(0,d.jsx)(n.code,{children:"canvas.snapshot"})," returns ",(0,d.jsx)(n.code,{children:"{ format, base64 }"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["CLI helper (writes to a temp file and prints ",(0,d.jsx)(n.code,{children:"MEDIA:<path>"}),"):"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot nodes canvas snapshot --node <idOrNameOrIp> --format png\nmoltbot nodes canvas snapshot --node <idOrNameOrIp> --format jpg --max-width 1200 --quality 0.9\n"})}),"\n",(0,d.jsx)(n.h3,{id:"canvas-controls",children:"Canvas controls"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot nodes canvas present --node <idOrNameOrIp> --target https://example.com\nmoltbot nodes canvas hide --node <idOrNameOrIp>\nmoltbot nodes canvas navigate https://example.com --node <idOrNameOrIp>\nmoltbot nodes canvas eval --node <idOrNameOrIp> --js "document.title"\n'})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"canvas present"})," accepts URLs or local file paths (",(0,d.jsx)(n.code,{children:"--target"}),"), plus optional ",(0,d.jsx)(n.code,{children:"--x/--y/--width/--height"})," for positioning."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"canvas eval"})," accepts inline JS (",(0,d.jsx)(n.code,{children:"--js"}),") or a positional arg."]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"a2ui-canvas",children:"A2UI (Canvas)"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot nodes canvas a2ui push --node <idOrNameOrIp> --text "Hello"\nmoltbot nodes canvas a2ui push --node <idOrNameOrIp> --jsonl ./payload.jsonl\nmoltbot nodes canvas a2ui reset --node <idOrNameOrIp>\n'})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Only A2UI v0.8 JSONL is supported (v0.9/createSurface is rejected)."}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"photos--videos-node-camera",children:"Photos + videos (node camera)"}),"\n",(0,d.jsxs)(n.p,{children:["Photos (",(0,d.jsx)(n.code,{children:"jpg"}),"):"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot nodes camera list --node <idOrNameOrIp>\nmoltbot nodes camera snap --node <idOrNameOrIp>            # default: both facings (2 MEDIA lines)\nmoltbot nodes camera snap --node <idOrNameOrIp> --facing front\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Video clips (",(0,d.jsx)(n.code,{children:"mp4"}),"):"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot nodes camera clip --node <idOrNameOrIp> --duration 10s\nmoltbot nodes camera clip --node <idOrNameOrIp> --duration 3000 --no-audio\n"})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["The node must be ",(0,d.jsx)(n.strong,{children:"foregrounded"})," for ",(0,d.jsx)(n.code,{children:"canvas.*"})," and ",(0,d.jsx)(n.code,{children:"camera.*"})," (background calls return ",(0,d.jsx)(n.code,{children:"NODE_BACKGROUND_UNAVAILABLE"}),")."]}),"\n",(0,d.jsxs)(n.li,{children:["Clip duration is clamped (currently ",(0,d.jsx)(n.code,{children:"<= 60s"}),") to avoid oversized base64 payloads."]}),"\n",(0,d.jsxs)(n.li,{children:["Android will prompt for ",(0,d.jsx)(n.code,{children:"CAMERA"}),"/",(0,d.jsx)(n.code,{children:"RECORD_AUDIO"})," permissions when possible; denied permissions fail with ",(0,d.jsx)(n.code,{children:"*_PERMISSION_REQUIRED"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"screen-recordings-nodes",children:"Screen recordings (nodes)"}),"\n",(0,d.jsxs)(n.p,{children:["Nodes expose ",(0,d.jsx)(n.code,{children:"screen.record"})," (mp4). Example:"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot nodes screen record --node <idOrNameOrIp> --duration 10s --fps 10\nmoltbot nodes screen record --node <idOrNameOrIp> --duration 10s --fps 10 --no-audio\n"})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"screen.record"})," requires the node app to be foregrounded."]}),"\n",(0,d.jsx)(n.li,{children:"Android will show the system screen-capture prompt before recording."}),"\n",(0,d.jsxs)(n.li,{children:["Screen recordings are clamped to ",(0,d.jsx)(n.code,{children:"<= 60s"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"--no-audio"})," disables microphone capture (supported on iOS/Android; macOS uses system capture audio)."]}),"\n",(0,d.jsxs)(n.li,{children:["Use ",(0,d.jsx)(n.code,{children:"--screen <index>"})," to select a display when multiple screens are available."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"location-nodes",children:"Location (nodes)"}),"\n",(0,d.jsxs)(n.p,{children:["Nodes expose ",(0,d.jsx)(n.code,{children:"location.get"})," when Location is enabled in settings."]}),"\n",(0,d.jsx)(n.p,{children:"CLI helper:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot nodes location get --node <idOrNameOrIp>\nmoltbot nodes location get --node <idOrNameOrIp> --accuracy precise --max-age 15000 --location-timeout 10000\n"})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Location is ",(0,d.jsx)(n.strong,{children:"off by default"}),"."]}),"\n",(0,d.jsx)(n.li,{children:"\u201cAlways\u201d requires system permission; background fetch is best-effort."}),"\n",(0,d.jsx)(n.li,{children:"The response includes lat/lon, accuracy (meters), and timestamp."}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"sms-android-nodes",children:"SMS (Android nodes)"}),"\n",(0,d.jsxs)(n.p,{children:["Android nodes can expose ",(0,d.jsx)(n.code,{children:"sms.send"})," when the user grants ",(0,d.jsx)(n.strong,{children:"SMS"})," permission and the device supports telephony."]}),"\n",(0,d.jsx)(n.p,{children:"Low-level invoke:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot nodes invoke --node <idOrNameOrIp> --command sms.send --params \'{"to":"+15555550123","message":"Hello from Moltbot"}\'\n'})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"The permission prompt must be accepted on the Android device before the capability is advertised."}),"\n",(0,d.jsxs)(n.li,{children:["Wi-Fi-only devices without telephony will not advertise ",(0,d.jsx)(n.code,{children:"sms.send"}),"."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"system-commands-node-host--mac-node",children:"System commands (node host / mac node)"}),"\n",(0,d.jsxs)(n.p,{children:["The macOS node exposes ",(0,d.jsx)(n.code,{children:"system.run"}),", ",(0,d.jsx)(n.code,{children:"system.notify"}),", and ",(0,d.jsx)(n.code,{children:"system.execApprovals.get/set"}),".\nThe headless node host exposes ",(0,d.jsx)(n.code,{children:"system.run"}),", ",(0,d.jsx)(n.code,{children:"system.which"}),", and ",(0,d.jsx)(n.code,{children:"system.execApprovals.get/set"}),"."]}),"\n",(0,d.jsx)(n.p,{children:"Examples:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot nodes run --node <idOrNameOrIp> -- echo "Hello from mac node"\nmoltbot nodes notify --node <idOrNameOrIp> --title "Ping" --body "Gateway ready"\n'})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"system.run"})," returns stdout/stderr/exit code in the payload."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"system.notify"})," respects notification permission state on the macOS app."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"system.run"})," supports ",(0,d.jsx)(n.code,{children:"--cwd"}),", ",(0,d.jsx)(n.code,{children:"--env KEY=VAL"}),", ",(0,d.jsx)(n.code,{children:"--command-timeout"}),", and ",(0,d.jsx)(n.code,{children:"--needs-screen-recording"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"system.notify"})," supports ",(0,d.jsx)(n.code,{children:"--priority <passive|active|timeSensitive>"})," and ",(0,d.jsx)(n.code,{children:"--delivery <system|overlay|auto>"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["macOS nodes drop ",(0,d.jsx)(n.code,{children:"PATH"})," overrides; headless node hosts only accept ",(0,d.jsx)(n.code,{children:"PATH"})," when it prepends the node host PATH."]}),"\n",(0,d.jsxs)(n.li,{children:["On macOS node mode, ",(0,d.jsx)(n.code,{children:"system.run"})," is gated by exec approvals in the macOS app (Settings \u2192 Exec approvals).\nAsk/allowlist/full behave the same as the headless node host; denied prompts return ",(0,d.jsx)(n.code,{children:"SYSTEM_RUN_DENIED"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["On headless node host, ",(0,d.jsx)(n.code,{children:"system.run"})," is gated by exec approvals (",(0,d.jsx)(n.code,{children:"~/.clawdbot/exec-approvals.json"}),")."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"exec-node-binding",children:"Exec node binding"}),"\n",(0,d.jsxs)(n.p,{children:["When multiple nodes are available, you can bind exec to a specific node.\nThis sets the default node for ",(0,d.jsx)(n.code,{children:"exec host=node"})," (and can be overridden per agent)."]}),"\n",(0,d.jsx)(n.p,{children:"Global default:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot config set tools.exec.node "node-id-or-name"\n'})}),"\n",(0,d.jsx)(n.p,{children:"Per-agent override:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:'moltbot config get agents.list\nmoltbot config set agents.list[0].tools.exec.node "node-id-or-name"\n'})}),"\n",(0,d.jsx)(n.p,{children:"Unset to allow any node:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot config unset tools.exec.node\nmoltbot config unset agents.list[0].tools.exec.node\n"})}),"\n",(0,d.jsx)(n.h2,{id:"permissions-map",children:"Permissions map"}),"\n",(0,d.jsxs)(n.p,{children:["Nodes may include a ",(0,d.jsx)(n.code,{children:"permissions"})," map in ",(0,d.jsx)(n.code,{children:"node.list"})," / ",(0,d.jsx)(n.code,{children:"node.describe"}),", keyed by permission name (e.g. ",(0,d.jsx)(n.code,{children:"screenRecording"}),", ",(0,d.jsx)(n.code,{children:"accessibility"}),") with boolean values (",(0,d.jsx)(n.code,{children:"true"})," = granted)."]}),"\n",(0,d.jsx)(n.h2,{id:"headless-node-host-cross-platform",children:"Headless node host (cross-platform)"}),"\n",(0,d.jsxs)(n.p,{children:["Moltbot can run a ",(0,d.jsx)(n.strong,{children:"headless node host"})," (no UI) that connects to the Gateway\nWebSocket and exposes ",(0,d.jsx)(n.code,{children:"system.run"})," / ",(0,d.jsx)(n.code,{children:"system.which"}),". This is useful on Linux/Windows\nor for running a minimal node alongside a server."]}),"\n",(0,d.jsx)(n.p,{children:"Start it:"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"moltbot node run --host <gateway-host> --port 18789\n"})}),"\n",(0,d.jsx)(n.p,{children:"Notes:"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Pairing is still required (the Gateway will show a node approval prompt)."}),"\n",(0,d.jsxs)(n.li,{children:["The node host stores its node id, token, display name, and gateway connection info in ",(0,d.jsx)(n.code,{children:"~/.clawdbot/node.json"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["Exec approvals are enforced locally via ",(0,d.jsx)(n.code,{children:"~/.clawdbot/exec-approvals.json"}),"\n(see ",(0,d.jsx)(n.a,{href:"/tools/exec-approvals",children:"Exec approvals"}),")."]}),"\n",(0,d.jsxs)(n.li,{children:["On macOS, the headless node host prefers the companion app exec host when reachable and falls\nback to local execution if the app is unavailable. Set ",(0,d.jsx)(n.code,{children:"CLAWDBOT_NODE_EXEC_HOST=app"})," to require\nthe app, or ",(0,d.jsx)(n.code,{children:"CLAWDBOT_NODE_EXEC_FALLBACK=0"})," to disable fallback."]}),"\n",(0,d.jsxs)(n.li,{children:["Add ",(0,d.jsx)(n.code,{children:"--tls"})," / ",(0,d.jsx)(n.code,{children:"--tls-fingerprint"})," when the Gateway WS uses TLS."]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"mac-node-mode",children:"Mac node mode"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["The macOS menubar app connects to the Gateway WS server as a node (so ",(0,d.jsx)(n.code,{children:"moltbot nodes \u2026"})," works against this Mac)."]}),"\n",(0,d.jsxs)(n.li,{children:["In remote mode, the app opens an SSH tunnel for the Gateway port and connects to ",(0,d.jsx)(n.code,{children:"localhost"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(t,{...e})}):t(e)}},28453(e,n,s){s.d(n,{R:()=>a,x:()=>i});var o=s(96540);const d={},r=o.createContext(d);function a(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);