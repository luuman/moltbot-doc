"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[2022],{47897(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"concepts/system-prompt","title":"System Prompt","description":"Moltbot builds a custom system prompt for every agent run. The prompt is Moltbot-owned and does not use the p-coding-agent default prompt.","source":"@site/content/moltbot/docs/concepts/system-prompt.md","sourceDirName":"concepts","slug":"/concepts/system-prompt","permalink":"/moltbot-doc/docs/concepts/system-prompt","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"What the Moltbot system prompt contains and how it is assembled","read_when":["Editing system prompt text, tools list, or time/heartbeat sections","Changing workspace bootstrap or skills injection behavior"]}}');var o=t(74848),i=t(28453);const r={summary:"What the Moltbot system prompt contains and how it is assembled",read_when:["Editing system prompt text, tools list, or time/heartbeat sections","Changing workspace bootstrap or skills injection behavior"]},l="System Prompt",c={},d=[{value:"Structure",id:"structure",level:2},{value:"Prompt modes",id:"prompt-modes",level:2},{value:"Workspace bootstrap injection",id:"workspace-bootstrap-injection",level:2},{value:"Time handling",id:"time-handling",level:2},{value:"Skills",id:"skills",level:2},{value:"Documentation",id:"documentation",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"system-prompt",children:"System Prompt"})}),"\n",(0,o.jsxs)(n.p,{children:["Moltbot builds a custom system prompt for every agent run. The prompt is ",(0,o.jsx)(n.strong,{children:"Moltbot-owned"})," and does not use the p-coding-agent default prompt."]}),"\n",(0,o.jsx)(n.p,{children:"The prompt is assembled by Moltbot and injected into each agent run."}),"\n",(0,o.jsx)(n.h2,{id:"structure",children:"Structure"}),"\n",(0,o.jsx)(n.p,{children:"The prompt is intentionally compact and uses fixed sections:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tooling"}),": current tool list + short descriptions."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Skills"})," (when available): tells the model how to load skill instructions on demand."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Moltbot Self-Update"}),": how to run ",(0,o.jsx)(n.code,{children:"config.apply"})," and ",(0,o.jsx)(n.code,{children:"update.run"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Workspace"}),": working directory (",(0,o.jsx)(n.code,{children:"agents.defaults.workspace"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Documentation"}),": local path to Moltbot docs (repo or npm package) and when to read them."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Workspace Files (injected)"}),": indicates bootstrap files are included below."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Sandbox"})," (when enabled): indicates sandboxed runtime, sandbox paths, and whether elevated exec is available."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Current Date & Time"}),": user-local time, timezone, and time format."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reply Tags"}),": optional reply tag syntax for supported providers."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Heartbeats"}),": heartbeat prompt and ack behavior."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Runtime"}),": host, OS, node, model, repo root (when detected), thinking level (one line)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reasoning"}),": current visibility level + /reasoning toggle hint."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"prompt-modes",children:"Prompt modes"}),"\n",(0,o.jsxs)(n.p,{children:["Moltbot can render smaller system prompts for sub-agents. The runtime sets a\n",(0,o.jsx)(n.code,{children:"promptMode"})," for each run (not a user-facing config):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"full"})," (default): includes all sections above."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"minimal"}),": used for sub-agents; omits ",(0,o.jsx)(n.strong,{children:"Skills"}),", ",(0,o.jsx)(n.strong,{children:"Memory Recall"}),", ",(0,o.jsx)(n.strong,{children:"Moltbot\nSelf-Update"}),", ",(0,o.jsx)(n.strong,{children:"Model Aliases"}),", ",(0,o.jsx)(n.strong,{children:"User Identity"}),", ",(0,o.jsx)(n.strong,{children:"Reply Tags"}),",\n",(0,o.jsx)(n.strong,{children:"Messaging"}),", ",(0,o.jsx)(n.strong,{children:"Silent Replies"}),", and ",(0,o.jsx)(n.strong,{children:"Heartbeats"}),". Tooling, Workspace,\nSandbox, Current Date & Time (when known), Runtime, and injected context stay\navailable."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"none"}),": returns only the base identity line."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["When ",(0,o.jsx)(n.code,{children:"promptMode=minimal"}),", extra injected prompts are labeled ",(0,o.jsx)(n.strong,{children:"Subagent\nContext"})," instead of ",(0,o.jsx)(n.strong,{children:"Group Chat Context"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"workspace-bootstrap-injection",children:"Workspace bootstrap injection"}),"\n",(0,o.jsxs)(n.p,{children:["Bootstrap files are trimmed and appended under ",(0,o.jsx)(n.strong,{children:"Project Context"})," so the model sees identity and profile context without needing explicit reads:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"AGENTS.md"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"SOUL.md"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"TOOLS.md"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"IDENTITY.md"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"USER.md"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"HEARTBEAT.md"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"BOOTSTRAP.md"})," (only on brand-new workspaces)"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Large files are truncated with a marker. The max per-file size is controlled by\n",(0,o.jsx)(n.code,{children:"agents.defaults.bootstrapMaxChars"})," (default: 20000). Missing files inject a\nshort missing-file marker."]}),"\n",(0,o.jsxs)(n.p,{children:["Internal hooks can intercept this step via ",(0,o.jsx)(n.code,{children:"agent:bootstrap"})," to mutate or replace\nthe injected bootstrap files (for example swapping ",(0,o.jsx)(n.code,{children:"SOUL.md"})," for an alternate persona)."]}),"\n",(0,o.jsxs)(n.p,{children:["To inspect how much each injected file contributes (raw vs injected, truncation, plus tool schema overhead), use ",(0,o.jsx)(n.code,{children:"/context list"})," or ",(0,o.jsx)(n.code,{children:"/context detail"}),". See ",(0,o.jsx)(n.a,{href:"/concepts/context",children:"Context"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"time-handling",children:"Time handling"}),"\n",(0,o.jsxs)(n.p,{children:["The system prompt includes a dedicated ",(0,o.jsx)(n.strong,{children:"Current Date & Time"})," section when the\nuser timezone is known. To keep the prompt cache-stable, it now only includes\nthe ",(0,o.jsx)(n.strong,{children:"time zone"})," (no dynamic clock or time format)."]}),"\n",(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.code,{children:"session_status"})," when the agent needs the current time; the status card\nincludes a timestamp line."]}),"\n",(0,o.jsx)(n.p,{children:"Configure with:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"agents.defaults.userTimezone"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"agents.defaults.timeFormat"})," (",(0,o.jsx)(n.code,{children:"auto"})," | ",(0,o.jsx)(n.code,{children:"12"})," | ",(0,o.jsx)(n.code,{children:"24"}),")"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["See ",(0,o.jsx)(n.a,{href:"/date-time",children:"Date & Time"})," for full behavior details."]}),"\n",(0,o.jsx)(n.h2,{id:"skills",children:"Skills"}),"\n",(0,o.jsxs)(n.p,{children:["When eligible skills exist, Moltbot injects a compact ",(0,o.jsx)(n.strong,{children:"available skills list"}),"\n(",(0,o.jsx)(n.code,{children:"formatSkillsForPrompt"}),") that includes the ",(0,o.jsx)(n.strong,{children:"file path"})," for each skill. The\nprompt instructs the model to use ",(0,o.jsx)(n.code,{children:"read"})," to load the SKILL.md at the listed\nlocation (workspace, managed, or bundled). If no skills are eligible, the\nSkills section is omitted."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"<available_skills>\n  <skill>\n    <name>...</name>\n    <description>...</description>\n    <location>...</location>\n  </skill>\n</available_skills>\n"})}),"\n",(0,o.jsx)(n.p,{children:"This keeps the base prompt small while still enabling targeted skill usage."}),"\n",(0,o.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,o.jsxs)(n.p,{children:["When available, the system prompt includes a ",(0,o.jsx)(n.strong,{children:"Documentation"})," section that points to the\nlocal Moltbot docs directory (either ",(0,o.jsx)(n.code,{children:"docs/"})," in the repo workspace or the bundled npm\npackage docs) and also notes the public mirror, source repo, community Discord, and\nClawdHub (",(0,o.jsx)(n.a,{href:"https://clawdhub.com",children:"https://clawdhub.com"}),") for skills discovery. The prompt instructs the model to consult local docs first\nfor Moltbot behavior, commands, configuration, or architecture, and to run\n",(0,o.jsx)(n.code,{children:"moltbot status"})," itself when possible (asking the user only when it lacks access)."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var s=t(96540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);