"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[6667],{24123(e,n,t){t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"gateway/remote-gateway-readme","title":"Running Moltbot.app with a Remote Gateway","description":"Moltbot.app uses SSH tunneling to connect to a remote gateway. This guide shows you how to set it up.","source":"@site/content/moltbot/docs/gateway/remote-gateway-readme.md","sourceDirName":"gateway","slug":"/gateway/remote-gateway-readme","permalink":"/moltbot-doc/docs/gateway/remote-gateway-readme","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"SSH tunnel setup for Moltbot.app connecting to a remote gateway","read_when":"Connecting the macOS app to a remote gateway over SSH"},"sidebar":"tutorialSidebar","previous":{"title":"\u8fdc\u7a0b","permalink":"/moltbot-doc/docs/gateway/remote"},"next":{"title":"\u5b9a\u65f6\u4efb\u52a1","permalink":"/moltbot-doc/docs/automation/cron-jobs"}}');var o=t(74848),a=t(28453);const r={summary:"SSH tunnel setup for Moltbot.app connecting to a remote gateway",read_when:"Connecting the macOS app to a remote gateway over SSH"},l="Running Moltbot.app with a Remote Gateway",i={},c=[{value:"Overview",id:"overview",level:2},{value:"Quick Setup",id:"quick-setup",level:2},{value:"Step 1: Add SSH Config",id:"step-1-add-ssh-config",level:3},{value:"Step 2: Copy SSH Key",id:"step-2-copy-ssh-key",level:3},{value:"Step 3: Set Gateway Token",id:"step-3-set-gateway-token",level:3},{value:"Step 4: Start SSH Tunnel",id:"step-4-start-ssh-tunnel",level:3},{value:"Step 5: Restart Moltbot.app",id:"step-5-restart-moltbotapp",level:3},{value:"Auto-Start Tunnel on Login",id:"auto-start-tunnel-on-login",level:2},{value:"Create the PLIST file",id:"create-the-plist-file",level:3},{value:"Load the Launch Agent",id:"load-the-launch-agent",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"How It Works",id:"how-it-works",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"running-moltbotapp-with-a-remote-gateway",children:"Running Moltbot.app with a Remote Gateway"})}),"\n",(0,o.jsx)(n.p,{children:"Moltbot.app uses SSH tunneling to connect to a remote gateway. This guide shows you how to set it up."}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Client Machine                          \u2502\n\u2502                                                              \u2502\n\u2502  Moltbot.app \u2500\u2500\u25ba ws://127.0.0.1:18789 (local port)           \u2502\n\u2502                     \u2502                                        \u2502\n\u2502                     \u25bc                                        \u2502\n\u2502  SSH Tunnel \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n\u2502                     \u2502                                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2502\n                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         Remote Machine                        \u2502\n\u2502                                                              \u2502\n\u2502  Gateway WebSocket \u2500\u2500\u25ba ws://127.0.0.1:18789 \u2500\u2500\u25ba              \u2502\n\u2502                                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,o.jsx)(n.h2,{id:"quick-setup",children:"Quick Setup"}),"\n",(0,o.jsx)(n.h3,{id:"step-1-add-ssh-config",children:"Step 1: Add SSH Config"}),"\n",(0,o.jsxs)(n.p,{children:["Edit ",(0,o.jsx)(n.code,{children:"~/.ssh/config"})," and add:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ssh",children:"Host remote-gateway\n    HostName <REMOTE_IP>          # e.g., 172.27.187.184\n    User <REMOTE_USER>            # e.g., jefferson\n    LocalForward 18789 127.0.0.1:18789\n    IdentityFile ~/.ssh/id_rsa\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Replace ",(0,o.jsx)(n.code,{children:"<REMOTE_IP>"})," and ",(0,o.jsx)(n.code,{children:"<REMOTE_USER>"})," with your values."]}),"\n",(0,o.jsx)(n.h3,{id:"step-2-copy-ssh-key",children:"Step 2: Copy SSH Key"}),"\n",(0,o.jsx)(n.p,{children:"Copy your public key to the remote machine (enter password once):"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ssh-copy-id -i ~/.ssh/id_rsa <REMOTE_USER>@<REMOTE_IP>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"step-3-set-gateway-token",children:"Step 3: Set Gateway Token"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'launchctl setenv CLAWDBOT_GATEWAY_TOKEN "<your-token>"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"step-4-start-ssh-tunnel",children:"Step 4: Start SSH Tunnel"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ssh -N remote-gateway &\n"})}),"\n",(0,o.jsx)(n.h3,{id:"step-5-restart-moltbotapp",children:"Step 5: Restart Moltbot.app"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Quit Moltbot.app (\u2318Q), then reopen:\nopen /path/to/Moltbot.app\n"})}),"\n",(0,o.jsx)(n.p,{children:"The app will now connect to the remote gateway through the SSH tunnel."}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"auto-start-tunnel-on-login",children:"Auto-Start Tunnel on Login"}),"\n",(0,o.jsx)(n.p,{children:"To have the SSH tunnel start automatically when you log in, create a Launch Agent."}),"\n",(0,o.jsx)(n.h3,{id:"create-the-plist-file",children:"Create the PLIST file"}),"\n",(0,o.jsxs)(n.p,{children:["Save this as ",(0,o.jsx)(n.code,{children:"~/Library/LaunchAgents/bot.molt.ssh-tunnel.plist"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">\n<plist version="1.0">\n<dict>\n    <key>Label</key>\n    <string>bot.molt.ssh-tunnel</string>\n    <key>ProgramArguments</key>\n    <array>\n        <string>/usr/bin/ssh</string>\n        <string>-N</string>\n        <string>remote-gateway</string>\n    </array>\n    <key>KeepAlive</key>\n    <true/>\n    <key>RunAtLoad</key>\n    <true/>\n</dict>\n</plist>\n'})}),"\n",(0,o.jsx)(n.h3,{id:"load-the-launch-agent",children:"Load the Launch Agent"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"launchctl bootstrap gui/$UID ~/Library/LaunchAgents/bot.molt.ssh-tunnel.plist\n"})}),"\n",(0,o.jsx)(n.p,{children:"The tunnel will now:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Start automatically when you log in"}),"\n",(0,o.jsx)(n.li,{children:"Restart if it crashes"}),"\n",(0,o.jsx)(n.li,{children:"Keep running in the background"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Legacy note: remove any leftover ",(0,o.jsx)(n.code,{children:"com.clawdbot.ssh-tunnel"})," LaunchAgent if present."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Check if tunnel is running:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'ps aux | grep "ssh -N remote-gateway" | grep -v grep\nlsof -i :18789\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Restart the tunnel:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"launchctl kickstart -k gui/$UID/bot.molt.ssh-tunnel\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Stop the tunnel:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"launchctl bootout gui/$UID/bot.molt.ssh-tunnel\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Component"}),(0,o.jsx)(n.th,{children:"What It Does"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"LocalForward 18789 127.0.0.1:18789"})}),(0,o.jsx)(n.td,{children:"Forwards local port 18789 to remote port 18789"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"ssh -N"})}),(0,o.jsx)(n.td,{children:"SSH without executing remote commands (just port forwarding)"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"KeepAlive"})}),(0,o.jsx)(n.td,{children:"Automatically restarts tunnel if it crashes"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"RunAtLoad"})}),(0,o.jsx)(n.td,{children:"Starts tunnel when the agent loads"})]})]})]}),"\n",(0,o.jsxs)(n.p,{children:["Moltbot.app connects to ",(0,o.jsx)(n.code,{children:"ws://127.0.0.1:18789"})," on your client machine. The SSH tunnel forwards that connection to port 18789 on the remote machine where the Gateway is running."]})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var s=t(96540);const o={},a=s.createContext(o);function r(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);