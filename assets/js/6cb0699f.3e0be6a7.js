"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[162],{16067(e,n,r){r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>d,default:()=>a,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"tools/browser-linux-troubleshooting","title":"\u6d4f\u89c8\u5668\u6545\u969c\u6392\u9664\uff08Linux\uff09","description":"\u95ee\u9898\uff1a\\"Failed to start Chrome CDP on port 18800\\"","source":"@site/content/moltbot/docs/tools/browser-linux-troubleshooting.md","sourceDirName":"tools","slug":"/tools/browser-linux-troubleshooting","permalink":"/moltbot-doc/docs/tools/browser-linux-troubleshooting","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"\u4fee\u590d Linux \u4e0a Moltbot \u6d4f\u89c8\u5668\u63a7\u5236\u7684 Chrome/Brave/Edge/Chromium CDP \u542f\u52a8\u95ee\u9898","read_when":"Linux \u4e0a\u6d4f\u89c8\u5668\u63a7\u5236\u5931\u8d25\uff0c\u5c24\u5176\u662f snap Chromium"},"sidebar":"tutorialSidebar","previous":{"title":"\u6d4f\u89c8\u5668\u767b\u5f55","permalink":"/moltbot-doc/docs/tools/browser-login"},"next":{"title":"\u6280\u80fd","permalink":"/moltbot-doc/docs/tools/skills"}}');var o=r(74848),l=r(28453);const t={summary:"\u4fee\u590d Linux \u4e0a Moltbot \u6d4f\u89c8\u5668\u63a7\u5236\u7684 Chrome/Brave/Edge/Chromium CDP \u542f\u52a8\u95ee\u9898",read_when:"Linux \u4e0a\u6d4f\u89c8\u5668\u63a7\u5236\u5931\u8d25\uff0c\u5c24\u5176\u662f snap Chromium"},d="\u6d4f\u89c8\u5668\u6545\u969c\u6392\u9664\uff08Linux\uff09",i={},c=[{value:"\u95ee\u9898\uff1a&quot;Failed to start Chrome CDP on port 18800&quot;",id:"\u95ee\u9898failed-to-start-chrome-cdp-on-port-18800",level:2},{value:"\u6839\u672c\u539f\u56e0",id:"\u6839\u672c\u539f\u56e0",level:3},{value:"\u89e3\u51b3\u65b9\u6848 1\uff1a\u5b89\u88c5 Google Chrome\uff08\u63a8\u8350\uff09",id:"\u89e3\u51b3\u65b9\u6848-1\u5b89\u88c5-google-chrome\u63a8\u8350",level:3},{value:"\u89e3\u51b3\u65b9\u6848 2\uff1a\u4f7f\u7528 Snap Chromium \u7684\u4ec5\u9644\u52a0\u6a21\u5f0f",id:"\u89e3\u51b3\u65b9\u6848-2\u4f7f\u7528-snap-chromium-\u7684\u4ec5\u9644\u52a0\u6a21\u5f0f",level:3},{value:"\u9a8c\u8bc1\u6d4f\u89c8\u5668\u662f\u5426\u6b63\u5e38\u5de5\u4f5c",id:"\u9a8c\u8bc1\u6d4f\u89c8\u5668\u662f\u5426\u6b63\u5e38\u5de5\u4f5c",level:3},{value:"\u914d\u7f6e\u53c2\u8003",id:"\u914d\u7f6e\u53c2\u8003",level:3},{value:"\u95ee\u9898\uff1a&quot;Chrome extension relay is running, but no tab is connected&quot;",id:"\u95ee\u9898chrome-extension-relay-is-running-but-no-tab-is-connected",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"\u6d4f\u89c8\u5668\u6545\u969c\u6392\u9664linux",children:"\u6d4f\u89c8\u5668\u6545\u969c\u6392\u9664\uff08Linux\uff09"})}),"\n",(0,o.jsx)(n.h2,{id:"\u95ee\u9898failed-to-start-chrome-cdp-on-port-18800",children:'\u95ee\u9898\uff1a"Failed to start Chrome CDP on port 18800"'}),"\n",(0,o.jsx)(n.p,{children:"Moltbot \u7684\u6d4f\u89c8\u5668\u63a7\u5236\u670d\u52a1\u5668\u65e0\u6cd5\u542f\u52a8 Chrome/Brave/Edge/Chromium\uff0c\u5e76\u51fa\u73b0\u9519\u8bef\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:'{"error":"Error: Failed to start Chrome CDP on port 18800 for profile \\"clawd\\"."}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u6839\u672c\u539f\u56e0",children:"\u6839\u672c\u539f\u56e0"}),"\n",(0,o.jsxs)(n.p,{children:["\u5728 Ubuntu\uff08\u548c\u8bb8\u591a Linux \u53d1\u884c\u7248\uff09\u4e0a\uff0c\u9ed8\u8ba4\u7684 Chromium \u5b89\u88c5\u662f ",(0,o.jsx)(n.strong,{children:"snap \u5305"}),"\u3002Snap \u7684 AppArmor \u9650\u5236\u5e72\u6270\u4e86 Moltbot \u751f\u6210\u548c\u76d1\u89c6\u6d4f\u89c8\u5668\u8fdb\u7a0b\u7684\u65b9\u5f0f\u3002"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"apt install chromium"})," \u547d\u4ee4\u5b89\u88c5\u4e00\u4e2a\u91cd\u5b9a\u5411\u5230 snap \u7684\u5b58\u6839\u5305\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"Note, selecting 'chromium-browser' instead of 'chromium'\nchromium-browser is already the newest version (2:1snap1-0ubuntu2).\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u8fd9\u4e0d\u662f\u771f\u6b63\u7684\u6d4f\u89c8\u5668 \u2014 \u5b83\u53ea\u662f\u4e00\u4e2a\u5305\u88c5\u5668\u3002"}),"\n",(0,o.jsx)(n.h3,{id:"\u89e3\u51b3\u65b9\u6848-1\u5b89\u88c5-google-chrome\u63a8\u8350",children:"\u89e3\u51b3\u65b9\u6848 1\uff1a\u5b89\u88c5 Google Chrome\uff08\u63a8\u8350\uff09"}),"\n",(0,o.jsxs)(n.p,{children:["\u5b89\u88c5\u5b98\u65b9 Google Chrome ",(0,o.jsx)(n.code,{children:".deb"})," \u5305\uff0c\u5b83\u4e0d\u53d7 snap \u9650\u5236\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\nsudo dpkg -i google-chrome-stable_current_amd64.deb\nsudo apt --fix-broken install -y  # \u5982\u679c\u6709\u4f9d\u8d56\u9519\u8bef\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u7136\u540e\u66f4\u65b0\u60a8\u7684 Moltbot \u914d\u7f6e\uff08",(0,o.jsx)(n.code,{children:"~/.clawdbot/moltbot.json"}),"\uff09\uff1a"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "browser": {\n    "enabled": true,\n    "executablePath": "/usr/bin/google-chrome-stable",\n    "headless": true,\n    "noSandbox": true\n  }\n}\n'})}),"\n",(0,o.jsx)(n.h3,{id:"\u89e3\u51b3\u65b9\u6848-2\u4f7f\u7528-snap-chromium-\u7684\u4ec5\u9644\u52a0\u6a21\u5f0f",children:"\u89e3\u51b3\u65b9\u6848 2\uff1a\u4f7f\u7528 Snap Chromium \u7684\u4ec5\u9644\u52a0\u6a21\u5f0f"}),"\n",(0,o.jsx)(n.p,{children:"\u5982\u679c\u60a8\u5fc5\u987b\u4f7f\u7528 snap Chromium\uff0c\u8bf7\u914d\u7f6e Moltbot \u4ee5\u9644\u52a0\u5230\u624b\u52a8\u542f\u52a8\u7684\u6d4f\u89c8\u5668\uff1a"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u66f4\u65b0\u914d\u7f6e\uff1a"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "browser": {\n    "enabled": true,\n    "attachOnly": true,\n    "headless": true,\n    "noSandbox": true\n  }\n}\n'})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"\u624b\u52a8\u542f\u52a8 Chromium\uff1a"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"chromium-browser --headless --no-sandbox --disable-gpu \\\n  --remote-debugging-port=18800 \\\n  --user-data-dir=$HOME/.clawdbot/browser/clawd/user-data \\\n  about:blank &\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"\u53ef\u9009\u5730\u521b\u5efa\u4e00\u4e2a systemd \u7528\u6237\u670d\u52a1\u4ee5\u81ea\u52a8\u542f\u52a8 Chrome\uff1a"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ini",children:"# ~/.config/systemd/user/clawd-browser.service\n[Unit]\nDescription=Clawd Browser (Chrome CDP)\nAfter=network.target\n\n[Service]\nExecStart=/snap/bin/chromium --headless --no-sandbox --disable-gpu --remote-debugging-port=18800 --user-data-dir=%h/.clawdbot/browser/clawd/user-data about:blank\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=default.target\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u542f\u7528\uff1a",(0,o.jsx)(n.code,{children:"systemctl --user enable --now clawd-browser.service"})]}),"\n",(0,o.jsx)(n.h3,{id:"\u9a8c\u8bc1\u6d4f\u89c8\u5668\u662f\u5426\u6b63\u5e38\u5de5\u4f5c",children:"\u9a8c\u8bc1\u6d4f\u89c8\u5668\u662f\u5426\u6b63\u5e38\u5de5\u4f5c"}),"\n",(0,o.jsx)(n.p,{children:"\u68c0\u67e5\u72b6\u6001\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -s http://127.0.0.1:18791/ | jq '{running, pid, chosenBrowser}'\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u6d4b\u8bd5\u6d4f\u89c8\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -s -X POST http://127.0.0.1:18791/start\ncurl -s http://127.0.0.1:18791/tabs\n"})}),"\n",(0,o.jsx)(n.h3,{id:"\u914d\u7f6e\u53c2\u8003",children:"\u914d\u7f6e\u53c2\u8003"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"\u9009\u9879"}),(0,o.jsx)(n.th,{children:"\u63cf\u8ff0"}),(0,o.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"browser.enabled"})}),(0,o.jsx)(n.td,{children:"\u542f\u7528\u6d4f\u89c8\u5668\u63a7\u5236"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"true"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"browser.executablePath"})}),(0,o.jsx)(n.td,{children:"Chromium \u7cfb\u5217\u6d4f\u89c8\u5668\u4e8c\u8fdb\u5236\u6587\u4ef6\u8def\u5f84\uff08Chrome/Brave/Edge/Chromium\uff09"}),(0,o.jsx)(n.td,{children:"\u81ea\u52a8\u68c0\u6d4b\uff08\u4f18\u5148\u9ed8\u8ba4\u6d4f\u89c8\u5668\uff0c\u5f53\u57fa\u4e8e Chromium \u65f6\uff09"})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"browser.headless"})}),(0,o.jsx)(n.td,{children:"\u65e0 GUI \u8fd0\u884c"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"browser.noSandbox"})}),(0,o.jsxs)(n.td,{children:["\u6dfb\u52a0 ",(0,o.jsx)(n.code,{children:"--no-sandbox"})," \u6807\u5fd7\uff08\u67d0\u4e9b Linux \u8bbe\u7f6e\u9700\u8981\uff09"]}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"browser.attachOnly"})}),(0,o.jsx)(n.td,{children:"\u4e0d\u542f\u52a8\u6d4f\u89c8\u5668\uff0c\u4ec5\u9644\u52a0\u5230\u73b0\u6709\u6d4f\u89c8\u5668"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"false"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"browser.cdpPort"})}),(0,o.jsx)(n.td,{children:"Chrome DevTools Protocol \u7aef\u53e3"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"18800"})})]})]})]}),"\n",(0,o.jsx)(n.h3,{id:"\u95ee\u9898chrome-extension-relay-is-running-but-no-tab-is-connected",children:'\u95ee\u9898\uff1a"Chrome extension relay is running, but no tab is connected"'}),"\n",(0,o.jsxs)(n.p,{children:["\u60a8\u6b63\u5728\u4f7f\u7528 ",(0,o.jsx)(n.code,{children:"chrome"})," \u914d\u7f6e\u6587\u4ef6\uff08\u6269\u5c55\u4e2d\u7ee7\uff09\u3002\u5b83\u671f\u671b Moltbot\n\u6d4f\u89c8\u5668\u6269\u5c55\u9644\u52a0\u5230\u4e00\u4e2a\u6d3b\u52a8\u6807\u7b7e\u9875\u3002"]}),"\n",(0,o.jsx)(n.p,{children:"\u4fee\u590d\u9009\u9879\uff1a"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u4f7f\u7528\u6258\u7ba1\u6d4f\u89c8\u5668\uff1a"})," ",(0,o.jsx)(n.code,{children:"moltbot browser start --browser-profile clawd"}),"\n\uff08\u6216\u8bbe\u7f6e ",(0,o.jsx)(n.code,{children:'browser.defaultProfile: "clawd"'}),"\uff09\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"\u4f7f\u7528\u6269\u5c55\u4e2d\u7ee7\uff1a"})," \u5b89\u88c5\u6269\u5c55\uff0c\u6253\u5f00\u6807\u7b7e\u9875\uff0c\u7136\u540e\u70b9\u51fb\nMoltbot \u6269\u5c55\u56fe\u6807\u4ee5\u9644\u52a0\u5b83\u3002"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\u6ce8\u610f\u4e8b\u9879\uff1a"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"chrome"})," \u914d\u7f6e\u6587\u4ef6\u5c3d\u53ef\u80fd\u4f7f\u7528\u60a8\u7684 ",(0,o.jsx)(n.strong,{children:"\u7cfb\u7edf\u9ed8\u8ba4 Chromium \u6d4f\u89c8\u5668"}),"\u3002"]}),"\n",(0,o.jsxs)(n.li,{children:["\u672c\u5730 ",(0,o.jsx)(n.code,{children:"clawd"})," \u914d\u7f6e\u6587\u4ef6\u81ea\u52a8\u5206\u914d ",(0,o.jsx)(n.code,{children:"cdpPort"}),"/",(0,o.jsx)(n.code,{children:"cdpUrl"}),"\uff1b\u4ec5\u5bf9\u8fdc\u7a0b CDP \u8bbe\u7f6e\u8fd9\u4e9b\u3002"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},28453(e,n,r){r.d(n,{R:()=>t,x:()=>d});var s=r(96540);const o={},l=s.createContext(o);function t(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);