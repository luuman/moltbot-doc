"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[5472],{3535(e,n,s){s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"channels/telegram","title":"Telegram (Bot API)","description":"Status: production-ready for bot DMs + groups via grammY. Long-polling by default; webhook optional.","source":"@site/content/moltbot/docs/channels/telegram.md","sourceDirName":"channels","slug":"/channels/telegram","permalink":"/moltbot-doc/docs/channels/telegram","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Telegram bot support status, capabilities, and configuration","read_when":["Working on Telegram features or webhooks"]}}');var r=s(74848),l=s(28453);const o={summary:"Telegram bot support status, capabilities, and configuration",read_when:["Working on Telegram features or webhooks"]},c="Telegram (Bot API)",t={},a=[{value:"Quick setup (beginner)",id:"quick-setup-beginner",level:2},{value:"What it is",id:"what-it-is",level:2},{value:"Setup (fast path)",id:"setup-fast-path",level:2},{value:"1) Create a bot token (BotFather)",id:"1-create-a-bot-token-botfather",level:3},{value:"2) Configure the token (env or config)",id:"2-configure-the-token-env-or-config",level:3},{value:"Token + privacy + permissions (Telegram side)",id:"token--privacy--permissions-telegram-side",level:2},{value:"Token creation (BotFather)",id:"token-creation-botfather",level:3},{value:"Group message visibility (Privacy Mode)",id:"group-message-visibility-privacy-mode",level:3},{value:"Group permissions (admin rights)",id:"group-permissions-admin-rights",level:3},{value:"How it works (behavior)",id:"how-it-works-behavior",level:2},{value:"Formatting (Telegram HTML)",id:"formatting-telegram-html",level:2},{value:"Commands (native + custom)",id:"commands-native--custom",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Limits",id:"limits",level:2},{value:"Group activation modes",id:"group-activation-modes",level:2},{value:"Via config (recommended)",id:"via-config-recommended",level:3},{value:"Via command (session-level)",id:"via-command-session-level",level:3},{value:"Getting the group chat ID",id:"getting-the-group-chat-id",level:3},{value:"Config writes",id:"config-writes",level:2},{value:"Topics (forum supergroups)",id:"topics-forum-supergroups",level:2},{value:"Inline Buttons",id:"inline-buttons",level:2},{value:"Sending buttons",id:"sending-buttons",level:3},{value:"Configuration options",id:"configuration-options",level:3},{value:"Access control (DMs + groups)",id:"access-control-dms--groups",level:2},{value:"DM access",id:"dm-access",level:3},{value:"Finding your Telegram user ID",id:"finding-your-telegram-user-id",level:4},{value:"Group access",id:"group-access",level:3},{value:"Long-polling vs webhook",id:"long-polling-vs-webhook",level:2},{value:"Reply threading",id:"reply-threading",level:2},{value:"Audio messages (voice vs file)",id:"audio-messages-voice-vs-file",level:2},{value:"Stickers",id:"stickers",level:2},{value:"Receiving stickers",id:"receiving-stickers",level:3},{value:"Sticker cache",id:"sticker-cache",level:3},{value:"Sending stickers",id:"sending-stickers",level:3},{value:"Streaming (drafts)",id:"streaming-drafts",level:2},{value:"Retry policy",id:"retry-policy",level:2},{value:"Agent tool (messages + reactions)",id:"agent-tool-messages--reactions",level:2},{value:"Reaction notifications",id:"reaction-notifications",level:2},{value:"Delivery targets (CLI/cron)",id:"delivery-targets-clicron",level:2},{value:"Troubleshooting",id:"troubleshooting-1",level:2},{value:"Configuration reference (Telegram)",id:"configuration-reference-telegram",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"telegram-bot-api",children:"Telegram (Bot API)"})}),"\n",(0,r.jsx)(n.p,{children:"Status: production-ready for bot DMs + groups via grammY. Long-polling by default; webhook optional."}),"\n",(0,r.jsx)(n.h2,{id:"quick-setup-beginner",children:"Quick setup (beginner)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a bot with ",(0,r.jsx)(n.strong,{children:"@BotFather"})," and copy the token."]}),"\n",(0,r.jsxs)(n.li,{children:["Set the token:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Env: ",(0,r.jsx)(n.code,{children:"TELEGRAM_BOT_TOKEN=..."})]}),"\n",(0,r.jsxs)(n.li,{children:["Or config: ",(0,r.jsx)(n.code,{children:'channels.telegram.botToken: "..."'}),"."]}),"\n",(0,r.jsx)(n.li,{children:"If both are set, config takes precedence (env fallback is default-account only)."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Start the gateway."}),"\n",(0,r.jsx)(n.li,{children:"DM access is pairing by default; approve the pairing code on first contact."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Minimal config:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      enabled: true,\n      botToken: "123:abc",\n      dmPolicy: "pairing"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"what-it-is",children:"What it is"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"A Telegram Bot API channel owned by the Gateway."}),"\n",(0,r.jsx)(n.li,{children:"Deterministic routing: replies go back to Telegram; the model never chooses channels."}),"\n",(0,r.jsxs)(n.li,{children:["DMs share the agent's main session; groups stay isolated (",(0,r.jsx)(n.code,{children:"agent:<agentId>:telegram:group:<chatId>"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"setup-fast-path",children:"Setup (fast path)"}),"\n",(0,r.jsx)(n.h3,{id:"1-create-a-bot-token-botfather",children:"1) Create a bot token (BotFather)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Open Telegram and chat with ",(0,r.jsx)(n.strong,{children:"@BotFather"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"/newbot"}),", then follow the prompts (name + username ending in ",(0,r.jsx)(n.code,{children:"bot"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Copy the token and store it safely."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Optional BotFather settings:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/setjoingroups"})," \u2014 allow/deny adding the bot to groups."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/setprivacy"})," \u2014 control whether the bot sees all group messages."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-configure-the-token-env-or-config",children:"2) Configure the token (env or config)"}),"\n",(0,r.jsx)(n.p,{children:"Example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      enabled: true,\n      botToken: "123:abc",\n      dmPolicy: "pairing",\n      groups: { "*": { requireMention: true } }\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Env option: ",(0,r.jsx)(n.code,{children:"TELEGRAM_BOT_TOKEN=..."})," (works for the default account).\nIf both env and config are set, config takes precedence."]}),"\n",(0,r.jsxs)(n.p,{children:["Multi-account support: use ",(0,r.jsx)(n.code,{children:"channels.telegram.accounts"})," with per-account tokens and optional ",(0,r.jsx)(n.code,{children:"name"}),". See ",(0,r.jsx)(n.a,{href:"/gateway/configuration#telegramaccounts--discordaccounts--slackaccounts--signalaccounts--imessageaccounts",children:(0,r.jsx)(n.code,{children:"gateway/configuration"})})," for the shared pattern."]}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"Start the gateway. Telegram starts when a token is resolved (config first, env fallback)."}),"\n",(0,r.jsx)(n.li,{children:"DM access defaults to pairing. Approve the code when the bot is first contacted."}),"\n",(0,r.jsxs)(n.li,{children:["For groups: add the bot, decide privacy/admin behavior (below), then set ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"})," to control mention gating + allowlists."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"token--privacy--permissions-telegram-side",children:"Token + privacy + permissions (Telegram side)"}),"\n",(0,r.jsx)(n.h3,{id:"token-creation-botfather",children:"Token creation (BotFather)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/newbot"})," creates the bot and returns the token (keep it secret)."]}),"\n",(0,r.jsx)(n.li,{children:"If a token leaks, revoke/regenerate it via @BotFather and update your config."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"group-message-visibility-privacy-mode",children:"Group message visibility (Privacy Mode)"}),"\n",(0,r.jsxs)(n.p,{children:["Telegram bots default to ",(0,r.jsx)(n.strong,{children:"Privacy Mode"}),", which limits which group messages they receive.\nIf your bot must see ",(0,r.jsx)(n.em,{children:"all"})," group messages, you have two options:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Disable privacy mode with ",(0,r.jsx)(n.code,{children:"/setprivacy"})," ",(0,r.jsx)(n.strong,{children:"or"})]}),"\n",(0,r.jsxs)(n.li,{children:["Add the bot as a group ",(0,r.jsx)(n.strong,{children:"admin"})," (admin bots receive all messages)."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," When you toggle privacy mode, Telegram requires removing + re\u2011adding the bot\nto each group for the change to take effect."]}),"\n",(0,r.jsx)(n.h3,{id:"group-permissions-admin-rights",children:"Group permissions (admin rights)"}),"\n",(0,r.jsx)(n.p,{children:"Admin status is set inside the group (Telegram UI). Admin bots always receive all\ngroup messages, so use admin if you need full visibility."}),"\n",(0,r.jsx)(n.h2,{id:"how-it-works-behavior",children:"How it works (behavior)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Inbound messages are normalized into the shared channel envelope with reply context and media placeholders."}),"\n",(0,r.jsxs)(n.li,{children:["Group replies require a mention by default (native @mention or ",(0,r.jsx)(n.code,{children:"agents.list[].groupChat.mentionPatterns"})," / ",(0,r.jsx)(n.code,{children:"messages.groupChat.mentionPatterns"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Multi-agent override: set per-agent patterns on ",(0,r.jsx)(n.code,{children:"agents.list[].groupChat.mentionPatterns"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Replies always route back to the same Telegram chat."}),"\n",(0,r.jsxs)(n.li,{children:["Long-polling uses grammY runner with per-chat sequencing; overall concurrency is capped by ",(0,r.jsx)(n.code,{children:"agents.defaults.maxConcurrent"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Telegram Bot API does not support read receipts; there is no ",(0,r.jsx)(n.code,{children:"sendReadReceipts"})," option."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"formatting-telegram-html",children:"Formatting (Telegram HTML)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Outbound Telegram text uses ",(0,r.jsx)(n.code,{children:'parse_mode: "HTML"'})," (Telegram\u2019s supported tag subset)."]}),"\n",(0,r.jsxs)(n.li,{children:["Markdown-ish input is rendered into ",(0,r.jsx)(n.strong,{children:"Telegram-safe HTML"})," (bold/italic/strike/code/links); block elements are flattened to text with newlines/bullets."]}),"\n",(0,r.jsx)(n.li,{children:"Raw HTML from models is escaped to avoid Telegram parse errors."}),"\n",(0,r.jsx)(n.li,{children:"If Telegram rejects the HTML payload, Moltbot retries the same message as plain text."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"commands-native--custom",children:"Commands (native + custom)"}),"\n",(0,r.jsxs)(n.p,{children:["Moltbot registers native commands (like ",(0,r.jsx)(n.code,{children:"/status"}),", ",(0,r.jsx)(n.code,{children:"/reset"}),", ",(0,r.jsx)(n.code,{children:"/model"}),") with Telegram\u2019s bot menu on startup.\nYou can add custom commands to the menu via config:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      customCommands: [\n        { command: "backup", description: "Git backup" },\n        { command: "generate", description: "Create an image" }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setMyCommands failed"})," in logs usually means outbound HTTPS/DNS is blocked to ",(0,r.jsx)(n.code,{children:"api.telegram.org"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["If you see ",(0,r.jsx)(n.code,{children:"sendMessage"})," or ",(0,r.jsx)(n.code,{children:"sendChatAction"})," failures, check IPv6 routing and DNS."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["More help: ",(0,r.jsx)(n.a,{href:"/channels/troubleshooting",children:"Channel troubleshooting"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Notes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Custom commands are ",(0,r.jsx)(n.strong,{children:"menu entries only"}),"; Moltbot does not implement them unless you handle them elsewhere."]}),"\n",(0,r.jsxs)(n.li,{children:["Command names are normalized (leading ",(0,r.jsx)(n.code,{children:"/"})," stripped, lowercased) and must match ",(0,r.jsx)(n.code,{children:"a-z"}),", ",(0,r.jsx)(n.code,{children:"0-9"}),", ",(0,r.jsx)(n.code,{children:"_"})," (1\u201332 chars)."]}),"\n",(0,r.jsxs)(n.li,{children:["Custom commands ",(0,r.jsx)(n.strong,{children:"cannot override native commands"}),". Conflicts are ignored and logged."]}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"commands.native"})," is disabled, only custom commands are registered (or cleared if none)."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"limits",children:"Limits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Outbound text is chunked to ",(0,r.jsx)(n.code,{children:"channels.telegram.textChunkLimit"})," (default 4000)."]}),"\n",(0,r.jsxs)(n.li,{children:["Optional newline chunking: set ",(0,r.jsx)(n.code,{children:'channels.telegram.chunkMode="newline"'})," to split on blank lines (paragraph boundaries) before length chunking."]}),"\n",(0,r.jsxs)(n.li,{children:["Media downloads/uploads are capped by ",(0,r.jsx)(n.code,{children:"channels.telegram.mediaMaxMb"})," (default 5)."]}),"\n",(0,r.jsxs)(n.li,{children:["Telegram Bot API requests time out after ",(0,r.jsx)(n.code,{children:"channels.telegram.timeoutSeconds"})," (default 500 via grammY). Set lower to avoid long hangs."]}),"\n",(0,r.jsxs)(n.li,{children:["Group history context uses ",(0,r.jsx)(n.code,{children:"channels.telegram.historyLimit"})," (or ",(0,r.jsx)(n.code,{children:"channels.telegram.accounts.*.historyLimit"}),"), falling back to ",(0,r.jsx)(n.code,{children:"messages.groupChat.historyLimit"}),". Set ",(0,r.jsx)(n.code,{children:"0"})," to disable (default 50)."]}),"\n",(0,r.jsxs)(n.li,{children:["DM history can be limited with ",(0,r.jsx)(n.code,{children:"channels.telegram.dmHistoryLimit"})," (user turns). Per-user overrides: ",(0,r.jsx)(n.code,{children:'channels.telegram.dms["<user_id>"].historyLimit'}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"group-activation-modes",children:"Group activation modes"}),"\n",(0,r.jsxs)(n.p,{children:["By default, the bot only responds to mentions in groups (",(0,r.jsx)(n.code,{children:"@botname"})," or patterns in ",(0,r.jsx)(n.code,{children:"agents.list[].groupChat.mentionPatterns"}),"). To change this behavior:"]}),"\n",(0,r.jsx)(n.h3,{id:"via-config-recommended",children:"Via config (recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      groups: {\n        "-1001234567890": { requireMention: false }  // always respond in this group\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important:"})," Setting ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"})," creates an ",(0,r.jsx)(n.strong,{children:"allowlist"})," - only listed groups (or ",(0,r.jsx)(n.code,{children:'"*"'}),") will be accepted.\nForum topics inherit their parent group config (allowFrom, requireMention, skills, prompts) unless you add per-topic overrides under ",(0,r.jsx)(n.code,{children:"channels.telegram.groups.<groupId>.topics.<topicId>"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"To allow all groups with always-respond:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      groups: {\n        "*": { requireMention: false }  // all groups, always respond\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"To keep mention-only for all groups (default behavior):"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      groups: {\n        "*": { requireMention: true }  // or omit groups entirely\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"via-command-session-level",children:"Via command (session-level)"}),"\n",(0,r.jsx)(n.p,{children:"Send in the group:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/activation always"})," - respond to all messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/activation mention"})," - require mentions (default)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," Commands update session state only. For persistent behavior across restarts, use config."]}),"\n",(0,r.jsx)(n.h3,{id:"getting-the-group-chat-id",children:"Getting the group chat ID"}),"\n",(0,r.jsxs)(n.p,{children:["Forward any message from the group to ",(0,r.jsx)(n.code,{children:"@userinfobot"})," or ",(0,r.jsx)(n.code,{children:"@getidsbot"})," on Telegram to see the chat ID (negative number like ",(0,r.jsx)(n.code,{children:"-1001234567890"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tip:"})," For your own user ID, DM the bot and it will reply with your user ID (pairing message), or use ",(0,r.jsx)(n.code,{children:"/whoami"})," once commands are enabled."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Privacy note:"})," ",(0,r.jsx)(n.code,{children:"@userinfobot"})," is a third-party bot. If you prefer, add the bot to the group, send a message, and use ",(0,r.jsx)(n.code,{children:"moltbot logs --follow"})," to read ",(0,r.jsx)(n.code,{children:"chat.id"}),", or use the Bot API ",(0,r.jsx)(n.code,{children:"getUpdates"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"config-writes",children:"Config writes"}),"\n",(0,r.jsxs)(n.p,{children:["By default, Telegram is allowed to write config updates triggered by channel events or ",(0,r.jsx)(n.code,{children:"/config set|unset"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"This happens when:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["A group is upgraded to a supergroup and Telegram emits ",(0,r.jsx)(n.code,{children:"migrate_to_chat_id"})," (chat ID changes). Moltbot can migrate ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"})," automatically."]}),"\n",(0,r.jsxs)(n.li,{children:["You run ",(0,r.jsx)(n.code,{children:"/config set"})," or ",(0,r.jsx)(n.code,{children:"/config unset"})," in a Telegram chat (requires ",(0,r.jsx)(n.code,{children:"commands.config: true"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Disable with:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:"{\n  channels: { telegram: { configWrites: false } }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"topics-forum-supergroups",children:"Topics (forum supergroups)"}),"\n",(0,r.jsxs)(n.p,{children:["Telegram forum topics include a ",(0,r.jsx)(n.code,{children:"message_thread_id"})," per message. Moltbot:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Appends ",(0,r.jsx)(n.code,{children:":topic:<threadId>"})," to the Telegram group session key so each topic is isolated."]}),"\n",(0,r.jsxs)(n.li,{children:["Sends typing indicators and replies with ",(0,r.jsx)(n.code,{children:"message_thread_id"})," so responses stay in the topic."]}),"\n",(0,r.jsxs)(n.li,{children:["General topic (thread id ",(0,r.jsx)(n.code,{children:"1"}),") is special: message sends omit ",(0,r.jsx)(n.code,{children:"message_thread_id"})," (Telegram rejects it), but typing indicators still include it."]}),"\n",(0,r.jsxs)(n.li,{children:["Exposes ",(0,r.jsx)(n.code,{children:"MessageThreadId"})," + ",(0,r.jsx)(n.code,{children:"IsForum"})," in template context for routing/templating."]}),"\n",(0,r.jsxs)(n.li,{children:["Topic-specific configuration is available under ",(0,r.jsx)(n.code,{children:"channels.telegram.groups.<chatId>.topics.<threadId>"})," (skills, allowlists, auto-reply, system prompts, disable)."]}),"\n",(0,r.jsx)(n.li,{children:"Topic configs inherit group settings (requireMention, allowlists, skills, prompts, enabled) unless overridden per topic."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Private chats can include ",(0,r.jsx)(n.code,{children:"message_thread_id"})," in some edge cases. Moltbot keeps the DM session key unchanged, but still uses the thread id for replies/draft streaming when it is present."]}),"\n",(0,r.jsx)(n.h2,{id:"inline-buttons",children:"Inline Buttons"}),"\n",(0,r.jsx)(n.p,{children:"Telegram supports inline keyboards with callback buttons."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "channels": {\n    "telegram": {\n      "capabilities": {\n        "inlineButtons": "allowlist"\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"For per-account configuration:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "channels": {\n    "telegram": {\n      "accounts": {\n        "main": {\n          "capabilities": {\n            "inlineButtons": "allowlist"\n          }\n        }\n      }\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Scopes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"off"})," \u2014 inline buttons disabled"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"dm"})," \u2014 only DMs (group targets blocked)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"group"})," \u2014 only groups (DM targets blocked)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"all"})," \u2014 DMs + groups"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"allowlist"})," \u2014 DMs + groups, but only senders allowed by ",(0,r.jsx)(n.code,{children:"allowFrom"}),"/",(0,r.jsx)(n.code,{children:"groupAllowFrom"})," (same rules as control commands)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Default: ",(0,r.jsx)(n.code,{children:"allowlist"}),".\nLegacy: ",(0,r.jsx)(n.code,{children:'capabilities: ["inlineButtons"]'})," = ",(0,r.jsx)(n.code,{children:'inlineButtons: "all"'}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"sending-buttons",children:"Sending buttons"}),"\n",(0,r.jsxs)(n.p,{children:["Use the message tool with the ",(0,r.jsx)(n.code,{children:"buttons"})," parameter:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "action": "send",\n  "channel": "telegram",\n  "to": "123456789",\n  "message": "Choose an option:",\n  "buttons": [\n    [\n      {"text": "Yes", "callback_data": "yes"},\n      {"text": "No", "callback_data": "no"}\n    ],\n    [\n      {"text": "Cancel", "callback_data": "cancel"}\n    ]\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["When a user clicks a button, the callback data is sent back to the agent as a message with the format:\n",(0,r.jsx)(n.code,{children:"callback_data: value"})]}),"\n",(0,r.jsx)(n.h3,{id:"configuration-options",children:"Configuration options"}),"\n",(0,r.jsx)(n.p,{children:"Telegram capabilities can be configured at two levels (object form shown above; legacy string arrays still supported):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.capabilities"}),": Global default capability config applied to all Telegram accounts unless overridden."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.accounts.<account>.capabilities"}),": Per-account capabilities that override the global defaults for that specific account."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Use the global setting when all Telegram bots/accounts should behave the same. Use per-account configuration when different bots need different behaviors (for example, one account only handles DMs while another is allowed in groups)."}),"\n",(0,r.jsx)(n.h2,{id:"access-control-dms--groups",children:"Access control (DMs + groups)"}),"\n",(0,r.jsx)(n.h3,{id:"dm-access",children:"DM access"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Default: ",(0,r.jsx)(n.code,{children:'channels.telegram.dmPolicy = "pairing"'}),". Unknown senders receive a pairing code; messages are ignored until approved (codes expire after 1 hour)."]}),"\n",(0,r.jsxs)(n.li,{children:["Approve via:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"moltbot pairing list telegram"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"moltbot pairing approve telegram <CODE>"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Pairing is the default token exchange used for Telegram DMs. Details: ",(0,r.jsx)(n.a,{href:"/start/pairing",children:"Pairing"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.allowFrom"})," accepts numeric user IDs (recommended) or ",(0,r.jsx)(n.code,{children:"@username"})," entries. It is ",(0,r.jsx)(n.strong,{children:"not"})," the bot username; use the human sender\u2019s ID. The wizard accepts ",(0,r.jsx)(n.code,{children:"@username"})," and resolves it to the numeric ID when possible."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"finding-your-telegram-user-id",children:"Finding your Telegram user ID"}),"\n",(0,r.jsx)(n.p,{children:"Safer (no third-party bot):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Start the gateway and DM your bot."}),"\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"moltbot logs --follow"})," and look for ",(0,r.jsx)(n.code,{children:"from.id"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Alternate (official Bot API):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"DM your bot."}),"\n",(0,r.jsxs)(n.li,{children:["Fetch updates with your bot token and read ",(0,r.jsx)(n.code,{children:"message.from.id"}),":\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'curl "https://api.telegram.org/bot<bot_token>/getUpdates"\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Third-party (less private):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["DM ",(0,r.jsx)(n.code,{children:"@userinfobot"})," or ",(0,r.jsx)(n.code,{children:"@getidsbot"})," and use the returned user id."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"group-access",children:"Group access"}),"\n",(0,r.jsx)(n.p,{children:"Two independent controls:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"1. Which groups are allowed"})," (group allowlist via ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["No ",(0,r.jsx)(n.code,{children:"groups"})," config = all groups allowed"]}),"\n",(0,r.jsxs)(n.li,{children:["With ",(0,r.jsx)(n.code,{children:"groups"})," config = only listed groups or ",(0,r.jsx)(n.code,{children:'"*"'})," are allowed"]}),"\n",(0,r.jsxs)(n.li,{children:["Example: ",(0,r.jsx)(n.code,{children:'"groups": { "-1001234567890": {}, "*": {} }'})," allows all groups"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"2. Which senders are allowed"})," (sender filtering via ",(0,r.jsx)(n.code,{children:"channels.telegram.groupPolicy"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"open"'})," = all senders in allowed groups can message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"allowlist"'})," = only senders in ",(0,r.jsx)(n.code,{children:"channels.telegram.groupAllowFrom"})," can message"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"disabled"'})," = no group messages accepted at all\nDefault is ",(0,r.jsx)(n.code,{children:'groupPolicy: "allowlist"'})," (blocked unless you add ",(0,r.jsx)(n.code,{children:"groupAllowFrom"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Most users want: ",(0,r.jsx)(n.code,{children:'groupPolicy: "allowlist"'})," + ",(0,r.jsx)(n.code,{children:"groupAllowFrom"})," + specific groups listed in ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"})]}),"\n",(0,r.jsx)(n.h2,{id:"long-polling-vs-webhook",children:"Long-polling vs webhook"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Default: long-polling (no public URL required)."}),"\n",(0,r.jsxs)(n.li,{children:["Webhook mode: set ",(0,r.jsx)(n.code,{children:"channels.telegram.webhookUrl"})," (optionally ",(0,r.jsx)(n.code,{children:"channels.telegram.webhookSecret"})," + ",(0,r.jsx)(n.code,{children:"channels.telegram.webhookPath"}),").\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The local listener binds to ",(0,r.jsx)(n.code,{children:"0.0.0.0:8787"})," and serves ",(0,r.jsx)(n.code,{children:"POST /telegram-webhook"})," by default."]}),"\n",(0,r.jsxs)(n.li,{children:["If your public URL is different, use a reverse proxy and point ",(0,r.jsx)(n.code,{children:"channels.telegram.webhookUrl"})," at the public endpoint."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"reply-threading",children:"Reply threading"}),"\n",(0,r.jsx)(n.p,{children:"Telegram supports optional threaded replies via tags:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[[reply_to_current]]"})," -- reply to the triggering message."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[[reply_to:<id>]]"})," -- reply to a specific message id."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Controlled by ",(0,r.jsx)(n.code,{children:"channels.telegram.replyToMode"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"first"})," (default), ",(0,r.jsx)(n.code,{children:"all"}),", ",(0,r.jsx)(n.code,{children:"off"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"audio-messages-voice-vs-file",children:"Audio messages (voice vs file)"}),"\n",(0,r.jsxs)(n.p,{children:["Telegram distinguishes ",(0,r.jsx)(n.strong,{children:"voice notes"})," (round bubble) from ",(0,r.jsx)(n.strong,{children:"audio files"})," (metadata card).\nMoltbot defaults to audio files for backward compatibility."]}),"\n",(0,r.jsx)(n.p,{children:"To force a voice note bubble in agent replies, include this tag anywhere in the reply:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"[[audio_as_voice]]"})," \u2014 send audio as a voice note instead of a file."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The tag is stripped from the delivered text. Other channels ignore this tag."}),"\n",(0,r.jsxs)(n.p,{children:["For message tool sends, set ",(0,r.jsx)(n.code,{children:"asVoice: true"})," with a voice-compatible audio ",(0,r.jsx)(n.code,{children:"media"})," URL\n(",(0,r.jsx)(n.code,{children:"message"})," is optional when media is present):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "action": "send",\n  "channel": "telegram",\n  "to": "123456789",\n  "media": "https://example.com/voice.ogg",\n  "asVoice": true\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"stickers",children:"Stickers"}),"\n",(0,r.jsx)(n.p,{children:"Moltbot supports receiving and sending Telegram stickers with intelligent caching."}),"\n",(0,r.jsx)(n.h3,{id:"receiving-stickers",children:"Receiving stickers"}),"\n",(0,r.jsx)(n.p,{children:"When a user sends a sticker, Moltbot handles it based on the sticker type:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Static stickers (WEBP):"})," Downloaded and processed through vision. The sticker appears as a ",(0,r.jsx)(n.code,{children:"<media:sticker>"})," placeholder in the message content."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Animated stickers (TGS):"})," Skipped (Lottie format not supported for processing)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Video stickers (WEBM):"})," Skipped (video format not supported for processing)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Template context field available when receiving stickers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"Sticker"})," \u2014 object with:\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"emoji"})," \u2014 emoji associated with the sticker"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"setName"})," \u2014 name of the sticker set"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fileId"})," \u2014 Telegram file ID (send the same sticker back)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fileUniqueId"})," \u2014 stable ID for cache lookup"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cachedDescription"})," \u2014 cached vision description when available"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"sticker-cache",children:"Sticker cache"}),"\n",(0,r.jsx)(n.p,{children:"Stickers are processed through the AI's vision capabilities to generate descriptions. Since the same stickers are often sent repeatedly, Moltbot caches these descriptions to avoid redundant API calls."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"How it works:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"First encounter:"}),' The sticker image is sent to the AI for vision analysis. The AI generates a description (e.g., "A cartoon cat waving enthusiastically").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cache storage:"})," The description is saved along with the sticker's file ID, emoji, and set name."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Subsequent encounters:"})," When the same sticker is seen again, the cached description is used directly. The image is not sent to the AI."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cache location:"})," ",(0,r.jsx)(n.code,{children:"~/.clawdbot/telegram/sticker-cache.json"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cache entry format:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "fileId": "CAACAgIAAxkBAAI...",\n  "fileUniqueId": "AgADBAADb6cxG2Y",\n  "emoji": "\ud83d\udc4b",\n  "setName": "CoolCats",\n  "description": "A cartoon cat waving enthusiastically",\n  "cachedAt": "2026-01-15T10:30:00.000Z"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reduces API costs by avoiding repeated vision calls for the same sticker"}),"\n",(0,r.jsx)(n.li,{children:"Faster response times for cached stickers (no vision processing delay)"}),"\n",(0,r.jsx)(n.li,{children:"Enables sticker search functionality based on cached descriptions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The cache is populated automatically as stickers are received. There is no manual cache management required."}),"\n",(0,r.jsx)(n.h3,{id:"sending-stickers",children:"Sending stickers"}),"\n",(0,r.jsxs)(n.p,{children:["The agent can send and search stickers using the ",(0,r.jsx)(n.code,{children:"sticker"})," and ",(0,r.jsx)(n.code,{children:"sticker-search"})," actions. These are disabled by default and must be enabled in config:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:"{\n  channels: {\n    telegram: {\n      actions: {\n        sticker: true\n      }\n    }\n  }\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Send a sticker:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "action": "sticker",\n  "channel": "telegram",\n  "to": "123456789",\n  "fileId": "CAACAgIAAxkBAAI..."\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Parameters:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"fileId"})," (required) \u2014 the Telegram file ID of the sticker. Obtain this from ",(0,r.jsx)(n.code,{children:"Sticker.fileId"})," when receiving a sticker, or from a ",(0,r.jsx)(n.code,{children:"sticker-search"})," result."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"replyTo"})," (optional) \u2014 message ID to reply to."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"threadId"})," (optional) \u2014 message thread ID for forum topics."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Search for stickers:"})}),"\n",(0,r.jsx)(n.p,{children:"The agent can search cached stickers by description, emoji, or set name:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "action": "sticker-search",\n  "channel": "telegram",\n  "query": "cat waving",\n  "limit": 5\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Returns matching stickers from the cache:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "ok": true,\n  "count": 2,\n  "stickers": [\n    {\n      "fileId": "CAACAgIAAxkBAAI...",\n      "emoji": "\ud83d\udc4b",\n      "description": "A cartoon cat waving enthusiastically",\n      "setName": "CoolCats"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"The search uses fuzzy matching across description text, emoji characters, and set names."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example with threading:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  "action": "sticker",\n  "channel": "telegram",\n  "to": "-1001234567890",\n  "fileId": "CAACAgIAAxkBAAI...",\n  "replyTo": 42,\n  "threadId": 123\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"streaming-drafts",children:"Streaming (drafts)"}),"\n",(0,r.jsxs)(n.p,{children:["Telegram can stream ",(0,r.jsx)(n.strong,{children:"draft bubbles"})," while the agent is generating a response.\nMoltbot uses Bot API ",(0,r.jsx)(n.code,{children:"sendMessageDraft"})," (not real messages) and then sends the\nfinal reply as a normal message."]}),"\n",(0,r.jsx)(n.p,{children:"Requirements (Telegram Bot API 9.3+):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Private chats with topics enabled"})," (forum topic mode for the bot)."]}),"\n",(0,r.jsxs)(n.li,{children:["Incoming messages must include ",(0,r.jsx)(n.code,{children:"message_thread_id"})," (private topic thread)."]}),"\n",(0,r.jsx)(n.li,{children:"Streaming is ignored for groups/supergroups/channels."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Config:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'channels.telegram.streamMode: "off" | "partial" | "block"'})," (default: ",(0,r.jsx)(n.code,{children:"partial"}),")\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"partial"}),": update the draft bubble with the latest streaming text."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"block"}),": update the draft bubble in larger blocks (chunked)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"off"}),": disable draft streaming."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Optional (only for ",(0,r.jsx)(n.code,{children:'streamMode: "block"'}),"):\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.draftChunk: { minChars?, maxChars?, breakPreference? }"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["defaults: ",(0,r.jsx)(n.code,{children:"minChars: 200"}),", ",(0,r.jsx)(n.code,{children:"maxChars: 800"}),", ",(0,r.jsx)(n.code,{children:'breakPreference: "paragraph"'})," (clamped to ",(0,r.jsx)(n.code,{children:"channels.telegram.textChunkLimit"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Note: draft streaming is separate from ",(0,r.jsx)(n.strong,{children:"block streaming"})," (channel messages).\nBlock streaming is off by default and requires ",(0,r.jsx)(n.code,{children:"channels.telegram.blockStreaming: true"}),"\nif you want early Telegram messages instead of draft updates."]}),"\n",(0,r.jsx)(n.p,{children:"Reasoning stream (Telegram only):"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/reasoning stream"})," streams reasoning into the draft bubble while the reply is\ngenerating, then sends the final answer without reasoning."]}),"\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"channels.telegram.streamMode"})," is ",(0,r.jsx)(n.code,{children:"off"}),", reasoning stream is disabled.\nMore context: ",(0,r.jsx)(n.a,{href:"/concepts/streaming",children:"Streaming + chunking"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"retry-policy",children:"Retry policy"}),"\n",(0,r.jsxs)(n.p,{children:["Outbound Telegram API calls retry on transient network/429 errors with exponential backoff and jitter. Configure via ",(0,r.jsx)(n.code,{children:"channels.telegram.retry"}),". See ",(0,r.jsx)(n.a,{href:"/concepts/retry",children:"Retry policy"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"agent-tool-messages--reactions",children:"Agent tool (messages + reactions)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Tool: ",(0,r.jsx)(n.code,{children:"telegram"})," with ",(0,r.jsx)(n.code,{children:"sendMessage"})," action (",(0,r.jsx)(n.code,{children:"to"}),", ",(0,r.jsx)(n.code,{children:"content"}),", optional ",(0,r.jsx)(n.code,{children:"mediaUrl"}),", ",(0,r.jsx)(n.code,{children:"replyToMessageId"}),", ",(0,r.jsx)(n.code,{children:"messageThreadId"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Tool: ",(0,r.jsx)(n.code,{children:"telegram"})," with ",(0,r.jsx)(n.code,{children:"react"})," action (",(0,r.jsx)(n.code,{children:"chatId"}),", ",(0,r.jsx)(n.code,{children:"messageId"}),", ",(0,r.jsx)(n.code,{children:"emoji"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Tool: ",(0,r.jsx)(n.code,{children:"telegram"})," with ",(0,r.jsx)(n.code,{children:"deleteMessage"})," action (",(0,r.jsx)(n.code,{children:"chatId"}),", ",(0,r.jsx)(n.code,{children:"messageId"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Reaction removal semantics: see ",(0,r.jsx)(n.a,{href:"/tools/reactions",children:"/tools/reactions"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Tool gating: ",(0,r.jsx)(n.code,{children:"channels.telegram.actions.reactions"}),", ",(0,r.jsx)(n.code,{children:"channels.telegram.actions.sendMessage"}),", ",(0,r.jsx)(n.code,{children:"channels.telegram.actions.deleteMessage"})," (default: enabled), and ",(0,r.jsx)(n.code,{children:"channels.telegram.actions.sticker"})," (default: disabled)."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"reaction-notifications",children:"Reaction notifications"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"How reactions work:"}),"\nTelegram reactions arrive as ",(0,r.jsxs)(n.strong,{children:["separate ",(0,r.jsx)(n.code,{children:"message_reaction"})," events"]}),", not as properties in message payloads. When a user adds a reaction, Moltbot:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Receives the ",(0,r.jsx)(n.code,{children:"message_reaction"})," update from Telegram API"]}),"\n",(0,r.jsxs)(n.li,{children:["Converts it to a ",(0,r.jsx)(n.strong,{children:"system event"})," with format: ",(0,r.jsx)(n.code,{children:'"Telegram reaction added: {emoji} by {user} on msg {id}"'})]}),"\n",(0,r.jsxs)(n.li,{children:["Enqueues the system event using the ",(0,r.jsx)(n.strong,{children:"same session key"})," as regular messages"]}),"\n",(0,r.jsx)(n.li,{children:"When the next message arrives in that conversation, system events are drained and prepended to the agent's context"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The agent sees reactions as ",(0,r.jsx)(n.strong,{children:"system notifications"})," in the conversation history, not as message metadata."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Configuration:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.reactionNotifications"}),": Controls which reactions trigger notifications"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"off"'})," \u2014 ignore all reactions"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"own"'})," \u2014 notify when users react to bot messages (best-effort; in-memory) (default)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"all"'})," \u2014 notify for all reactions"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.reactionLevel"}),": Controls agent's reaction capability"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"off"'})," \u2014 agent cannot react to messages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"ack"'})," \u2014 bot sends acknowledgment reactions (\ud83d\udc40 while processing) (default)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"minimal"'})," \u2014 agent can react sparingly (guideline: 1 per 5-10 exchanges)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:'"extensive"'})," \u2014 agent can react liberally when appropriate"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Forum groups:"})," Reactions in forum groups include ",(0,r.jsx)(n.code,{children:"message_thread_id"})," and use session keys like ",(0,r.jsx)(n.code,{children:"agent:main:telegram:group:{chatId}:topic:{threadId}"}),". This ensures reactions and messages in the same topic stay together."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Example config:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json5",children:'{\n  channels: {\n    telegram: {\n      reactionNotifications: "all",  // See all reactions\n      reactionLevel: "minimal"        // Agent can react sparingly\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Requirements:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Telegram bots must explicitly request ",(0,r.jsx)(n.code,{children:"message_reaction"})," in ",(0,r.jsx)(n.code,{children:"allowed_updates"})," (configured automatically by Moltbot)"]}),"\n",(0,r.jsxs)(n.li,{children:["For webhook mode, reactions are included in the webhook ",(0,r.jsx)(n.code,{children:"allowed_updates"})]}),"\n",(0,r.jsxs)(n.li,{children:["For polling mode, reactions are included in the ",(0,r.jsx)(n.code,{children:"getUpdates"})," ",(0,r.jsx)(n.code,{children:"allowed_updates"})]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"delivery-targets-clicron",children:"Delivery targets (CLI/cron)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Use a chat id (",(0,r.jsx)(n.code,{children:"123456789"}),") or a username (",(0,r.jsx)(n.code,{children:"@name"}),") as the target."]}),"\n",(0,r.jsxs)(n.li,{children:["Example: ",(0,r.jsx)(n.code,{children:'moltbot message send --channel telegram --target 123456789 --message "hi"'}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting-1",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Bot doesn\u2019t respond to non-mention messages in a group:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If you set ",(0,r.jsx)(n.code,{children:"channels.telegram.groups.*.requireMention=false"}),", Telegram\u2019s Bot API ",(0,r.jsx)(n.strong,{children:"privacy mode"})," must be disabled.\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["BotFather: ",(0,r.jsx)(n.code,{children:"/setprivacy"})," \u2192 ",(0,r.jsx)(n.strong,{children:"Disable"})," (then remove + re-add the bot to the group)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"moltbot channels status"})," shows a warning when config expects unmentioned group messages."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"moltbot channels status --probe"})," can additionally check membership for explicit numeric group IDs (it can\u2019t audit wildcard ",(0,r.jsx)(n.code,{children:'"*"'})," rules)."]}),"\n",(0,r.jsxs)(n.li,{children:["Quick test: ",(0,r.jsx)(n.code,{children:"/activation always"})," (session-only; use config for persistence)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Bot not seeing group messages at all:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["If ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"})," is set, the group must be listed or use ",(0,r.jsx)(n.code,{children:'"*"'})]}),"\n",(0,r.jsxs)(n.li,{children:['Check Privacy Settings in @BotFather \u2192 "Group Privacy" should be ',(0,r.jsx)(n.strong,{children:"OFF"})]}),"\n",(0,r.jsx)(n.li,{children:"Verify bot is actually a member (not just an admin with no read access)"}),"\n",(0,r.jsxs)(n.li,{children:["Check gateway logs: ",(0,r.jsx)(n.code,{children:"moltbot logs --follow"}),' (look for "skipping group message")']}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Bot responds to mentions but not ",(0,r.jsx)(n.code,{children:"/activation always"}),":"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["The ",(0,r.jsx)(n.code,{children:"/activation"})," command updates session state but doesn't persist to config"]}),"\n",(0,r.jsxs)(n.li,{children:["For persistent behavior, add group to ",(0,r.jsx)(n.code,{children:"channels.telegram.groups"})," with ",(0,r.jsx)(n.code,{children:"requireMention: false"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Commands like ",(0,r.jsx)(n.code,{children:"/status"})," don't work:"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Make sure your Telegram user ID is authorized (via pairing or ",(0,r.jsx)(n.code,{children:"channels.telegram.allowFrom"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Commands require authorization even in groups with ",(0,r.jsx)(n.code,{children:'groupPolicy: "open"'})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Long-polling aborts immediately on Node 22+ (often with proxies/custom fetch):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Node 22+ is stricter about ",(0,r.jsx)(n.code,{children:"AbortSignal"})," instances; foreign signals can abort ",(0,r.jsx)(n.code,{children:"fetch"})," calls right away."]}),"\n",(0,r.jsx)(n.li,{children:"Upgrade to a Moltbot build that normalizes abort signals, or run the gateway on Node 20 until you can upgrade."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["Bot starts, then silently stops responding (or logs ",(0,r.jsx)(n.code,{children:"HttpError: Network request ... failed"}),"):"]})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Some hosts resolve ",(0,r.jsx)(n.code,{children:"api.telegram.org"})," to IPv6 first. If your server does not have working IPv6 egress, grammY can get stuck on IPv6-only requests."]}),"\n",(0,r.jsxs)(n.li,{children:["Fix by enabling IPv6 egress ",(0,r.jsx)(n.strong,{children:"or"})," forcing IPv4 resolution for ",(0,r.jsx)(n.code,{children:"api.telegram.org"})," (for example, add an ",(0,r.jsx)(n.code,{children:"/etc/hosts"})," entry using the IPv4 A record, or prefer IPv4 in your OS DNS stack), then restart the gateway."]}),"\n",(0,r.jsxs)(n.li,{children:["Quick check: ",(0,r.jsx)(n.code,{children:"dig +short api.telegram.org A"})," and ",(0,r.jsx)(n.code,{children:"dig +short api.telegram.org AAAA"})," to confirm what DNS returns."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"configuration-reference-telegram",children:"Configuration reference (Telegram)"}),"\n",(0,r.jsxs)(n.p,{children:["Full configuration: ",(0,r.jsx)(n.a,{href:"/gateway/configuration",children:"Configuration"})]}),"\n",(0,r.jsx)(n.p,{children:"Provider options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.enabled"}),": enable/disable channel startup."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.botToken"}),": bot token (BotFather)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.tokenFile"}),": read token from file path."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.dmPolicy"}),": ",(0,r.jsx)(n.code,{children:"pairing | allowlist | open | disabled"})," (default: pairing)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.allowFrom"}),": DM allowlist (ids/usernames). ",(0,r.jsx)(n.code,{children:"open"})," requires ",(0,r.jsx)(n.code,{children:'"*"'}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groupPolicy"}),": ",(0,r.jsx)(n.code,{children:"open | allowlist | disabled"})," (default: allowlist)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groupAllowFrom"}),": group sender allowlist (ids/usernames)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups"}),": per-group defaults + allowlist (use ",(0,r.jsx)(n.code,{children:'"*"'})," for global defaults).\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.requireMention"}),": mention gating default."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.skills"}),": skill filter (omit = all skills, empty = none)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.allowFrom"}),": per-group sender allowlist override."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.systemPrompt"}),": extra system prompt for the group."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.enabled"}),": disable the group when ",(0,r.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.topics.<threadId>.*"}),": per-topic overrides (same fields as group)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.groups.<id>.topics.<threadId>.requireMention"}),": per-topic mention gating override."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.capabilities.inlineButtons"}),": ",(0,r.jsx)(n.code,{children:"off | dm | group | all | allowlist"})," (default: allowlist)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.accounts.<account>.capabilities.inlineButtons"}),": per-account override."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.replyToMode"}),": ",(0,r.jsx)(n.code,{children:"off | first | all"})," (default: ",(0,r.jsx)(n.code,{children:"first"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.textChunkLimit"}),": outbound chunk size (chars)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.chunkMode"}),": ",(0,r.jsx)(n.code,{children:"length"})," (default) or ",(0,r.jsx)(n.code,{children:"newline"})," to split on blank lines (paragraph boundaries) before length chunking."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.linkPreview"}),": toggle link previews for outbound messages (default: true)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.streamMode"}),": ",(0,r.jsx)(n.code,{children:"off | partial | block"})," (draft streaming)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.mediaMaxMb"}),": inbound/outbound media cap (MB)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.retry"}),": retry policy for outbound Telegram API calls (attempts, minDelayMs, maxDelayMs, jitter)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.network.autoSelectFamily"}),": override Node autoSelectFamily (true=enable, false=disable). Defaults to disabled on Node 22 to avoid Happy Eyeballs timeouts."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.proxy"}),": proxy URL for Bot API calls (SOCKS/HTTP)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.webhookUrl"}),": enable webhook mode."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.webhookSecret"}),": webhook secret (optional)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.webhookPath"}),": local webhook path (default ",(0,r.jsx)(n.code,{children:"/telegram-webhook"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.actions.reactions"}),": gate Telegram tool reactions."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.actions.sendMessage"}),": gate Telegram tool message sends."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.actions.deleteMessage"}),": gate Telegram tool message deletes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.actions.sticker"}),": gate Telegram sticker actions \u2014 send and search (default: false)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.reactionNotifications"}),": ",(0,r.jsx)(n.code,{children:"off | own | all"})," \u2014 control which reactions trigger system events (default: ",(0,r.jsx)(n.code,{children:"own"})," when not set)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"channels.telegram.reactionLevel"}),": ",(0,r.jsx)(n.code,{children:"off | ack | minimal | extensive"})," \u2014 control agent's reaction capability (default: ",(0,r.jsx)(n.code,{children:"minimal"})," when not set)."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Related global options:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"agents.list[].groupChat.mentionPatterns"})," (mention gating patterns)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"messages.groupChat.mentionPatterns"})," (global fallback)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"commands.native"})," (defaults to ",(0,r.jsx)(n.code,{children:'"auto"'})," \u2192 on for Telegram/Discord, off for Slack), ",(0,r.jsx)(n.code,{children:"commands.text"}),", ",(0,r.jsx)(n.code,{children:"commands.useAccessGroups"})," (command behavior). Override with ",(0,r.jsx)(n.code,{children:"channels.telegram.commands.native"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"messages.responsePrefix"}),", ",(0,r.jsx)(n.code,{children:"messages.ackReaction"}),", ",(0,r.jsx)(n.code,{children:"messages.ackReactionScope"}),", ",(0,r.jsx)(n.code,{children:"messages.removeAckAfterReply"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453(e,n,s){s.d(n,{R:()=>o,x:()=>c});var i=s(96540);const r={},l=i.createContext(r);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);