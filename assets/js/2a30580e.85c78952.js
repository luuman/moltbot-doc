"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[9507],{89487(n,e,s){s.r(e),s.d(e,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"platforms/ios","title":"iOS \u5e94\u7528 (\u8282\u70b9)","description":"\u53ef\u7528\u6027: \u5185\u90e8\u9884\u89c8\u3002iOS \u5e94\u7528\u5c1a\u672a\u516c\u5f00\u5206\u53d1\u3002","source":"@site/content/moltbot/docs/platforms/ios.md","sourceDirName":"platforms","slug":"/platforms/ios","permalink":"/moltbot-doc/docs/platforms/ios","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"iOS node app: connect to the Gateway, pairing, canvas, and troubleshooting","read_when":["Pairing or reconnecting the iOS node","Running the iOS app from source","Debugging gateway discovery or canvas commands"]}}');var l=s(74848),a=s(28453);const o={summary:"iOS node app: connect to the Gateway, pairing, canvas, and troubleshooting",read_when:["Pairing or reconnecting the iOS node","Running the iOS app from source","Debugging gateway discovery or canvas commands"]},c="iOS \u5e94\u7528 (\u8282\u70b9)",r={},d=[{value:"\u5b83\u7684\u529f\u80fd",id:"\u5b83\u7684\u529f\u80fd",level:2},{value:"\u8981\u6c42",id:"\u8981\u6c42",level:2},{value:"\u5feb\u901f\u5f00\u59cb (\u914d\u5bf9 + \u8fde\u63a5)",id:"\u5feb\u901f\u5f00\u59cb-\u914d\u5bf9--\u8fde\u63a5",level:2},{value:"\u53d1\u73b0\u8def\u5f84",id:"\u53d1\u73b0\u8def\u5f84",level:2},{value:"Bonjour (\u5c40\u57df\u7f51)",id:"bonjour-\u5c40\u57df\u7f51",level:3},{value:"\u5c3e\u7f51 (\u8de8\u7f51\u7edc)",id:"\u5c3e\u7f51-\u8de8\u7f51\u7edc",level:3},{value:"\u624b\u52a8\u4e3b\u673a/\u7aef\u53e3",id:"\u624b\u52a8\u4e3b\u673a\u7aef\u53e3",level:3},{value:"Canvas + A2UI",id:"canvas--a2ui",level:2},{value:"Canvas eval / snapshot",id:"canvas-eval--snapshot",level:3},{value:"\u8bed\u97f3\u5524\u9192 + \u901a\u8bdd\u6a21\u5f0f",id:"\u8bed\u97f3\u5524\u9192--\u901a\u8bdd\u6a21\u5f0f",level:2},{value:"\u5e38\u89c1\u9519\u8bef",id:"\u5e38\u89c1\u9519\u8bef",level:2},{value:"\u76f8\u5173\u6587\u6863",id:"\u76f8\u5173\u6587\u6863",level:2}];function t(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"ios-\u5e94\u7528-\u8282\u70b9",children:"iOS \u5e94\u7528 (\u8282\u70b9)"})}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u7528\u6027: \u5185\u90e8\u9884\u89c8\u3002iOS \u5e94\u7528\u5c1a\u672a\u516c\u5f00\u5206\u53d1\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u5b83\u7684\u529f\u80fd",children:"\u5b83\u7684\u529f\u80fd"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u901a\u8fc7 WebSocket \u8fde\u63a5\u5230\u7f51\u5173 (\u5c40\u57df\u7f51\u6216\u5c3e\u7f51)\u3002"}),"\n",(0,l.jsx)(e.li,{children:"\u66b4\u9732\u8282\u70b9\u529f\u80fd: Canvas\u3001\u5c4f\u5e55\u5feb\u7167\u3001\u76f8\u673a\u6355\u6349\u3001\u4f4d\u7f6e\u3001\u901a\u8bdd\u6a21\u5f0f\u3001\u8bed\u97f3\u5524\u9192\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u63a5\u6536 ",(0,l.jsx)(e.code,{children:"node.invoke"})," \u547d\u4ee4\u5e76\u62a5\u544a\u8282\u70b9\u72b6\u6001\u4e8b\u4ef6\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u8981\u6c42",children:"\u8981\u6c42"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u5728\u53e6\u4e00\u53f0\u8bbe\u5907\u4e0a\u8fd0\u884c\u7684\u7f51\u5173 (macOS\u3001Linux \u6216\u901a\u8fc7 WSL2 \u7684 Windows)\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u7f51\u7edc\u8def\u5f84:\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u901a\u8fc7 Bonjour \u7684\u540c\u4e00\u5c40\u57df\u7f51\uff0c",(0,l.jsx)(e.strong,{children:"\u6216"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u901a\u8fc7\u5355\u64ad DNS-SD (",(0,l.jsx)(e.code,{children:"moltbot.internal."}),") \u7684\u5c3e\u7f51\uff0c",(0,l.jsx)(e.strong,{children:"\u6216"})]}),"\n",(0,l.jsx)(e.li,{children:"\u624b\u52a8\u4e3b\u673a/\u7aef\u53e3 (\u5907\u7528)\u3002"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5feb\u901f\u5f00\u59cb-\u914d\u5bf9--\u8fde\u63a5",children:"\u5feb\u901f\u5f00\u59cb (\u914d\u5bf9 + \u8fde\u63a5)"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u542f\u52a8\u7f51\u5173:"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"moltbot gateway --port 18789\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5728 iOS \u5e94\u7528\u4e2d\uff0c\u6253\u5f00\u8bbe\u7f6e\u5e76\u9009\u62e9\u4e00\u4e2a\u53d1\u73b0\u7684\u7f51\u5173 (\u6216\u542f\u7528\u624b\u52a8\u4e3b\u673a\u5e76\u8f93\u5165\u4e3b\u673a/\u7aef\u53e3)\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5728\u7f51\u5173\u4e3b\u673a\u4e0a\u6279\u51c6\u914d\u5bf9\u8bf7\u6c42:"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"moltbot nodes pending\nmoltbot nodes approve <requestId>\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"4",children:["\n",(0,l.jsx)(e.li,{children:"\u9a8c\u8bc1\u8fde\u63a5:"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'moltbot nodes status\nmoltbot gateway call node.list --params "{}"\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u53d1\u73b0\u8def\u5f84",children:"\u53d1\u73b0\u8def\u5f84"}),"\n",(0,l.jsx)(e.h3,{id:"bonjour-\u5c40\u57df\u7f51",children:"Bonjour (\u5c40\u57df\u7f51)"}),"\n",(0,l.jsxs)(e.p,{children:["\u7f51\u5173\u5728 ",(0,l.jsx)(e.code,{children:"local."})," \u4e0a\u5e7f\u64ad ",(0,l.jsx)(e.code,{children:"_moltbot._tcp"}),"\u3002iOS \u5e94\u7528\u81ea\u52a8\u5217\u51fa\u8fd9\u4e9b\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5c3e\u7f51-\u8de8\u7f51\u7edc",children:"\u5c3e\u7f51 (\u8de8\u7f51\u7edc)"}),"\n",(0,l.jsxs)(e.p,{children:["\u5982\u679c mDNS \u88ab\u963b\u6b62\uff0c\u8bf7\u4f7f\u7528\u5355\u64ad DNS-SD \u533a\u57df (\u63a8\u8350\u57df\u540d: ",(0,l.jsx)(e.code,{children:"moltbot.internal."}),") \u548c Tailscale \u5206\u5272 DNS\u3002\n\u8bf7\u53c2\u9605 ",(0,l.jsx)(e.a,{href:"/gateway/bonjour",children:"Bonjour"})," \u7684 CoreDNS \u793a\u4f8b\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u624b\u52a8\u4e3b\u673a\u7aef\u53e3",children:"\u624b\u52a8\u4e3b\u673a/\u7aef\u53e3"}),"\n",(0,l.jsxs)(e.p,{children:["\u5728\u8bbe\u7f6e\u4e2d\uff0c\u542f\u7528",(0,l.jsx)(e.strong,{children:"\u624b\u52a8\u4e3b\u673a"}),"\u5e76\u8f93\u5165\u7f51\u5173\u4e3b\u673a + \u7aef\u53e3 (\u9ed8\u8ba4 ",(0,l.jsx)(e.code,{children:"18789"}),")\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"canvas--a2ui",children:"Canvas + A2UI"}),"\n",(0,l.jsxs)(e.p,{children:["iOS \u8282\u70b9\u6e32\u67d3 WKWebView canvas\u3002\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"node.invoke"})," \u6765\u9a71\u52a8\u5b83:"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'moltbot nodes invoke --node "iOS Node" --command canvas.navigate --params \'{"url":"http://<gateway-host>:18793/__moltbot__/canvas/"}\'\n'})}),"\n",(0,l.jsx)(e.p,{children:"\u8bf4\u660e:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u7f51\u5173 canvas \u4e3b\u673a\u63d0\u4f9b ",(0,l.jsx)(e.code,{children:"/__moltbot__/canvas/"})," \u548c ",(0,l.jsx)(e.code,{children:"/__moltbot__/a2ui/"}),"\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u5f53\u5ba3\u4f20 canvas \u4e3b\u673a URL \u65f6\uff0ciOS \u8282\u70b9\u5728\u8fde\u63a5\u65f6\u81ea\u52a8\u5bfc\u822a\u5230 A2UI\u3002"}),"\n",(0,l.jsxs)(e.li,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"canvas.navigate"})," \u548c ",(0,l.jsx)(e.code,{children:'{"url":""}'})," \u8fd4\u56de\u5185\u7f6e\u811a\u624b\u67b6\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"canvas-eval--snapshot",children:"Canvas eval / snapshot"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'moltbot nodes invoke --node "iOS Node" --command canvas.eval --params \'{"javaScript":"(() => { const {ctx} = window.__moltbot; ctx.clearRect(0,0,innerWidth,innerHeight); ctx.lineWidth=6; ctx.strokeStyle=\\"#ff2d55\\"; ctx.beginPath(); ctx.moveTo(40,40); ctx.lineTo(innerWidth-40, innerHeight-40); ctx.stroke(); return \\"ok\\"; })()"}\'\n'})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'moltbot nodes invoke --node "iOS Node" --command canvas.snapshot --params \'{"maxWidth":900,"format":"jpeg"}\'\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u8bed\u97f3\u5524\u9192--\u901a\u8bdd\u6a21\u5f0f",children:"\u8bed\u97f3\u5524\u9192 + \u901a\u8bdd\u6a21\u5f0f"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u8bed\u97f3\u5524\u9192\u548c\u901a\u8bdd\u6a21\u5f0f\u53ef\u5728\u8bbe\u7f6e\u4e2d\u4f7f\u7528\u3002"}),"\n",(0,l.jsx)(e.li,{children:"iOS \u53ef\u80fd\u4f1a\u6682\u505c\u540e\u53f0\u97f3\u9891\uff1b\u5f53\u5e94\u7528\u672a\u6fc0\u6d3b\u65f6\uff0c\u5c06\u8bed\u97f3\u529f\u80fd\u89c6\u4e3a\u5c3d\u529b\u800c\u4e3a\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u5e38\u89c1\u9519\u8bef",children:"\u5e38\u89c1\u9519\u8bef"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"NODE_BACKGROUND_UNAVAILABLE"}),": \u5c06 iOS \u5e94\u7528\u5e26\u5230\u524d\u53f0 (canvas/\u76f8\u673a/\u5c4f\u5e55\u547d\u4ee4\u9700\u8981\u5b83)\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"A2UI_HOST_NOT_CONFIGURED"}),": \u7f51\u5173\u672a\u5ba3\u4f20 canvas \u4e3b\u673a URL\uff1b\u68c0\u67e5 ",(0,l.jsx)(e.a,{href:"/gateway/configuration",children:"\u7f51\u5173\u914d\u7f6e"})," \u4e2d\u7684 ",(0,l.jsx)(e.code,{children:"canvasHost"}),"\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:["\u914d\u5bf9\u63d0\u793a\u4ece\u672a\u51fa\u73b0: \u8fd0\u884c ",(0,l.jsx)(e.code,{children:"moltbot nodes pending"})," \u5e76\u624b\u52a8\u6279\u51c6\u3002"]}),"\n",(0,l.jsx)(e.li,{children:"\u91cd\u65b0\u5b89\u88c5\u540e\u91cd\u65b0\u8fde\u63a5\u5931\u8d25: Keychain \u914d\u5bf9\u4ee4\u724c\u5df2\u6e05\u9664\uff1b\u91cd\u65b0\u914d\u5bf9\u8282\u70b9\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u76f8\u5173\u6587\u6863",children:"\u76f8\u5173\u6587\u6863"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/gateway/pairing",children:"\u914d\u5bf9"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/gateway/discovery",children:"\u53d1\u73b0"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/gateway/bonjour",children:"Bonjour"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},28453(n,e,s){s.d(e,{R:()=>o,x:()=>c});var i=s(96540);const l={},a=i.createContext(l);function o(n){const e=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:o(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);