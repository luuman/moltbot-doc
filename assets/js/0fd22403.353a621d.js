"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[66],{79764(n,e,o){o.r(e),o.d(e,{assets:()=>r,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"plugins/agent-tools","title":"Plugin agent tools","description":"Moltbot plugins can register agent tools (JSON\u2011schema functions) that are exposed","source":"@site/content/moltbot/docs/plugins/agent-tools.md","sourceDirName":"plugins","slug":"/plugins/agent-tools","permalink":"/moltbot-doc/docs/plugins/agent-tools","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Write agent tools in a plugin (schemas, optional tools, allowlists)","read_when":["You want to add a new agent tool in a plugin","You need to make a tool opt-in via allowlists"]}}');var l=o(74848),s=o(28453);const i={summary:"Write agent tools in a plugin (schemas, optional tools, allowlists)",read_when:["You want to add a new agent tool in a plugin","You need to make a tool opt-in via allowlists"]},a="Plugin agent tools",r={},c=[{value:"Basic tool",id:"basic-tool",level:2},{value:"Optional tool (opt\u2011in)",id:"optional-tool-optin",level:2},{value:"Rules + tips",id:"rules--tips",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"plugin-agent-tools",children:"Plugin agent tools"})}),"\n",(0,l.jsxs)(e.p,{children:["Moltbot plugins can register ",(0,l.jsx)(e.strong,{children:"agent tools"})," (JSON\u2011schema functions) that are exposed\nto the LLM during agent runs. Tools can be ",(0,l.jsx)(e.strong,{children:"required"})," (always available) or\n",(0,l.jsx)(e.strong,{children:"optional"})," (opt\u2011in)."]}),"\n",(0,l.jsxs)(e.p,{children:["Agent tools are configured under ",(0,l.jsx)(e.code,{children:"tools"})," in the main config, or per\u2011agent under\n",(0,l.jsx)(e.code,{children:"agents.list[].tools"}),". The allowlist/denylist policy controls which tools the agent\ncan call."]}),"\n",(0,l.jsx)(e.h2,{id:"basic-tool",children:"Basic tool"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:'import { Type } from "@sinclair/typebox";\n\nexport default function (api) {\n  api.registerTool({\n    name: "my_tool",\n    description: "Do a thing",\n    parameters: Type.Object({\n      input: Type.String(),\n    }),\n    async execute(_id, params) {\n      return { content: [{ type: "text", text: params.input }] };\n    },\n  });\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"optional-tool-optin",children:"Optional tool (opt\u2011in)"}),"\n",(0,l.jsxs)(e.p,{children:["Optional tools are ",(0,l.jsx)(e.strong,{children:"never"})," auto\u2011enabled. Users must add them to an agent\nallowlist."]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:'export default function (api) {\n  api.registerTool(\n    {\n      name: "workflow_tool",\n      description: "Run a local workflow",\n      parameters: {\n        type: "object",\n        properties: {\n          pipeline: { type: "string" },\n        },\n        required: ["pipeline"],\n      },\n      async execute(_id, params) {\n        return { content: [{ type: "text", text: params.pipeline }] };\n      },\n    },\n    { optional: true },\n  );\n}\n'})}),"\n",(0,l.jsxs)(e.p,{children:["Enable optional tools in ",(0,l.jsx)(e.code,{children:"agents.list[].tools.allow"})," (or global ",(0,l.jsx)(e.code,{children:"tools.allow"}),"):"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-json5",children:'{\n  agents: {\n    list: [\n      {\n        id: "main",\n        tools: {\n          allow: [\n            "workflow_tool",  // specific tool name\n            "workflow",       // plugin id (enables all tools from that plugin)\n            "group:plugins"   // all plugin tools\n          ]\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:"Other config knobs that affect tool availability:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Allowlists that only name plugin tools are treated as plugin opt-ins; core tools remain\nenabled unless you also include core tools or groups in the allowlist."}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"tools.profile"})," / ",(0,l.jsx)(e.code,{children:"agents.list[].tools.profile"})," (base allowlist)"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"tools.byProvider"})," / ",(0,l.jsx)(e.code,{children:"agents.list[].tools.byProvider"})," (provider\u2011specific allow/deny)"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"tools.sandbox.tools.*"})," (sandbox tool policy when sandboxed)"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"rules--tips",children:"Rules + tips"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Tool names must ",(0,l.jsx)(e.strong,{children:"not"})," clash with core tool names; conflicting tools are skipped."]}),"\n",(0,l.jsx)(e.li,{children:"Plugin ids used in allowlists must not clash with core tool names."}),"\n",(0,l.jsxs)(e.li,{children:["Prefer ",(0,l.jsx)(e.code,{children:"optional: true"})," for tools that trigger side effects or require extra\nbinaries/credentials."]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},28453(n,e,o){o.d(e,{R:()=>i,x:()=>a});var t=o(96540);const l={},s=t.createContext(l);function i(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);