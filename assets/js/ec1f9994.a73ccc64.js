"use strict";(globalThis.webpackChunkdocs_workspace=globalThis.webpackChunkdocs_workspace||[]).push([[2343],{69444(n,e,o){o.r(e),o.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"gateway/configuration-examples","title":"Configuration Examples","description":"Examples below are aligned with the current config schema. For the exhaustive reference and per-field notes, see Configuration.","source":"@site/content/moltbot/docs/gateway/configuration-examples.md","sourceDirName":"gateway","slug":"/gateway/configuration-examples","permalink":"/moltbot-doc/docs/gateway/configuration-examples","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"summary":"Schema-accurate configuration examples for common Moltbot setups","read_when":["Learning how to configure Moltbot","Looking for configuration examples","Setting up Moltbot for the first time"]},"sidebar":"tutorialSidebar","previous":{"title":"\u914d\u7f6e","permalink":"/moltbot-doc/docs/gateway/configuration"},"next":{"title":"\u8fdc\u7a0b","permalink":"/moltbot-doc/docs/gateway/remote"}}');var t=o(74848),r=o(28453);const i={summary:"Schema-accurate configuration examples for common Moltbot setups",read_when:["Learning how to configure Moltbot","Looking for configuration examples","Setting up Moltbot for the first time"]},s="Configuration Examples",l={},c=[{value:"Quick start",id:"quick-start",level:2},{value:"Absolute minimum",id:"absolute-minimum",level:3},{value:"Recommended starter",id:"recommended-starter",level:3},{value:"Expanded example (major options)",id:"expanded-example-major-options",level:2},{value:"Common patterns",id:"common-patterns",level:2},{value:"Multi-platform setup",id:"multi-platform-setup",level:3},{value:"OAuth with API key failover",id:"oauth-with-api-key-failover",level:3},{value:"Anthropic subscription + API key, MiniMax fallback",id:"anthropic-subscription--api-key-minimax-fallback",level:3},{value:"Work bot (restricted access)",id:"work-bot-restricted-access",level:3},{value:"Local models only",id:"local-models-only",level:3},{value:"Tips",id:"tips",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"configuration-examples",children:"Configuration Examples"})}),"\n",(0,t.jsxs)(e.p,{children:["Examples below are aligned with the current config schema. For the exhaustive reference and per-field notes, see ",(0,t.jsx)(e.a,{href:"/gateway/configuration",children:"Configuration"}),"."]}),"\n",(0,t.jsx)(e.h2,{id:"quick-start",children:"Quick start"}),"\n",(0,t.jsx)(e.h3,{id:"absolute-minimum",children:"Absolute minimum"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  agent: { workspace: "~/clawd" },\n  channels: { whatsapp: { allowFrom: ["+15555550123"] } }\n}\n'})}),"\n",(0,t.jsxs)(e.p,{children:["Save to ",(0,t.jsx)(e.code,{children:"~/.clawdbot/moltbot.json"})," and you can DM the bot from that number."]}),"\n",(0,t.jsx)(e.h3,{id:"recommended-starter",children:"Recommended starter"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  identity: {\n    name: "Clawd",\n    theme: "helpful assistant",\n    emoji: "\ud83e\udd9e"\n  },\n  agent: {\n    workspace: "~/clawd",\n    model: { primary: "anthropic/claude-sonnet-4-5" }\n  },\n  channels: {\n    whatsapp: {\n      allowFrom: ["+15555550123"],\n      groups: { "*": { requireMention: true } }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"expanded-example-major-options",children:"Expanded example (major options)"}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"JSON5 lets you use comments and trailing commas. Regular JSON works too."}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  // Environment + shell\n  env: {\n    OPENROUTER_API_KEY: "sk-or-...",\n    vars: {\n      GROQ_API_KEY: "gsk-..."\n    },\n    shellEnv: {\n      enabled: true,\n      timeoutMs: 15000\n    }\n  },\n\n  // Auth profile metadata (secrets live in auth-profiles.json)\n  auth: {\n    profiles: {\n      "anthropic:me@example.com": { provider: "anthropic", mode: "oauth", email: "me@example.com" },\n      "anthropic:work": { provider: "anthropic", mode: "api_key" },\n      "openai:default": { provider: "openai", mode: "api_key" },\n      "openai-codex:default": { provider: "openai-codex", mode: "oauth" }\n    },\n    order: {\n      anthropic: ["anthropic:me@example.com", "anthropic:work"],\n      openai: ["openai:default"],\n      "openai-codex": ["openai-codex:default"]\n    }\n  },\n\n  // Identity\n  identity: {\n    name: "Samantha",\n    theme: "helpful sloth",\n    emoji: "\ud83e\udda5"\n  },\n\n  // Logging\n  logging: {\n    level: "info",\n    file: "/tmp/moltbot/moltbot.log",\n    consoleLevel: "info",\n    consoleStyle: "pretty",\n    redactSensitive: "tools"\n  },\n\n  // Message formatting\n  messages: {\n    messagePrefix: "[moltbot]",\n    responsePrefix: ">",\n    ackReaction: "\ud83d\udc40",\n    ackReactionScope: "group-mentions"\n  },\n\n  // Routing + queue\n  routing: {\n    groupChat: {\n      mentionPatterns: ["@clawd", "moltbot"],\n      historyLimit: 50\n    },\n    queue: {\n      mode: "collect",\n      debounceMs: 1000,\n      cap: 20,\n      drop: "summarize",\n      byChannel: {\n        whatsapp: "collect",\n        telegram: "collect",\n        discord: "collect",\n        slack: "collect",\n        signal: "collect",\n        imessage: "collect",\n        webchat: "collect"\n      }\n    }\n  },\n\n  // Tooling\n  tools: {\n    media: {\n      audio: {\n        enabled: true,\n        maxBytes: 20971520,\n        models: [\n          { provider: "openai", model: "gpt-4o-mini-transcribe" },\n          // Optional CLI fallback (Whisper binary):\n          // { type: "cli", command: "whisper", args: ["--model", "base", "{{MediaPath}}"] }\n        ],\n        timeoutSeconds: 120\n      },\n      video: {\n        enabled: true,\n        maxBytes: 52428800,\n        models: [{ provider: "google", model: "gemini-3-flash-preview" }]\n      }\n    }\n  },\n\n  // Session behavior\n  session: {\n    scope: "per-sender",\n    reset: {\n      mode: "daily",\n      atHour: 4,\n      idleMinutes: 60\n    },\n    resetByChannel: {\n      discord: { mode: "idle", idleMinutes: 10080 }\n    },\n    resetTriggers: ["/new", "/reset"],\n    store: "~/.clawdbot/agents/default/sessions/sessions.json",\n    typingIntervalSeconds: 5,\n    sendPolicy: {\n      default: "allow",\n      rules: [\n        { action: "deny", match: { channel: "discord", chatType: "group" } }\n      ]\n    }\n  },\n\n  // Channels\n  channels: {\n    whatsapp: {\n      dmPolicy: "pairing",\n      allowFrom: ["+15555550123"],\n      groupPolicy: "allowlist",\n      groupAllowFrom: ["+15555550123"],\n      groups: { "*": { requireMention: true } }\n    },\n\n    telegram: {\n      enabled: true,\n      botToken: "YOUR_TELEGRAM_BOT_TOKEN",\n      allowFrom: ["123456789"],\n      groupPolicy: "allowlist",\n      groupAllowFrom: ["123456789"],\n      groups: { "*": { requireMention: true } }\n    },\n\n    discord: {\n      enabled: true,\n      token: "YOUR_DISCORD_BOT_TOKEN",\n      dm: { enabled: true, allowFrom: ["steipete"] },\n      guilds: {\n        "123456789012345678": {\n          slug: "friends-of-clawd",\n          requireMention: false,\n          channels: {\n            general: { allow: true },\n            help: { allow: true, requireMention: true }\n          }\n        }\n      }\n    },\n\n    slack: {\n      enabled: true,\n      botToken: "xoxb-REPLACE_ME",\n      appToken: "xapp-REPLACE_ME",\n      channels: {\n        "#general": { allow: true, requireMention: true }\n      },\n      dm: { enabled: true, allowFrom: ["U123"] },\n      slashCommand: {\n        enabled: true,\n        name: "clawd",\n        sessionPrefix: "slack:slash",\n        ephemeral: true\n      }\n    }\n  },\n\n  // Agent runtime\n  agents: {\n    defaults: {\n      workspace: "~/clawd",\n      userTimezone: "America/Chicago",\n      model: {\n        primary: "anthropic/claude-sonnet-4-5",\n        fallbacks: ["anthropic/claude-opus-4-5", "openai/gpt-5.2"]\n      },\n      imageModel: {\n        primary: "openrouter/anthropic/claude-sonnet-4-5"\n      },\n      models: {\n        "anthropic/claude-opus-4-5": { alias: "opus" },\n        "anthropic/claude-sonnet-4-5": { alias: "sonnet" },\n        "openai/gpt-5.2": { alias: "gpt" }\n      },\n      thinkingDefault: "low",\n      verboseDefault: "off",\n      elevatedDefault: "on",\n      blockStreamingDefault: "off",\n      blockStreamingBreak: "text_end",\n      blockStreamingChunk: {\n        minChars: 800,\n        maxChars: 1200,\n        breakPreference: "paragraph"\n      },\n      blockStreamingCoalesce: {\n        idleMs: 1000\n      },\n      humanDelay: {\n        mode: "natural"\n      },\n      timeoutSeconds: 600,\n      mediaMaxMb: 5,\n      typingIntervalSeconds: 5,\n      maxConcurrent: 3,\n      heartbeat: {\n        every: "30m",\n        model: "anthropic/claude-sonnet-4-5",\n        target: "last",\n        to: "+15555550123",\n        prompt: "HEARTBEAT",\n        ackMaxChars: 300\n      },\n      memorySearch: {\n        provider: "gemini",\n        model: "gemini-embedding-001",\n        remote: {\n          apiKey: "${GEMINI_API_KEY}"\n        }\n      },\n      sandbox: {\n        mode: "non-main",\n        perSession: true,\n        workspaceRoot: "~/.clawdbot/sandboxes",\n        docker: {\n          image: "moltbot-sandbox:bookworm-slim",\n          workdir: "/workspace",\n          readOnlyRoot: true,\n          tmpfs: ["/tmp", "/var/tmp", "/run"],\n          network: "none",\n          user: "1000:1000"\n        },\n        browser: {\n          enabled: false\n        }\n      }\n    }\n  },\n\n  tools: {\n    allow: ["exec", "process", "read", "write", "edit", "apply_patch"],\n    deny: ["browser", "canvas"],\n    exec: {\n      backgroundMs: 10000,\n      timeoutSec: 1800,\n      cleanupMs: 1800000\n    },\n    elevated: {\n      enabled: true,\n      allowFrom: {\n        whatsapp: ["+15555550123"],\n        telegram: ["123456789"],\n        discord: ["steipete"],\n        slack: ["U123"],\n        signal: ["+15555550123"],\n        imessage: ["user@example.com"],\n        webchat: ["session:demo"]\n      }\n    }\n  },\n\n  // Custom model providers\n  models: {\n    mode: "merge",\n    providers: {\n      "custom-proxy": {\n        baseUrl: "http://localhost:4000/v1",\n        apiKey: "LITELLM_KEY",\n        api: "openai-responses",\n        authHeader: true,\n        headers: { "X-Proxy-Region": "us-west" },\n        models: [\n          {\n            id: "llama-3.1-8b",\n            name: "Llama 3.1 8B",\n            api: "openai-responses",\n            reasoning: false,\n            input: ["text"],\n            cost: { input: 0, output: 0, cacheRead: 0, cacheWrite: 0 },\n            contextWindow: 128000,\n            maxTokens: 32000\n          }\n        ]\n      }\n    }\n  },\n\n  // Cron jobs\n  cron: {\n    enabled: true,\n    store: "~/.clawdbot/cron/cron.json",\n    maxConcurrentRuns: 2\n  },\n\n  // Webhooks\n  hooks: {\n    enabled: true,\n    path: "/hooks",\n    token: "shared-secret",\n    presets: ["gmail"],\n    transformsDir: "~/.clawdbot/hooks",\n    mappings: [\n      {\n        id: "gmail-hook",\n        match: { path: "gmail" },\n        action: "agent",\n        wakeMode: "now",\n        name: "Gmail",\n        sessionKey: "hook:gmail:{{messages[0].id}}",\n        messageTemplate: "From: {{messages[0].from}}\\nSubject: {{messages[0].subject}}",\n        textTemplate: "{{messages[0].snippet}}",\n        deliver: true,\n        channel: "last",\n        to: "+15555550123",\n        thinking: "low",\n        timeoutSeconds: 300,\n        transform: { module: "./transforms/gmail.js", export: "transformGmail" }\n      }\n    ],\n    gmail: {\n      account: "moltbot@gmail.com",\n      label: "INBOX",\n      topic: "projects/<project-id>/topics/gog-gmail-watch",\n      subscription: "gog-gmail-watch-push",\n      pushToken: "shared-push-token",\n      hookUrl: "http://127.0.0.1:18789/hooks/gmail",\n      includeBody: true,\n      maxBytes: 20000,\n      renewEveryMinutes: 720,\n      serve: { bind: "127.0.0.1", port: 8788, path: "/" },\n      tailscale: { mode: "funnel", path: "/gmail-pubsub" }\n    }\n  },\n\n  // Gateway + networking\n  gateway: {\n    mode: "local",\n    port: 18789,\n    bind: "loopback",\n    controlUi: { enabled: true, basePath: "/moltbot" },\n    auth: {\n      mode: "token",\n      token: "gateway-token",\n      allowTailscale: true\n    },\n    tailscale: { mode: "serve", resetOnExit: false },\n    remote: { url: "ws://gateway.tailnet:18789", token: "remote-token" },\n    reload: { mode: "hybrid", debounceMs: 300 }\n  },\n\n  skills: {\n    allowBundled: ["gemini", "peekaboo"],\n    load: {\n      extraDirs: ["~/Projects/agent-scripts/skills"]\n    },\n    install: {\n      preferBrew: true,\n      nodeManager: "npm"\n    },\n    entries: {\n      "nano-banana-pro": {\n        enabled: true,\n        apiKey: "GEMINI_KEY_HERE",\n        env: { GEMINI_API_KEY: "GEMINI_KEY_HERE" }\n      },\n      peekaboo: { enabled: true }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"common-patterns",children:"Common patterns"}),"\n",(0,t.jsx)(e.h3,{id:"multi-platform-setup",children:"Multi-platform setup"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  agent: { workspace: "~/clawd" },\n  channels: {\n    whatsapp: { allowFrom: ["+15555550123"] },\n    telegram: {\n      enabled: true,\n      botToken: "YOUR_TOKEN",\n      allowFrom: ["123456789"]\n    },\n    discord: {\n      enabled: true,\n      token: "YOUR_TOKEN",\n      dm: { allowFrom: ["yourname"] }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"oauth-with-api-key-failover",children:"OAuth with API key failover"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  auth: {\n    profiles: {\n      "anthropic:subscription": {\n        provider: "anthropic",\n        mode: "oauth",\n        email: "me@example.com"\n      },\n      "anthropic:api": {\n        provider: "anthropic",\n        mode: "api_key"\n      }\n    },\n    order: {\n      anthropic: ["anthropic:subscription", "anthropic:api"]\n    }\n  },\n  agent: {\n    workspace: "~/clawd",\n    model: {\n      primary: "anthropic/claude-sonnet-4-5",\n      fallbacks: ["anthropic/claude-opus-4-5"]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"anthropic-subscription--api-key-minimax-fallback",children:"Anthropic subscription + API key, MiniMax fallback"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  auth: {\n    profiles: {\n      "anthropic:subscription": {\n        provider: "anthropic",\n        mode: "oauth",\n        email: "user@example.com"\n      },\n      "anthropic:api": {\n        provider: "anthropic",\n        mode: "api_key"\n      }\n    },\n    order: {\n      anthropic: ["anthropic:subscription", "anthropic:api"]\n    }\n  },\n  models: {\n    providers: {\n      minimax: {\n        baseUrl: "https://api.minimax.io/anthropic",\n        api: "anthropic-messages",\n        apiKey: "${MINIMAX_API_KEY}"\n      }\n    }\n  },\n  agent: {\n    workspace: "~/clawd",\n    model: {\n      primary: "anthropic/claude-opus-4-5",\n      fallbacks: ["minimax/MiniMax-M2.1"]\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"work-bot-restricted-access",children:"Work bot (restricted access)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  identity: {\n    name: "WorkBot",\n    theme: "professional assistant"\n  },\n  agent: {\n    workspace: "~/work-clawd",\n    elevated: { enabled: false }\n  },\n  channels: {\n    slack: {\n      enabled: true,\n      botToken: "xoxb-...",\n      channels: {\n        "#engineering": { allow: true, requireMention: true },\n        "#general": { allow: true, requireMention: true }\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"local-models-only",children:"Local models only"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json5",children:'{\n  agent: {\n    workspace: "~/clawd",\n    model: { primary: "lmstudio/minimax-m2.1-gs32" }\n  },\n  models: {\n    mode: "merge",\n    providers: {\n      lmstudio: {\n        baseUrl: "http://127.0.0.1:1234/v1",\n        apiKey: "lmstudio",\n        api: "openai-responses",\n        models: [\n          {\n            id: "minimax-m2.1-gs32",\n            name: "MiniMax M2.1 GS32",\n            reasoning: false,\n            input: ["text"],\n            cost: { input: 0, output: 0, cacheRead: 0, cacheWrite: 0 },\n            contextWindow: 196608,\n            maxTokens: 8192\n          }\n        ]\n      }\n    }\n  }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"tips",children:"Tips"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["If you set ",(0,t.jsx)(e.code,{children:'dmPolicy: "open"'}),", the matching ",(0,t.jsx)(e.code,{children:"allowFrom"})," list must include ",(0,t.jsx)(e.code,{children:'"*"'}),"."]}),"\n",(0,t.jsx)(e.li,{children:"Provider IDs differ (phone numbers, user IDs, channel IDs). Use the provider docs to confirm the format."}),"\n",(0,t.jsxs)(e.li,{children:["Optional sections to add later: ",(0,t.jsx)(e.code,{children:"web"}),", ",(0,t.jsx)(e.code,{children:"browser"}),", ",(0,t.jsx)(e.code,{children:"ui"}),", ",(0,t.jsx)(e.code,{children:"discovery"}),", ",(0,t.jsx)(e.code,{children:"canvasHost"}),", ",(0,t.jsx)(e.code,{children:"talk"}),", ",(0,t.jsx)(e.code,{children:"signal"}),", ",(0,t.jsx)(e.code,{children:"imessage"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["See ",(0,t.jsx)(e.a,{href:"/channels/whatsapp",children:"Providers"})," and ",(0,t.jsx)(e.a,{href:"/gateway/troubleshooting",children:"Troubleshooting"})," for deeper setup notes."]}),"\n"]})]})}function m(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},28453(n,e,o){o.d(e,{R:()=>i,x:()=>s});var a=o(96540);const t={},r=a.createContext(t);function i(n){const e=a.useContext(r);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),a.createElement(r.Provider,{value:e},n.children)}}}]);